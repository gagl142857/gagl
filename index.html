<!DOCTYPE html>
<html lang="ko">

<head>


    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-database-compat.js"></script>


    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <title>gagl</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: black;
            margin: 0;
            padding: 0;
            color: white;
            display: flex;
            /* justify-content: center; */
            align-items: center;
            flex-direction: column;
            height: 100vh;
            font-size: 14px;
            /* position: fixed; */
            /* í™”ë©´ê³ ì •ë°°ì¹˜ ìŠ¤í¬ë¡¤í•´ë„ ì•ˆì›€ì§ì„ */
            /* justify-content: space-between; */
            /* ì–‘ìª½ì •ë ¬ */
            font-weight: 500;
        }

        .ë°‘ì¤„ {
            border-bottom: 0.2px solid #2e2e2e;
            /* position: fixed; */
            /* top: 0; */
            width: 100%;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ê°€ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .ì„¸ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì–‘ìª½ì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 10px;
        }

        .ì‚¬ë°±í”½ì…€ {
            width: 400px;
        }

        .ë²„íŠ¼ {
            border-radius: 5px;
            padding: 5px;
        }

        .ë²„íŠ¼:hover {
            background-color: #333;
            cursor: pointer;
        }

        .ì»¤ì„œí˜¸ë²„:hover {
            cursor: pointer;
        }

        .ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 400px;
            border: 0.2px solid #2e2e2e;
            border-radius: 10px;
            padding: 15px;
        }

        .ê¸°ë³¸í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 100%;
            box-sizing: border-box;
            border: 0.2px solid #2e2e2e;
            border-radius: 10px;
            padding: 15px;
        }

        .ìœ ì €ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            width: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì—ë„ˆì§€ë°” {
            background-color: #eab308;
            height: 5px;
            border-radius: 10px;
            width: 100%;
        }

        .ìœ ì €í…Œë‘ë¦¬ {
            border: 0.2px solid #2614c7;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */
        }

        .ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            border: 0.2px solid #c71414;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */

        }

        .ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ {
            background-color: #121212;
            height: 85px;
            border-radius: 10px;
            width: 100px;
            padding: 15px;
        }

        .ë ˆë²¨ {
            color: #00c851;
        }

        .ì´ê²½í—˜ì¹˜ {
            color: #ffffff;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê²½í—˜ì¹˜ {
            color: #7a7a7a;
            font-size: 10px;
            font-weight: lighter;
        }

        .ê³¨ë“œ {
            color: #b0b0b0;
        }

        .ì´ê³¨ë“œ {
            color: #f5c400;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê³¨ë“œ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ìˆ™ë ¨ë„ {
            color: #b0b0b0;
        }

        .ì´ìˆ™ë ¨ë„ {
            color: #3b82f6;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ìˆ™ë ¨ë„ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ì½˜ì†”ë¡œê·¸ì°½ {
            color: #ffffff;
            border-radius: 10px;
            position: fixed;
            left: 0;
            bottom: 0;
            font-weight: bold;
        }

        .ë¡œë”©ì»¨í…Œì´ë„ˆ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: sans-serif;
            font-size: 16px;
        }

        .ë¡œë”©ìŠ¤í”¼ë„ˆ {
            width: 50px;
            height: 50px;
            border: 6px solid #ccc;
            border-top-color: #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        #ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤ {
            max-height: 220px;
            /* í•„ìš”ì— ë”°ë¼ ì¡°ì ˆ ê°€ëŠ¥ */
            overflow-y: hidden;
            /* padding: 5px; */
            /* font-family: monospace; */
        }

        #ì£½ìŒë©”ì‹œì§€ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 400px;
            position: fixed;
            top: 33%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: #b0b0b0;
            padding: 15px;
            border: 3px solid #2e2e2e;
            border-radius: 12px;
            /* font-size: 20px; */
            /* font-weight: bold; */
            z-index: 9999;
            box-shadow: 0 0 20px rgba(234, 0, 255, 0.6);
            animation: fadeOut 2s ease-in-out forwards;
            user-select: none;
            pointer-events: none;
        }

        /* ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ê²Œ í•˜ëŠ” í˜ì´ë“œ ì•„ì›ƒ */
        @keyframes fadeOut {
            0% {
                opacity: 1;
            }

            70% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                display: none;
            }
        }

        #íšë“ë¡œê·¸ {
            color: #00c851;
        }

        #ë ˆë²¨ì—…í‘œì‹œ {
            color: #00c851;
        }

        #í˜„ì¬ì¸µ {
            background: linear-gradient(135deg, #330000, #660000, #990000);
            border: 2px solid #ff3300;
            box-shadow: 0 0 12px #ff0000, 0 0 24px #440000 inset;
            animation: ë§ˆê³„ë¶ˆê¸¸ 4s ease-in-out infinite;
        }

        @keyframes ë§ˆê³„ë¶ˆê¸¸ {

            0%,
            100% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.3);
            }
        }

        .crown-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        .ê¸ˆ {
            stroke: gold;
        }

        .ì€ {
            stroke: silver;
        }

        .ë™ {
            stroke: #cd7f32;
        }

        #ë³´ìœ ìˆ™ë ¨ë„:hover {
            cursor: pointer;
            text-decoration: underline;
            color: #3b82f6;
        }

        .target-icon {
            width: 16px;
            height: 16px;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            margin-right: 4px;
        }

        .ì•ŒíŒŒ {
            stroke: #facc15;
        }

        /* ë…¸ë‘ */
        .ë² íƒ€ {
            stroke: #fb923c;
        }

        /* ì£¼í™© */
        .ê°ë§ˆ {
            stroke: #38bdf8;
        }

        /* í•˜ëŠ˜ */
        .ë¸íƒ€ {
            stroke: #a855f7;
        }

        /* ë³´ë¼ */
        .ì˜¤ë©”ê°€ {
            stroke: #ef4444;
        }

        /* ë¹¨ê°• */


        /* cssì¶”ê°€ */
    </style>
</head>

<body>

    <!-- <div id="ë¡œë”©í™”ë©´" class="ë¡œë”©ì»¨í…Œì´ë„ˆ">
        <div class="ë¡œë”©ìŠ¤í”¼ë„ˆ"></div>
        <div style="margin-top: 10px;">ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</div>
    </div> -->



    <div class="ë°‘ì¤„" id="ìƒë‹¨ë°”">
        <div class="ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€">
            <div class="ì»¤ì„œí˜¸ë²„" id="íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ">
                gagl
            </div>
            <div id="ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼" style="display: none;">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ë²„íŠ¼" id="ì „íˆ¬">
                        ì „íˆ¬
                    </div>
                    <div class="ë²„íŠ¼">
                        ì¥ë¹„
                    </div>
                    <div class="ë²„íŠ¼" id="ìŠ¤í‚¬">
                        ìŠ¤í‚¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì „ë‹¹">
                        ì „ë‹¹
                    </div>
                    <div class="ë²„íŠ¼" id="íƒˆí‡´">
                        íƒˆí‡´
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì—ë„ˆì§€ë°•ìŠ¤" style="display: none;">
        <div class="ì–‘ìª½ì •ë ¬">
            <div style="color: #eab308;">
                <!-- ë£¨ì‹œë“œ zap ì•„ì´ì½˜ SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-zap-icon lucide-zap">
                    <path
                        d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" />
                </svg>
            </div>
            <div>
                â™¾ï¸
            </div>
        </div>
        <div class="ì—ë„ˆì§€ë°”">

        </div>
    </div>



    <div id="ë¡œê·¸ì¸í™”ë©´" style="display: none;">

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
            <input type="text" placeholder="ì•„ì´ë””ì„ ì…ë ¥í•˜ì„¸ìš”" id="ì•„ì´ë””ì…ë ¥" autocomplete="off" maxlength="8">
            <button onclick="ì•„ì´ë””ì„¤ì •()">í™•ì¸</button>
        </div>
    </div>




    <div id="ì „íˆ¬í™”ë©´" style="display: none;">
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ê°€ë¡œì •ë ¬" id="í˜„ì¬ì¸µ">
            1ì¸µ
        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ìœ ì €í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬">
            <div id="ìœ ì €ì•„ì´ë””">
                ì˜ì
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ìœ ì €ê³µê²©ë ¥">
                    ê³µê²©ë ¥ 100
                </div>
                <div id="ìœ ì €ì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
            </div>

        </div>
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ëª¬ìŠ¤í„°í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬">
            <div id="ì•…ë§ˆì´ë¦„">
                ëª¬ìŠ¤í„°
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ì•…ë§ˆì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
                <div id="ì•…ë§ˆë°©ì–´ë ¥">
                    ë°©ì–´ë ¥ 10
                </div>
            </div>
        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ê°€ë¡œì •ë ¬" id="ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤">
            <div class="ë²„íŠ¼" id="ê³µê²©ë²„íŠ¼">âš”ï¸ ê³µê²©í•˜ê¸°</div>
            <div class="ë²„íŠ¼" id="ìë™ì‚¬ëƒ¥ë²„íŠ¼">â± ìë™ì‚¬ëƒ¥</div>
        </div>

        <div id="ì‚¬ëƒ¥ê²°ê³¼">
            <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ë ˆë²¨" id="ë ˆë²¨">
                            ë ˆë²¨ 129
                        </div>
                        <div class="ì´ê²½í—˜ì¹˜" id="ì´ê²½í—˜ì¹˜">
                            12,932
                        </div>
                        <div class="íšë“ê²½í—˜ì¹˜" id="íšë“ê²½í—˜ì¹˜">
                            45
                        </div>
                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ê³¨ë“œ" id="ê³¨ë“œ">
                            ê³¨ë“œ
                        </div>
                        <div class="ì´ê³¨ë“œ" id="ì´ê³¨ë“œ">
                            999,999
                        </div>
                        <div class="íšë“ê³¨ë“œ" id="íšë“ê³¨ë“œ">
                            999
                        </div>

                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ìˆ™ë ¨ë„" id="ìˆ™ë ¨ë„">
                            ìˆ™ë ¨ë„
                        </div>
                        <div class="ì´ìˆ™ë ¨ë„" id="ì´ìˆ™ë ¨ë„">
                            999,999
                        </div>
                        <div class="íšë“ìˆ™ë ¨ë„" id="íšë“ìˆ™ë ¨ë„">
                            999
                        </div>

                    </div>
                </div>

                <div class="ê°€ë¡œì •ë ¬" id="íšë“ë¡œê·¸">
                </div>

                <div class="ê°€ë¡œì •ë ¬" id="ë ˆë²¨ì—…í‘œì‹œ">

                </div>
            </div>
        </div>

        <div id="ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤"></div>
    </div>

    <div id="ì „ë‹¹í™”ë©´" style="display: none;">
        <div id="ì „ë‹¹ì»¨í…Œì´ë„ˆ" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
        </div>
    </div>

    <div class="ì½˜ì†”ë¡œê·¸ì°½" id="ì½˜ì†”ë¡œê·¸ì°½">
        ì½˜ì†”ë¡œê·¸ì°½
    </div>

    <div id="ì£½ìŒë©”ì‹œì§€" style="display: none;"></div>

    <div id="ë¸”ë¡œì»¤" style="
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 9999;
  display: none;
  cursor: wait;
"></div>

    <div id="ìŠ¤í‚¬í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„" id="ë³´ìœ ìˆ™ë ¨ë„">

        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬" id="ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ">
        </div>
    </div>


    <!-- ê°ì²´ì¶”ê°€ -->


    <script>
        // ì½˜ì†” ë¡œê·¸ ì¶œë ¥ìš©
        const ì›ë˜ë¡œê·¸ = console.log;
        console.log = function (...args) {
            ì›ë˜ë¡œê·¸(...args); // ê¸°ì¡´ ì½˜ì†”ì— ì¶œë ¥
            const ì½˜ì†”ë¡œê·¸ì°½ = document.getElementById("ì½˜ì†”ë¡œê·¸ì°½");
            ì½˜ì†”ë¡œê·¸ì°½.innerText = args.map(arg =>
                typeof arg === "object" ? JSON.stringify(arg) : arg
            ).join(" ");
            ì½˜ì†”ë¡œê·¸ì°½.style.display = "block";
        };

        // ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥ìš©
        window.onerror = function (message, source, lineno, colno, error) {
            const ì½˜ì†”ë¡œê·¸ì°½ = document.getElementById("ì½˜ì†”ë¡œê·¸ì°½");
            ì½˜ì†”ë¡œê·¸ì°½.innerText = `${message} (${lineno}:${colno})`;
            ì½˜ì†”ë¡œê·¸ì°½.style.display = "block";
            return true;
        };




        const firebaseConfig = {
            apiKey: "AIzaSyATQ8ecSPS6StHUEv_-b-bw59qtjXoUzHc",
            authDomain: "gagl-eb32b.firebaseapp.com",
            projectId: "gagl-eb32b",
            storageBucket: "gagl-eb32b.firebasestorage.app",
            messagingSenderId: "689475246615",
            appId: "1:689475246615:web:9b5c0d7650e9580e34da52",
            measurementId: "G-2G82FVDY46",
            databaseURL: "https://gagl-eb32b-default-rtdb.firebaseio.com"  // ì´ ì¤„ ì¶”ê°€
        };



        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();



        let uid = "";
        let ìœ ì €ë°ì´í„° = {};
        let í˜„ì¬ì•…ë§ˆ = null;

        let í˜„ì¬ì•…ë§ˆì²´ë ¥ = 0;
        let í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥ = 0;
        let ìë™ì‚¬ëƒ¥ì¤‘ = false;
        let ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

        const ìŠ¤í‚¬ëª©ë¡ = [
            {
                í‚¤: "ì•ŒíŒŒí¬ë¦¬í‹°ì»¬í™•ë¥ ",
                ì´ë¦„: "ì•ŒíŒŒ í¬ë¦¬í‹°ì»¬ í™•ë¥ ",
                ì„¤ëª…: "ì•ŒíŒŒ ì¹˜ëª…íƒ€ í™•ë¥ ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.",
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10,
                ì ê¸ˆí•´ì œì¡°ê±´: null
            },
            {
                í‚¤: "ë² íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ",
                ì´ë¦„: "ë² íƒ€ í¬ë¦¬í‹°ì»¬ í™•ë¥ ",
                ì„¤ëª…: "ë² íƒ€ ì¹˜ëª…íƒ€ í™•ë¥ ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.",
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 20,
                ì ê¸ˆí•´ì œì¡°ê±´: { í‚¤: "ì•ŒíŒŒí¬ë¦¬í‹°ì»¬í™•ë¥ ", ìµœì†Œë ˆë²¨: 10 }
            },
            {
                í‚¤: "ê°ë§ˆí¬ë¦¬í‹°ì»¬í™•ë¥ ",
                ì´ë¦„: "ê°ë§ˆ í¬ë¦¬í‹°ì»¬ í™•ë¥ ",
                ì„¤ëª…: "ê°ë§ˆ ì¹˜ëª…íƒ€ í™•ë¥ ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.",
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 30,
                ì ê¸ˆí•´ì œì¡°ê±´: { í‚¤: "ë² íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ", ìµœì†Œë ˆë²¨: 10 }
            },
            {
                í‚¤: "ë¸íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ",
                ì´ë¦„: "ë¸íƒ€ í¬ë¦¬í‹°ì»¬ í™•ë¥ ",
                ì„¤ëª…: "ë¸íƒ€ ì¹˜ëª…íƒ€ í™•ë¥ ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.",
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 50,
                ì ê¸ˆí•´ì œì¡°ê±´: { í‚¤: "ê°ë§ˆí¬ë¦¬í‹°ì»¬í™•ë¥ ", ìµœì†Œë ˆë²¨: 10 }
            },
            {
                í‚¤: "ì˜¤ë©”ê°€í¬ë¦¬í‹°ì»¬í™•ë¥ ",
                ì´ë¦„: "ì˜¤ë©”ê°€ í¬ë¦¬í‹°ì»¬ í™•ë¥ ",
                ì„¤ëª…: "ì˜¤ë©”ê°€ ì¹˜ëª…íƒ€ í™•ë¥ ì„ ì¦ê°€ì‹œí‚µë‹ˆë‹¤.",
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 80,
                ì ê¸ˆí•´ì œì¡°ê±´: { í‚¤: "ë¸íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ", ìµœì†Œë ˆë²¨: 10 }
            }
        ];



        auth.onAuthStateChanged(function (user) {
            if (user) {
                uid = user.uid;

                // document.getElementById("ë¡œë”©í™”ë©´").style.display = "block";
                // UID ê¸°ì¤€ìœ¼ë¡œ DB ì¡°íšŒ
                í™”ë©´ì ê¸ˆ();
                db.ref("users/" + uid).once("value").then((snapshot) => {
                    if (snapshot.exists()) {
                        const ë°ì´í„° = snapshot.val();

                        if (ë°ì´í„°.ì•„ì´ë”” && ë°ì´í„°.ì•„ì´ë””.trim() !== "") {
                            ìœ ì €ë°ì´í„° = ë°ì´í„°;
                            // â¬‡ï¸ ì—¬ê¸°!
                            if (!ìœ ì €ë°ì´í„°.ìŠ¤í‚¬) {
                                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ = {};
                            }
                            for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                                if (!(ìŠ¤í‚¬.í‚¤ in ìœ ì €ë°ì´í„°.ìŠ¤í‚¬)) {
                                    ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                                }
                            }

                            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                            í™”ë©´í•´ì œ();
                        } else {
                            // âŒ ì•„ì´ë”” ì—†ìŒ â†’ ë¡œê·¸ì¸í™”ë©´ ì§„ì…
                            ìœ ì €ë°ì´í„° = ë°ì´í„°;
                            ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°();
                            í™”ë©´í•´ì œ();
                        }
                    } else {
                        // âœ… ì™„ì „ ì‹ ê·œ ìœ ì € â†’ ê¸°ë³¸ ë°ì´í„° ìƒì„± ë° ì €ì¥
                        ìœ ì €ë°ì´í„° = {
                            ì•„ì´ë””: "",
                            ìƒì„±ì‹œê°: new Date().toISOString(),
                            ë ˆë²¨: 1,
                            ê³µê²©ë ¥: 100,
                            ì²´ë ¥: 100,
                            ê²½í—˜ì¹˜: 0,
                            ê³¨ë“œ: 0,
                            ìˆ™ë ¨ë„: 0,
                            í˜„ì¬ì¸µ: 1,
                            í˜„ì¬ì•…ë§ˆë²ˆí˜¸: 1,
                            ìŠ¤í‚¬: {} // ì¼ë‹¨ ë¹ˆ ê°ì²´ë¡œ ë„£ê³  ë°”ë¡œ ì•„ë˜ì—ì„œ ì±„ì›€
                        };

                        for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                        }

                        db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                            ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°(); // ì•„ì´ë”” ì—†ìœ¼ë¯€ë¡œ ë¡œê·¸ì¸í™”ë©´ë¶€í„°
                            í™”ë©´í•´ì œ();
                        });
                    }
                });

            } else {
                // ì•„ì§ ë¡œê·¸ì¸ë˜ì§€ ì•Šì•˜ìœ¼ë©´ â†’ ìµëª… ë¡œê·¸ì¸ ì‹œì‘
                auth.signInAnonymously();
            }
        });

        function í™”ë©´ì ê¸ˆ() {
            document.getElementById("ë¸”ë¡œì»¤").style.display = "block";
        }

        function í™”ë©´í•´ì œ() {
            document.getElementById("ë¸”ë¡œì»¤").style.display = "none";
        }

        function ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            // document.getElementById("ë¡œë”©í™”ë©´").style.display = "none";
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ë¡œê·¸ì¸í™”ë©´").style.display = "block";
            document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤").innerHTML = "";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
        }

        function ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €) {

            document.getElementById("ë¡œê·¸ì¸í™”ë©´").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "block";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "block";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "block";

            document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "gagl";
            document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").innerText = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "gagl";
            document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = "ê³µê²©ë ¥ " + ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ || "gagl";
            document.getElementById("ìœ ì €ì²´ë ¥").innerText = "ì²´ë ¥ " + ìœ ì €ë°ì´í„°.ì²´ë ¥ + " / 100" || "gagl";
            document.getElementById("í˜„ì¬ì¸µ").innerText = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ + "ì¸µ" || "gagl";

            document.getElementById("ë ˆë²¨").innerText = "ë ˆë²¨ " + (ìœ ì €ë°ì´í„°.ë ˆë²¨ ?? 1);
            document.getElementById("ì´ê²½í—˜ì¹˜").innerText =
                typeof ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ === "number" ? ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜.toLocaleString() : "0";
            document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "0";

            document.getElementById("ì´ê³¨ë“œ").innerText =
                typeof ìœ ì €ë°ì´í„°.ê³¨ë“œ === "number" ? ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString() : "0";
            document.getElementById("íšë“ê³¨ë“œ").innerText = "0";

            document.getElementById("ì´ìˆ™ë ¨ë„").innerText =
                typeof ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ === "number" ? ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„.toLocaleString() : "0";
            document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "0";

            // âœ… ëª¬ìŠ¤í„° ì •ë³´ í‘œì‹œ
            const ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ, ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
            const ì•…ë§ˆì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];

            const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
            document.getElementById("ì•…ë§ˆì´ë¦„").innerText = `${ë¡œë§ˆë²ˆí˜¸}. ${ì•…ë§ˆì´ë¦„}`;

            í˜„ì¬ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ, ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
            í˜„ì¬ì•…ë§ˆì²´ë ¥ = í˜„ì¬ì•…ë§ˆ.ì²´ë ¥;
            í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥ = í˜„ì¬ì•…ë§ˆ.ì²´ë ¥;

            document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${í˜„ì¬ì•…ë§ˆì²´ë ¥} / ${í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥}`;
            document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ì•…ë§ˆ.ë°©ì–´ë ¥}`;

            document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤").innerHTML = "";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            // document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
        }

        function ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "block";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤").innerHTML = "";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            // ğŸ” ë­í‚¹ ì´ˆê¸°í™”
            const ì»¨í…Œì´ë„ˆ = document.getElementById("ì „ë‹¹ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            // ğŸ” Firebaseì—ì„œ ëª¨ë“  ìœ ì € ì¡°íšŒ
            db.ref("users").once("value").then((snapshot) => {
                const ìœ ì €ë¦¬ìŠ¤íŠ¸ = [];


                snapshot.forEach((child) => {
                    const ë°ì´í„° = child.val();
                    if (!ë°ì´í„°.ì•„ì´ë”” || ë°ì´í„°.ì•„ì´ë””.trim() === "") return; // âœ… ë­í‚¹ ì œì™¸

                    ìœ ì €ë¦¬ìŠ¤íŠ¸.push(ë°ì´í„°);
                });

                // ğŸ“Š ì •ë ¬: ì¸µìˆ˜ â†’ ëª¬ìŠ¤í„°ë²ˆí˜¸ ê¸°ì¤€ ë‚´ë¦¼ì°¨ìˆœ
                ìœ ì €ë¦¬ìŠ¤íŠ¸.sort((a, b) => {
                    if (b.í˜„ì¬ì¸µ !== a.í˜„ì¬ì¸µ) {
                        return b.í˜„ì¬ì¸µ - a.í˜„ì¬ì¸µ;
                    }
                    return b.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - a.í˜„ì¬ì•…ë§ˆë²ˆí˜¸;
                });

                // ğŸ† ìƒìœ„ 10ëª…ë§Œ ì¶œë ¥
                ìœ ì €ë¦¬ìŠ¤íŠ¸.slice(0, 10).forEach((ìœ ì €, index) => {
                    const ì¤„ = document.createElement("div");
                    ì¤„.className = "ì–‘ìª½ì •ë ¬ ë°‘ì¤„";
                    // ì¤„.className = "ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬";

                    const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
                    const ì•…ë§ˆì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ìœ ì €.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];

                    document.getElementById("ì•…ë§ˆì´ë¦„").innerText = `${ë¡œë§ˆë²ˆí˜¸}. ${ì•…ë§ˆì´ë¦„}`;



                    // ğŸ‘‘ SVG ì•„ì´ì½˜ ìƒì„±
                    let ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "";
                    if (index === 0) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ê¸ˆ";
                    else if (index === 1) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ì€";
                    else if (index === 2) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ë™";

                    const ì™•ê´€ = index < 3
                        ? `<svg xmlns="http://www.w3.org/2000/svg" class="crown-icon ${ì™•ê´€ìƒ‰í´ë˜ìŠ¤}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
           <path d="M2 5l4.5 4.5L12 3l5.5 6.5L22 5l-1 14H3L2 5z" />
           <path d="M5 20h14" />
         </svg>`
                        : ``;

                    ì¤„.innerHTML = `
        <div class="ê°€ë¡œì •ë ¬">${ì™•ê´€} ${index + 1}</div>
        <div>${ìœ ì €.ì•„ì´ë”” || "ìµëª…"} - ${ìœ ì €.í˜„ì¬ì¸µ}ì¸µ ${ë¡œë§ˆë²ˆí˜¸}. ${ì•…ë§ˆì´ë¦„}</div>
    `;

                    ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);
                });
            });
        }



        function ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "block";
            document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤").innerHTML = "";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
            document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").innerText = "ë³´ìœ  ìˆ™ë ¨ë„ " + ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„;

            const í´ë˜ìŠ¤ë§µ = {
                "ì•ŒíŒŒí¬ë¦¬í‹°ì»¬í™•ë¥ ": "ì•ŒíŒŒ",
                "ë² íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ": "ë² íƒ€",
                "ê°ë§ˆí¬ë¦¬í‹°ì»¬í™•ë¥ ": "ê°ë§ˆ",
                "ë¸íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ": "ë¸íƒ€",
                "ì˜¤ë©”ê°€í¬ë¦¬í‹°ì»¬í™•ë¥ ": "ì˜¤ë©”ê°€"
            };


            const ì»¨í…Œì´ë„ˆ = document.getElementById("ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            // ìŠ¤í‚¬ ì´ˆê¸°í™” (ê¸°ì¡´ ìœ ì €ìš©)
            if (!ìœ ì €ë°ì´í„°.ìŠ¤í‚¬) {
                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ = {};
            }
            for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                if (!(ìŠ¤í‚¬.í‚¤ in ìœ ì €ë°ì´í„°.ìŠ¤í‚¬)) {
                    ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                }
            }

            // ë Œë”ë§
            ìŠ¤í‚¬ëª©ë¡.forEach(ìŠ¤í‚¬ => {
                const ì¡°ê±´ = ìŠ¤í‚¬.ì ê¸ˆí•´ì œì¡°ê±´;
                const ì ê¹€ = ì¡°ê±´ && (ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[ì¡°ê±´.í‚¤] ?? 0) < ì¡°ê±´.ìµœì†Œë ˆë²¨;

                if (ì ê¹€) return; // ì ê¹€ ìŠ¤í‚¬ì€ ì•„ì˜ˆ í‘œì‹œ ì•ˆ í•¨ (ì›í•˜ë©´ íë¦¬ê²Œ ì²˜ë¦¬ë„ ê°€ëŠ¥)

                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤];
                const í™•ë¥  = ë ˆë²¨ * 10;

                const í´ë˜ìŠ¤ëª… = í´ë˜ìŠ¤ë§µ[ìŠ¤í‚¬.í‚¤] ?? "";
                const ì•„ì´ì½˜HTML = `
<svg xmlns="http://www.w3.org/2000/svg" class="target-icon ${í´ë˜ìŠ¤ëª…}" viewBox="0 0 24 24" fill="none" stroke="currentColor">
  <circle cx="12" cy="12" r="10" />
  <circle cx="12" cy="12" r="6" />
  <circle cx="12" cy="12" r="2" />
</svg>`;

                const ë°•ìŠ¤ = document.createElement("div");
                ë°•ìŠ¤.className = "ê¸°ë³¸í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬";

                ë°•ìŠ¤.innerHTML = `
  <div class="ì–‘ìª½ì •ë ¬">
    <div class="ê°€ë¡œì •ë ¬">${ì•„ì´ì½˜HTML}${ìŠ¤í‚¬.ì´ë¦„}</div>
    <div>${ë ˆë²¨} / ${ìŠ¤í‚¬.ìµœëŒ€ë ˆë²¨}</div>
  </div>
  <div class="ì–‘ìª½ì •ë ¬">
    <div style="font-size: 11px; font-weight: lighter;">
      ${ìŠ¤í‚¬.ì„¤ëª…} (${í™•ë¥ }% / ğŸ”§ ${ìŠ¤í‚¬.ìˆ™ë ¨ë„ì†Œëª¨}ìˆ™ë ¨ë„)
    </div>
    <div>
      <button onclick="ìŠ¤í‚¬íˆ¬ì('${ìŠ¤í‚¬.í‚¤}')">+</button>
      <button onclick="ìŠ¤í‚¬íšŒìˆ˜('${ìŠ¤í‚¬.í‚¤}')">-</button>
    </div>
  </div>
`;

                ì»¨í…Œì´ë„ˆ.appendChild(ë°•ìŠ¤);
            });
        }

        function ìŠ¤í‚¬íˆ¬ì(ìŠ¤í‚¬í‚¤) {
            const ìŠ¤í‚¬ = ìŠ¤í‚¬ëª©ë¡.find(s => s.í‚¤ === ìŠ¤í‚¬í‚¤);
            if (!ìŠ¤í‚¬) return alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í‚¬ì…ë‹ˆë‹¤.");

            const ì†Œëª¨ëŸ‰ = ìŠ¤í‚¬.ìˆ™ë ¨ë„ì†Œëª¨ ?? 100;
            const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤];

            if (ë ˆë²¨ >= ìŠ¤í‚¬.ìµœëŒ€ë ˆë²¨) return alert("ìµœëŒ€ ë ˆë²¨ì…ë‹ˆë‹¤.");
            if (ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ < ì†Œëª¨ëŸ‰) return alert(`ìˆ™ë ¨ë„ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (${ì†Œëª¨ëŸ‰} í•„ìš”)`);

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ -= ì†Œëª¨ëŸ‰;
            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] += 1;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        }

        function ìŠ¤í‚¬íšŒìˆ˜(ìŠ¤í‚¬í‚¤) {
            const ìŠ¤í‚¬ = ìŠ¤í‚¬ëª©ë¡.find(s => s.í‚¤ === ìŠ¤í‚¬í‚¤);
            if (!ìŠ¤í‚¬) return alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í‚¬ì…ë‹ˆë‹¤.");

            const íšŒìˆ˜ëŸ‰ = ìŠ¤í‚¬.ìˆ™ë ¨ë„ì†Œëª¨ ?? 100;
            const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤];
            if (ë ˆë²¨ <= 0) return alert("íšŒìˆ˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += íšŒìˆ˜ëŸ‰;
            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] -= 1;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        }

        function ì ìš©ëœí¬ë¦¬í‹°ì»¬ë°°ìœ¨() {
            const í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ë“¤ = [
                { í‚¤: "ì•ŒíŒŒí¬ë¦¬í‹°ì»¬í™•ë¥ ", ì´ë¦„: "ì•ŒíŒŒ í¬ë¦¬í‹°ì»¬", í´ë˜ìŠ¤: "ì•ŒíŒŒ", ë°°ìœ¨: 1.3 },
                { í‚¤: "ë² íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ", ì´ë¦„: "ë² íƒ€ í¬ë¦¬í‹°ì»¬", í´ë˜ìŠ¤: "ë² íƒ€", ë°°ìœ¨: 1.5 },
                { í‚¤: "ê°ë§ˆí¬ë¦¬í‹°ì»¬í™•ë¥ ", ì´ë¦„: "ê°ë§ˆ í¬ë¦¬í‹°ì»¬", í´ë˜ìŠ¤: "ê°ë§ˆ", ë°°ìœ¨: 1.7 },
                { í‚¤: "ë¸íƒ€í¬ë¦¬í‹°ì»¬í™•ë¥ ", ì´ë¦„: "ë¸íƒ€ í¬ë¦¬í‹°ì»¬", í´ë˜ìŠ¤: "ë¸íƒ€", ë°°ìœ¨: 2.0 },
                { í‚¤: "ì˜¤ë©”ê°€í¬ë¦¬í‹°ì»¬í™•ë¥ ", ì´ë¦„: "ì˜¤ë©”ê°€ í¬ë¦¬í‹°ì»¬", í´ë˜ìŠ¤: "ì˜¤ë©”ê°€", ë°°ìœ¨: 2.5 }
            ];

            let ëˆ„ì ë°°ìœ¨ = 1.0;
            let ë°œë™ëœìŠ¤í‚¬ = null;

            for (const ìŠ¤í‚¬ of í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ë“¤) {
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[ìŠ¤í‚¬.í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;
                const ë°œë™ = í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ;

                if (ë°œë™) {
                    ëˆ„ì ë°°ìœ¨ *= ìŠ¤í‚¬.ë°°ìœ¨;
                    ë°œë™ëœìŠ¤í‚¬ = ìŠ¤í‚¬; // ê°€ì¥ ë§ˆì§€ë§‰ì— ë°œë™ëœ = ê°€ì¥ ë†’ì€ ìŠ¤í‚¬
                }
            }

            return {
                ë°°ìœ¨: ëˆ„ì ë°°ìœ¨,
                ìŠ¤í‚¬ì´ë¦„: ë°œë™ëœìŠ¤í‚¬?.ì´ë¦„ ?? null,
                í´ë˜ìŠ¤: ë°œë™ëœìŠ¤í‚¬?.í´ë˜ìŠ¤ ?? null
            };
        }


        document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").addEventListener("click", () => {
            if (!confirm("ëª¨ë“  ìŠ¤í‚¬ í¬ì¸íŠ¸ë¥¼ íšŒìˆ˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

            for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                const í‚¤ = ìŠ¤í‚¬.í‚¤;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤] ?? 0;
                const íšŒìˆ˜ëŸ‰ = ìŠ¤í‚¬.ìˆ™ë ¨ë„ì†Œëª¨ ?? 10;
                ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += íšŒìˆ˜ëŸ‰ * ë ˆë²¨;
                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤] = 0;
            }


            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                alert("ìŠ¤í‚¬ í¬ì¸íŠ¸ê°€ ëª¨ë‘ íšŒìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        });



        function ì•„ì´ë””ì„¤ì •() {
            const ì…ë ¥ì•„ì´ë”” = document.getElementById("ì•„ì´ë””ì…ë ¥").value.trim();
            if (!ì…ë ¥ì•„ì´ë””) return alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            // 1ï¸âƒ£ ì•„ì´ë”” ì¤‘ë³µ ì—¬ë¶€ í™•ì¸
            í™”ë©´ì ê¸ˆ();
            db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ì…ë ¥ì•„ì´ë””).once("value", (snapshot) => {
                if (snapshot.exists()) {
                    í™”ë©´í•´ì œ();
                    return alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                }

                // 2ï¸âƒ£ ì¤‘ë³µ ì•„ë‹ˆë©´ ì €ì¥ ì§„í–‰
                ìœ ì €ë°ì´í„°.ì•„ì´ë”” = ì…ë ¥ì•„ì´ë””;
                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                    í™”ë©´í•´ì œ();
                });
            });
        }

        document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").addEventListener("click", () => {
            const el = document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ");

            // ì´ë¯¸ ì¸í’‹ ìƒíƒœë©´ ì¤‘ë³µ ìƒì„± ë°©ì§€
            if (el.querySelector("input")) return;

            const í˜„ì¬ì•„ì´ë”” = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "";
            const input = document.createElement("input");
            input.type = "text";
            input.value = í˜„ì¬ì•„ì´ë””;
            input.maxLength = 8;
            input.style.width = "120px";
            input.style.fontSize = "inherit";

            // ê¸°ì¡´ í…ìŠ¤íŠ¸ ì œê±°í•˜ê³  input ì‚½ì…
            el.innerHTML = "";
            el.appendChild(input);
            input.focus();

            // ì—”í„°ë¡œ ì €ì¥
            input.addEventListener("keydown", (e) => {
                if (e.key === "Enter") {
                    const ìƒˆì•„ì´ë”” = input.value.trim();
                    if (!ìƒˆì•„ì´ë””) return alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                    í™”ë©´ì ê¸ˆ();
                    ìœ ì €ë°ì´í„°.ì•„ì´ë”” = ìƒˆì•„ì´ë””;
                    db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                        el.innerText = ìƒˆì•„ì´ë””;
                        document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").innerText = ìƒˆì•„ì´ë””;
                        document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìƒˆì•„ì´ë””;
                        í™”ë©´í•´ì œ();
                    });
                }

                // Esc ëˆ„ë¥´ë©´ ì·¨ì†Œ
                if (e.key === "Escape") {
                    el.innerText = í˜„ì¬ì•„ì´ë””;
                }
            });

            // í¬ì»¤ìŠ¤ ë²—ì–´ë‚˜ë„ ì›ë˜ëŒ€ë¡œ (ì„ íƒì‚¬í•­)
            input.addEventListener("blur", () => {
                el.innerText = í˜„ì¬ì•„ì´ë””;
            });
        });


        const ì•…ë§ˆë¦¬ìŠ¤íŠ¸ = [
            "ë°”ì•Œ", "ì•„ê°€ë ˆìŠ¤", "ë°”ë¥´ë°”í† ìŠ¤", "íŒŒì„", "ë§íŒŒìŠ¤", "í‘¸ë¥´ì†", "ë§ˆë¼ë°”ìŠ¤", "ì•„ëª¬", "ë¶€ë„¤", "í¬ë¥´ë„¤ìš°ìŠ¤",
            "ì¹´ì„", "ë¶€ì—ë¥´", "êµ¬ì‹œì˜¨", "ì‹œíŠ¸ë¦¬", "ë² ë ˆíŠ¸", "ë ˆë¦¬ì–´", "ì—˜ë¦¬ê³ ìŠ¤", "ì œíŒŒë¥´", "ë³´íŠ¸ìŠ¤", "ë§ˆë¥´ì½”ì‹œì•„ìŠ¤",
            "ìŠ¤í‹¸", "ë‹¤ì´ëª¬", "í˜ë‹ˆì•…ìŠ¤", "í•˜í”„ë¦¬", "ì‚´ë¡œìŠ¤", "í”„ë£¨í‘¸ìŠ¤", "ì•„ì´ëª¬", "ë‚˜ë² ë¦¬ìš°ìŠ¤", "ê¸€ë¼ì‹œì•„ë¼ë³¼ë¼ìŠ¤", "ë³´ë½ìŠ¤",
            "í¬ë¥´ì¹´ìŠ¤", "ì•„ìŠ¤ëª¨ë°ìš°ìŠ¤", "ê°€í”„", "í‘¸ë¥´ì¹´ìŠ¤", "ë¶€ì•Œ", "í”¼ë‹‰ìŠ¤", "í•˜ìš°ë ˆìŠ¤", "ë§í¬ë¥´ìŠ¤", "ë¼í•˜ë¸Œ", "ì‚¬ë¸Œë‚™",
            "ìƒ¤í¬", "ìƒ¤ë¥´ë‚˜í¬", "ì•Œë¡œì„¸ìŠ¤", "ì¹´ì´ë¯¸", "ë¬´ë£¨ë¬´ë¥´", "ì˜¤ë¡œë²„ìŠ¤", "ì„¸ì´ë¥´", "ë””ì¹´ë¦¬ë¸Œ", "ë²¨ë¦¬ì•Œ", "ë°ì¹´ë¸Œë¦¬ì•„",
            "ì•„ë¯¸", "ì˜¤ì„¸", "ì˜¤ë¡œì´ì•„ìŠ¤", "ë°”í”¼ë©”íŠ¸", "ì•ˆë“œë¡œë§ë¦¬ìš°ìŠ¤", "ì•„ëª¬", "ë°”í‹°ë°”ìŠ¤", "ì•„ë¼íƒ€ë°”", "ë¼ì—ìŠ¤", "ì—ì´ëª¬",
            "ë‹ˆë² ë¡œìŠ¤", "ì•ˆë“œë¼ë©œë¦¬ìš°ìŠ¤", "ìê°„", "ë¡œë…¸ë² ", "ë°œë¼í¬", "ë²„ì•Œë² ë¦¬ìŠ¤", "ì„¸ë ˆìš°ìŠ¤", "ì‹œì—ë¥´", "ë²¨", "ë£¨í˜ìŠ¤",
            "í¬ë¡œì…€", "ë„ë ˆì•Œ", "ì—ë¦¬ê³¤", "ë””ë‚˜ë¥´"
        ];

        function ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(num) {
            const ë¡œë§ˆ = ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV", "I"];
            const ê°’ = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];
            let ê²°ê³¼ = "";
            for (let i = 0; i < ê°’.length; i++) {
                while (num >= ê°’[i]) {
                    ê²°ê³¼ += ë¡œë§ˆ[i];
                    num -= ê°’[i];
                }
            }
            return ê²°ê³¼;
        }


        function í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ì¸µ, ë²ˆí˜¸) {
            const ì•…ë§ˆìˆ˜ = 72;
            const ì²´ë ¥ê¸°ë³¸ = 500;
            const ì²´ë ¥ì¦ê°€ = 200;

            const ë°©ì–´ê¸°ë³¸ = 5;
            const ë°©ì–´ì¦ê°€ = 2;
            const ë°©ì–´ì¦ê°€ì£¼ê¸° = 3;

            const ì¸µë°°ìœ¨ = 1.3;

            let ì¸µì‹œì‘ì²´ë ¥ = ì²´ë ¥ê¸°ë³¸;
            let ì¸µì‹œì‘ë°©ì–´ = ë°©ì–´ê¸°ë³¸;

            for (let i = 1; i < ì¸µ; i++) {
                const ë§ˆì§€ë§‰ì²´ë ¥ = ì¸µì‹œì‘ì²´ë ¥ + (ì•…ë§ˆìˆ˜ - 1) * ì²´ë ¥ì¦ê°€;
                const ë§ˆì§€ë§‰ë°©ì–´ = ì¸µì‹œì‘ë°©ì–´ + Math.floor((ì•…ë§ˆìˆ˜ - 1) / ë°©ì–´ì¦ê°€ì£¼ê¸°) * ë°©ì–´ì¦ê°€;

                ì¸µì‹œì‘ì²´ë ¥ = Math.round(ë§ˆì§€ë§‰ì²´ë ¥ * ì¸µë°°ìœ¨);
                ì¸µì‹œì‘ë°©ì–´ = Math.round(ë§ˆì§€ë§‰ë°©ì–´ * ì¸µë°°ìœ¨);
            }

            const ì²´ë ¥ = Math.round(ì¸µì‹œì‘ì²´ë ¥ + (ë²ˆí˜¸ - 1) * ì²´ë ¥ì¦ê°€);
            const ë°©ì–´ë ¥ = Math.floor(ì¸µì‹œì‘ë°©ì–´ + Math.floor((ë²ˆí˜¸ - 1) / ë°©ì–´ì¦ê°€ì£¼ê¸°) * ë°©ì–´ì¦ê°€);

            return {
                ì¸µ,
                ë²ˆí˜¸,
                ì²´ë ¥,
                ë°©ì–´ë ¥
            };
        }

        document.getElementById("íƒˆí‡´").addEventListener("click", function () {
            if (!uid) return alert("ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");


            if (confirm("ì •ë§ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.")) {
                // ğŸ”¥ í•´ë‹¹ uid ì „ì²´ ë°ì´í„° ì™„ì „ ì‚­ì œ
                í™”ë©´ì ê¸ˆ();
                db.ref("users/" + uid).remove().then(() => {
                    alert("ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë¡œê·¸ì¸ í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤.");
                    location.reload(); // ìƒˆë¡œê³ ì¹¨í•´ì„œ ë‹¤ì‹œ ìµëª… ë¡œê·¸ì¸ë¶€í„°
                    í™”ë©´í•´ì œ();
                });
            }


        });


        function ê³µê²©í•˜ê¸°() {
            // ğŸ’¥ ì´ë¯¸ ì²´ë ¥ì´ 0ì´ë©´ ê³µê²©í•˜ì§€ ì•Šë„ë¡ ì°¨ë‹¨
            if (í˜„ì¬ì•…ë§ˆì²´ë ¥ <= 0) return;

            const ì¸µ = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ;
            const ë²ˆí˜¸ = ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸;
            const ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ì¸µ, ë²ˆí˜¸);  // â— ë§¤ë²ˆ ìƒˆë¡œ ìƒì„± (ë¬¸ì œ ì›ì¸)
            const ì•…ë§ˆì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];

            const ìœ ì €ê³µê²©ë ¥ = ìœ ì €ë°ì´í„°.ê³µê²©ë ¥;
            const ì‹¤ì œë°ë¯¸ì§€ = Math.max(0, ìœ ì €ê³µê²©ë ¥ - ì•…ë§ˆ.ë°©ì–´ë ¥);
            const ëœë¤ë¹„ìœ¨ = Math.random() * 0.2 + 0.8;

            const { ë°°ìœ¨, ìŠ¤í‚¬ì´ë¦„, í´ë˜ìŠ¤ } = ì ìš©ëœí¬ë¦¬í‹°ì»¬ë°°ìœ¨();
            let ìµœì¢…ë°ë¯¸ì§€ = Math.floor(ì‹¤ì œë°ë¯¸ì§€ * ëœë¤ë¹„ìœ¨ * ë°°ìœ¨);

            const ë¡œê·¸ë°•ìŠ¤ = document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤");

            let ë¡œê·¸ë‚´ìš© = "";
            if (ìŠ¤í‚¬ì´ë¦„ && í´ë˜ìŠ¤) {
                const ì•„ì´ì½˜HTML = `
  <svg xmlns="http://www.w3.org/2000/svg" class="target-icon ${í´ë˜ìŠ¤}" viewBox="0 0 24 24" fill="none" stroke="currentColor">
    <circle cx="12" cy="12" r="10" />
    <circle cx="12" cy="12" r="6" />
    <circle cx="12" cy="12" r="2" />
  </svg>`;
                ë¡œê·¸ë‚´ìš© = `${ì•…ë§ˆì´ë¦„}ì—ê²Œ ${ì•„ì´ì½˜HTML}${ìŠ¤í‚¬ì´ë¦„} ë°œë™! ${ìµœì¢…ë°ë¯¸ì§€}ì˜ ë°ë¯¸ì§€`;
            } else {
                ë¡œê·¸ë‚´ìš© = `${ì•…ë§ˆì´ë¦„}ì—ê²Œ ${ìµœì¢…ë°ë¯¸ì§€}ì˜ ë°ë¯¸ì§€`;
            }

            const ì¤„ = document.createElement("div");
            ì¤„.innerHTML = ë¡œê·¸ë‚´ìš©;
            ì¤„.className = "ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ê°€ë¡œì •ë ¬";

            if (ë¡œê·¸ë°•ìŠ¤.style.display !== "block") {
                ë¡œê·¸ë°•ìŠ¤.style.display = "block";
            }
            if (ë¡œê·¸ë°•ìŠ¤.children.length >= 3) {
                ë¡œê·¸ë°•ìŠ¤.removeChild(ë¡œê·¸ë°•ìŠ¤.lastChild);
            }
            ë¡œê·¸ë°•ìŠ¤.insertBefore(ì¤„, ë¡œê·¸ë°•ìŠ¤.firstChild);

            // â— ì²´ë ¥ ì¤„ì´ê¸°
            í˜„ì¬ì•…ë§ˆì²´ë ¥ = Math.max(0, í˜„ì¬ì•…ë§ˆì²´ë ¥ - ìµœì¢…ë°ë¯¸ì§€);
            document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${í˜„ì¬ì•…ë§ˆì²´ë ¥} / ${í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥}`;

            // ğŸ’” ìœ ì € ì²´ë ¥ 1 ê°ì†Œ
            ìœ ì €ë°ì´í„°.ì²´ë ¥ = Math.max(0, ìœ ì €ë°ì´í„°.ì²´ë ¥ - 1);
            const ì²´ë ¥UI = document.getElementById("ìœ ì €ì²´ë ¥");
            if (ì²´ë ¥UI) {
                ì²´ë ¥UI.innerText = `ì²´ë ¥ ${ìœ ì €ë°ì´í„°.ì²´ë ¥} / 100`;
            }

            // ğŸ’€ ìœ ì € ì‚¬ë§ ì²˜ë¦¬
            if (ìœ ì €ë°ì´í„°.ì²´ë ¥ <= 0) {
                ìœ ì €ë°ì´í„°.ì²´ë ¥ = 100;

                let ì´ì „ë²ˆí˜¸ = ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1;
                let ì´ì „ì¸µ = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ;

                if (ì´ì „ë²ˆí˜¸ < 1) {
                    ì´ì „ì¸µ -= 1;
                    ì´ì „ë²ˆí˜¸ = 72;
                    if (ì´ì „ì¸µ < 1) ì´ì „ì¸µ = 1;
                }

                ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ = ì´ì „ì¸µ;
                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = ì´ì „ë²ˆí˜¸;

                í™”ë©´ì ê¸ˆ();
                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤").innerHTML = "";
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                    ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°("ğŸ’€ ì²´ë ¥ì´ ëª¨ë‘ ì†Œì§„ë˜ì–´ í›„í‡´í•©ë‹ˆë‹¤!");
                    í™”ë©´í•´ì œ();
                });
                return;
            }

            // âœ… ëª¬ìŠ¤í„° ì²˜ì¹˜
            if (í˜„ì¬ì•…ë§ˆì²´ë ¥ <= 0) {
                const ë³´ìƒ = ë³´ìƒíšë“(ì¸µ);
                const ì´ì „ë ˆë²¨ = ìœ ì €ë°ì´í„°.ë ˆë²¨;

                ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ += ë³´ìƒ.ê²½í—˜ì¹˜;
                ìœ ì €ë°ì´í„°.ê³¨ë“œ += ë³´ìƒ.ê³¨ë“œ;
                ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += ë³´ìƒ.ìˆ™ë ¨ë„;

                const ìƒˆë ˆë²¨ = Math.floor(ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ / 100) + 1;
                document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

                if (ìƒˆë ˆë²¨ > ì´ì „ë ˆë²¨) {
                    const ì¦ê°€ëŸ‰ = ìƒˆë ˆë²¨ - ì´ì „ë ˆë²¨;
                    ìœ ì €ë°ì´í„°.ë ˆë²¨ = ìƒˆë ˆë²¨;
                    ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ì¦ê°€ëŸ‰ * 10;
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "ë ˆë²¨ì—…!";
                }

                // ë‹¤ìŒ ëª¬ìŠ¤í„°ë¡œ ì´ë™
                let ë‹¤ìŒë²ˆí˜¸ = ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ + 1;
                let ë‹¤ìŒì¸µ = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ;
                if (ë‹¤ìŒë²ˆí˜¸ > 72) {
                    ë‹¤ìŒë²ˆí˜¸ = 1;
                    ë‹¤ìŒì¸µ += 1;
                }
                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = ë‹¤ìŒë²ˆí˜¸;
                ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ = ë‹¤ìŒì¸µ;

                í™”ë©´ì ê¸ˆ();
                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    document.getElementById("ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤").innerHTML = "";
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                    document.getElementById("íšë“ë¡œê·¸").innerText =
                        `${ë³´ìƒ.ê²½í—˜ì¹˜} EXP, ${ë³´ìƒ.ê³¨ë“œ} Gold, ${ë³´ìƒ.ìˆ™ë ¨ë„} ìˆ™ë ¨ë„ íšë“`;

                    document.getElementById("ë ˆë²¨").innerText = `ë ˆë²¨ ${ìœ ì €ë°ì´í„°.ë ˆë²¨}`;
                    document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = `ê³µê²©ë ¥ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥}`;

                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "+" + ë³´ìƒ.ê²½í—˜ì¹˜.toLocaleString();
                    document.getElementById("íšë“ê³¨ë“œ").innerText = "+" + ë³´ìƒ.ê³¨ë“œ.toLocaleString();
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "+" + ë³´ìƒ.ìˆ™ë ¨ë„.toLocaleString();

                    document.getElementById("ì´ê²½í—˜ì¹˜").innerText = ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜.toLocaleString();
                    document.getElementById("ì´ê³¨ë“œ").innerText = ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString();
                    document.getElementById("ì´ìˆ™ë ¨ë„").innerText = ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„.toLocaleString();

                    const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1);
                    ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°(`${ë¡œë§ˆë²ˆí˜¸}. ${ì•…ë§ˆì´ë¦„}ì„ ì²˜ì¹˜í–ˆìŠµë‹ˆë‹¤!`);
                    í™”ë©´í•´ì œ();
                });
            }
        }

        function ë³´ìƒíšë“(ì¸µ) {
            const ê²½í—˜ì¹˜ = Math.floor(Math.random() * 10) + ì¸µ * 10; // 1ì¸µ: 10~19
            const ê³¨ë“œ = Math.floor(Math.random() * 100) + ì¸µ * 100;      // 100~199
            const ìˆ™ë ¨ë„ = ì¸µ;                                       // ì¸µìˆ˜ = ìˆ™ë ¨ë„


            return { ê²½í—˜ì¹˜, ê³¨ë“œ, ìˆ™ë ¨ë„ };
        }


        window.addEventListener("DOMContentLoaded", function () {
            document.getElementById("ê³µê²©ë²„íŠ¼").addEventListener("click", ê³µê²©í•˜ê¸°);
        });


        function ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°(text) {
            const box = document.getElementById("ì£½ìŒë©”ì‹œì§€");
            box.style.display = "block";
            box.style.opacity = "1"; // ì¬ë“±ì¥ ëŒ€ë¹„
            box.innerText = text;

            // ì• ë‹ˆë©”ì´ì…˜ ë‹¤ì‹œ ì ìš© (ë¦¬ì…‹)
            box.style.animation = "none";
            void box.offsetWidth; // reflow
            box.style.animation = "fadeOut 2s ease-in-out forwards";
        }

        function ìë™ì‚¬ëƒ¥í† ê¸€() {
            const ë²„íŠ¼ = document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼");

            if (!ìë™ì‚¬ëƒ¥ì¤‘) {
                ìë™ì‚¬ëƒ¥ì¤‘ = true;
                ë²„íŠ¼.innerText = "ğŸ›‘ ìë™ì¤‘ì§€";
                ë²„íŠ¼.style.color = "red";

                ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = setInterval(() => {
                    ê³µê²©í•˜ê¸°(); // ğŸ‘‰ ì—¬ê¸´ ì´ë¯¸ ë¸”ë¡œì»¤ ì²´í¬ê°€ ìˆìœ¼ë‹ˆ OK
                }, 100); // ê°„ê²©ì€ ì›í•˜ë©´ 300~500msë¡œ ë³€ê²½ ê°€ëŠ¥
            } else {
                ìë™ì‚¬ëƒ¥ì¤‘ = false;
                clearInterval(ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸);
                ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

                ë²„íŠ¼.innerText = "â± ìë™ì‚¬ëƒ¥";
                ë²„íŠ¼.style.color = "white";
            }
        }

        document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼").addEventListener("click", ìë™ì‚¬ëƒ¥í† ê¸€);

        document.getElementById("ì „ë‹¹").addEventListener("click", () => {
            ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        document.getElementById("ìŠ¤í‚¬").addEventListener("click", () => {
            ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        document.getElementById("ì „íˆ¬").addEventListener("click", () => {
            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
        });

        document.addEventListener("click", (e) => {
            // ìë™ì‚¬ëƒ¥ ì¤‘ì¼ ë•Œë§Œ ë©ˆì¶¤
            if (ìë™ì‚¬ëƒ¥ì¤‘ && !e.target.closest("#ìë™ì‚¬ëƒ¥ë²„íŠ¼")) {
                ìë™ì‚¬ëƒ¥ì¤‘ = false;
                clearInterval(ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸);
                ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

                const ë²„íŠ¼ = document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼");
                ë²„íŠ¼.innerText = "â± ìë™ì‚¬ëƒ¥";
                ë²„íŠ¼.style.color = "white";
            }
        });










        // ìŠ¤í¬ë¦½íŠ¸ì¶”ê°€





    </script>







</body>

</html>