<!DOCTYPE html>
<html lang="ko">

<head>

    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-database-compat.js"></script>


    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <title>gagl</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: black;
            margin: 0;
            padding: 0;
            color: white;
            display: flex;
            /* justify-content: center; */
            align-items: center;
            flex-direction: column;
            height: 100vh;
            font-size: 14px;
            /* position: fixed; */
            /* í™”ë©´ê³ ì •ë°°ì¹˜ ìŠ¤í¬ë¡¤í•´ë„ ì•ˆì›€ì§ì„ */
            /* justify-content: space-between; */
            /* ì–‘ìª½ì •ë ¬ */
            font-weight: 500;
        }

        .ë°‘ì¤„ {
            border-bottom: 0.2px solid #2e2e2e;
            /* position: fixed; */
            /* top: 0; */
            width: 100%;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ê°€ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .ì„¸ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì–‘ìª½ì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 10px;
        }

        .ì‚¬ë°±í”½ì…€ {
            width: 400px;
        }

        .ë²„íŠ¼ {
            border-radius: 5px;
            padding: 5px;
        }

        .ë²„íŠ¼:hover {
            background-color: #333;
            cursor: pointer;
        }

        .ì»¤ì„œí˜¸ë²„:hover {
            cursor: pointer;
        }

        .ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 400px;
            border: 0.2px solid #2e2e2e;
            border-radius: 10px;
            padding: 15px;
        }

        .ê¸°ë³¸í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 100%;
            box-sizing: border-box;
            border: 0.2px solid #2e2e2e;
            border-radius: 10px;
            padding: 15px;
        }

        .ì¥ë¹„-ì¼ë°˜ {
            border: 1px solid #ffffff;
        }

        .ì¥ë¹„-ë ˆì–´ {
            border: 1px solid #2665c9;
        }

        .ì¥ë¹„-ì‹ í™” {
            border: 1px solid #c59b20;
        }

        .ì¥ë¹„-ê³ ëŒ€ {
            border: 1px solid #c825cd;
        }

        .ì¥ë¹„-íƒœì´ˆ {
            border: 1px solid #cd2525;
        }

        .ì¥ë¹„-ê³µí—ˆ {
            border: 1px solid #2acd25;
        }

        .ìœ ì €ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            width: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì—ë„ˆì§€ë°” {
            background-color: #eab308;
            height: 5px;
            border-radius: 10px;
            width: 100%;
        }

        .ìœ ì €í…Œë‘ë¦¬ {
            border: 0.2px solid #2614c7;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */
        }

        .ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            border: 0.2px solid #c71414;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */

        }

        .ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ {
            background-color: #121212;
            height: 85px;
            border-radius: 10px;
            width: 100px;
            padding: 15px;
        }

        .ë ˆë²¨ {
            color: #00c851;
        }

        .ì´ê²½í—˜ì¹˜ {
            color: #ffffff;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê²½í—˜ì¹˜ {
            color: #7a7a7a;
            font-size: 10px;
            font-weight: lighter;
        }

        .ê³¨ë“œ {
            color: #b0b0b0;
        }

        .ì´ê³¨ë“œ {
            color: #f5c400;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê³¨ë“œ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ìˆ™ë ¨ë„ {
            color: #b0b0b0;
        }

        .ì´ìˆ™ë ¨ë„ {
            color: #3b82f6;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ìˆ™ë ¨ë„ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ì½˜ì†”ë¡œê·¸ì°½ {
            color: #ffffff;
            border-radius: 10px;
            position: fixed;
            left: 0;
            bottom: 0;
            font-weight: bold;
        }

        .ë¡œë”©ì»¨í…Œì´ë„ˆ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: sans-serif;
            font-size: 16px;
        }

        .ë¡œë”©ìŠ¤í”¼ë„ˆ {
            width: 50px;
            height: 50px;
            border: 6px solid #ccc;
            border-top-color: #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* 
        #ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤ {
            max-height: 220px;
            overflow-y: hidden;
        } */

        #ì£½ìŒë©”ì‹œì§€ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 400px;
            position: fixed;
            top: 33%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: #b0b0b0;
            padding: 15px;
            border: 3px solid #2e2e2e;
            border-radius: 12px;
            /* font-size: 20px; */
            /* font-weight: bold; */
            z-index: 9999;
            box-shadow: 0 0 20px #2e2e2e;
            animation: fadeOut 2s ease-in-out forwards;
            user-select: none;
            pointer-events: none;
        }

        /* ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ê²Œ í•˜ëŠ” í˜ì´ë“œ ì•„ì›ƒ */
        @keyframes fadeOut {
            0% {
                opacity: 1;
            }

            70% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                display: none;
            }
        }



        #ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸ {
            font-size: 16px;
            margin-top: 10px;
        }

        #íšë“ë¡œê·¸ {
            color: #00c851;
        }

        #ë ˆë²¨ì—…í‘œì‹œ {
            color: #00c851;
        }

        #ì¸µì¡°ì ˆ {
            background: linear-gradient(135deg, #330000, #660000, #990000);
            border: 2px solid #ff3300;
            box-shadow: 0 0 12px #ff0000, 0 0 24px #440000 inset;
            animation: ë§ˆê³„ë¶ˆê¸¸ 4s ease-in-out infinite;
            gap: 30px;
            position: relative;
        }

        @keyframes ë§ˆê³„ë¶ˆê¸¸ {

            0%,
            100% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.3);
            }
        }

        .crown-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        .ê¸ˆ {
            stroke: gold;
        }

        .ì€ {
            stroke: silver;
        }

        .ë™ {
            stroke: #cd7f32;
        }

        #ë³´ìœ ìˆ™ë ¨ë„:hover {
            cursor: pointer;
            text-decoration: underline;
            color: #3b82f6;
        }

        .target-icon {
            width: 16px;
            height: 16px;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            margin-right: 4px;
        }

        .ë‚´ì•„ì´ë””ê°•ì¡° {
            background-color: #505050;
            /* font-weight: bold;
            border-radius: 6px; */
        }

        .ìƒ‰ìƒì‹¤í—˜ {
            background-color: #8b5cf6;
            background-color: #3bf0f6;
            background-color: #5cf669;
            background-color: #f6ec5c;
        }

        #ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤ {
            position: relative;
            /* âœ… ì¶”ê°€ */
        }

        #ì „íˆ¬í™”ë©´ {
            position: relative;
        }

        .ìë™ì‚¬ëƒ¥ {
            border-radius: 5px;
            padding: 5px;
            background-color: #fafafa;
            color: black;
        }

        @keyframes ì•…ë§ˆê°•ë¦¼íš¨ê³¼ {
            0% {
                box-shadow: 0 0 10px 5px red, inset 0 0 10px red;
                filter: brightness(1.5) blur(0px);
            }

            50% {
                box-shadow: 0 0 20px 10px darkred, inset 0 0 20px darkred;
                filter: brightness(2) blur(1px);
                transform: scale(1.02) rotate(1deg);
            }

            100% {
                box-shadow: 0 0 10px 5px red, inset 0 0 10px red;
                filter: brightness(1.2) blur(0px);
                transform: scale(1) rotate(0deg);
            }
        }

        * {
            user-select: none;
        }

        @keyframes ê¹œë¹¡ì„ {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* cssì¶”ê°€ */
    </style>
</head>

<body>
    <div style="position: fixed; top: 6px; left: 10px; display: flex; align-items: center; z-index: 9999;">
        <div id="ë²„ì „í‘œì‹œ" style="color: #bebebe; font-size: 20px; opacity: 0.8; cursor: pointer;">
        </div>
        <span id="ë©”ë‰´ì–¼íŒíŠ¸" style="margin-left: 8px; color: #bebebe; font-size: 14px; animation: ê¹œë¹¡ì„ 1.2s infinite;">
            &lt;&lt; í´ë¦­ ì‹œ ë©”ë‰´ì–¼ ì˜¤í”ˆ
        </span>
    </div>

    <div class="ë°‘ì¤„" id="ìƒë‹¨ë°”">
        <div class="ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€">
            <div class="ì»¤ì„œí˜¸ë²„" id="íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ">
                gagl
            </div>
            <div id="ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼" style="display: none;">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ë²„íŠ¼" id="ì „íˆ¬">
                        ì „íˆ¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì¥ë¹„">
                        ì¥ë¹„
                    </div>
                    <div class="ë²„íŠ¼" id="ìŠ¤í‚¬">
                        ìŠ¤í‚¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì „ë‹¹">
                        ì „ë‹¹
                    </div>
                    <div class="ë²„íŠ¼" id="íƒˆí‡´">
                        íƒˆí‡´
                    </div>
                    <div class="ë²„íŠ¼" id="ë¡œê·¸ì•„ì›ƒ">
                        ë¡œê·¸ì•„ì›ƒ
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì—ë„ˆì§€ë°•ìŠ¤" style="display: none;">
        <div class="ì–‘ìª½ì •ë ¬">
            <div style="color: #eab308;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-zap-icon lucide-zap">
                    <path
                        d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" />
                </svg>
            </div>
            <div>
                â™¾ï¸
            </div>
        </div>
        <div class="ì—ë„ˆì§€ë°”">

        </div>
    </div>



    <div id="ë¡œê·¸ì¸í™”ë©´">
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ë¡œê·¸ì¸ì°½">
            <input type="text" placeholder="ì•„ì´ë”” (ìµœëŒ€ 8ì)" id="ì´ë©”ì¼ì…ë ¥" autocomplete="off" maxlength="8">
            <input type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ (ìµœì†Œ 6ì)" id="ë¹„ë²ˆì…ë ¥" autocomplete="off">
            <div class="ê°€ë¡œì •ë ¬">
                <div class="ë²„íŠ¼" onclick="íšŒì›ê°€ì…()">íšŒì›ê°€ì…</div>
                <div class="ë²„íŠ¼" onclick="ë¡œê·¸ì¸()">ë¡œê·¸ì¸</div>
            </div>
            <div style="font-size: 12px; color: #888;">
                ì£¼ì˜. ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ëŠ” ë°˜ë“œì‹œ ê¸°ì–µí•´ì£¼ì„¸ìš”
            </div>
        </div>
    </div>



    <div id="ì „íˆ¬í™”ë©´" style="display: none;">
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ê°€ë¡œì •ë ¬" id="ì¸µì¡°ì ˆ">
            <div id="ì•„ë˜ì¸µìœ¼ë¡œ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-down-dash-icon lucide-arrow-big-down-dash">
                    <path d="M15 5H9" />
                    <path d="M15 9v3h4l-7 7-7-7h4V9z" />
                </svg>
            </div>
            <div id="í˜„ì¬ì¸µ">
                1ì¸µ

            </div>
            <div id="ìœ„ì¸µìœ¼ë¡œ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-up-dash-icon lucide-arrow-big-up-dash">
                    <path d="M9 19h6" />
                    <path d="M9 15v-3H5l7-7 7 7h-4v3H9z" />
                </svg>
            </div>

        </div>

        <div id="ì‚¬ëƒ¥ê²°ê³¼">
            <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ë“±ê¸‰ì™¸í…Œë‘ë¦¬">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ë ˆë²¨" id="ë ˆë²¨">
                            ë ˆë²¨ 129
                        </div>
                        <div class="ì´ê²½í—˜ì¹˜" id="ì´ê²½í—˜ì¹˜">
                            12,932
                        </div>
                        <div class="íšë“ê²½í—˜ì¹˜" id="íšë“ê²½í—˜ì¹˜">
                            45
                        </div>
                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬" id="ê³¨ë“œí…Œë‘ë¦¬ì•ˆí‘œì‹œ">
                        <div class="ê³¨ë“œ" id="ê³¨ë“œ">
                            ê³¨ë“œ
                        </div>
                        <div class="ì´ê³¨ë“œ" id="ì´ê³¨ë“œ">
                            999,999
                        </div>
                        <div class="íšë“ê³¨ë“œ" id="íšë“ê³¨ë“œ">
                            999
                        </div>

                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬" id="ìˆ™ë ¨ë„í…Œë‘ë¦¬ì•ˆí‘œì‹œ">
                        <div class="ìˆ™ë ¨ë„" id="ìˆ™ë ¨ë„">
                            ìˆ™ë ¨ë„
                        </div>
                        <div class="ì´ìˆ™ë ¨ë„" id="ì´ìˆ™ë ¨ë„">
                            999,999
                        </div>
                        <div class="íšë“ìˆ™ë ¨ë„" id="íšë“ìˆ™ë ¨ë„">
                            999
                        </div>

                    </div>
                </div>

                <div class="ì„¸ë¡œì •ë ¬" id="ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤">
                    <div>
                        <div class="ë²„íŠ¼" id="ê³µê²©ë²„íŠ¼">âš”ï¸ ê³µê²©í•˜ê¸°</div>
                    </div>
                    <div class="ë²„íŠ¼" id="ìë™ì‚¬ëƒ¥ë²„íŠ¼">â± ìë™ì‚¬ëƒ¥</div>
                </div>


                <div class="ê°€ë¡œì •ë ¬" id="ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸">
                </div>
                <div class="ê°€ë¡œì •ë ¬" id="íšë“ë¡œê·¸">
                </div>

                <div class="ê°€ë¡œì •ë ¬" id="ë ˆë²¨ì—…í‘œì‹œ">

                </div>
            </div>
        </div>




        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ìœ ì €í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬" id="ìœ ì €í…Œë‘ë¦¬ì•ˆí‘œì‹œ">
            <div id="ìœ ì €ì•„ì´ë””">
                ì˜ì
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ìœ ì €ê³µê²©ë ¥">
                    ê³µê²©ë ¥ 100
                </div>
                <div id="ìœ ì €ì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
            </div>

        </div>
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ëª¬ìŠ¤í„°í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬" id="ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ">
            <div id="ì•…ë§ˆì´ë¦„">
                ëª¬ìŠ¤í„°
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ì•…ë§ˆì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
                <div id="ì•…ë§ˆë°©ì–´ë ¥">
                    ë°©ì–´ë ¥ 10
                </div>
            </div>
        </div>


    </div>

    <div id="ì „ë‹¹í™”ë©´" style="display: none;">
        <div id="ì „ë‹¹ì»¨í…Œì´ë„ˆ" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
        </div>
    </div>

    <div class="ì½˜ì†”ë¡œê·¸ì°½" id="ì½˜ì†”ë¡œê·¸ì°½">

    </div>

    <div id="ì£½ìŒë©”ì‹œì§€" style="display: none;"></div>

    <div id="ë¸”ë¡œì»¤" style="
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 9999;
  display: none;
  cursor: wait;
"></div>

    <div id="ì¥ë¹„í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„ ì–‘ìª½ì •ë ¬">
            <div>ê°•ë¦¼ì¹´ìš´íŠ¸</div>
            <div class="ê°€ë¡œì •ë ¬">
                <div id="ì¥ë¹„ëª©ë¡"></div>
                <!-- <div class="ë²„íŠ¼" onclick="ì¥ë¹„ìë™í•©ì„±()">ìë™í•©ì„±</div> -->
            </div>
        </div>

        <div id="ì¥ë¹„ê³¨ë“œí‘œì‹œ" style="color: #f5c400;">0 Gold</div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì¥ë¹„ì»¨í…Œì´ë„ˆ">
        </div>
    </div>

    <div id="ìŠ¤í‚¬í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„" id="ë³´ìœ ìˆ™ë ¨ë„">

        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬" id="ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ">
        </div>
    </div>

    <div id="ë¯¸ë‹ˆì¥ë¹„ì°½" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬" style="
    position: fixed;
    top: 57px;
    left: 300px;
    z-index: 9999;
    background: black;
    color: white;
    display: none;
    max-height: 600px;
    overflow-y: auto;
  "></div>


    <!-- ë“œëë¡œê·¸ë°•ìŠ¤ -->
    <div id="ë“œëë¡œê·¸ë°•ìŠ¤" class="ê¸°ë³¸í…Œë‘ë¦¬" style="
  position: fixed;
  bottom: 20px;
  left: 20px; /* â† ë³€ê²½ë¨ */
  width: 300px;
  max-height: 800px;
  overflow-y: auto;
  font-size: 13px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: rgba(0, 0, 0, 0.8);
  z-index: 9999;
"></div>

    <!-- âœ… ì±„íŒ…ë¡œê·¸ë°•ìŠ¤ (ì±„íŒ… ëª©ë¡ í‘œì‹œìš©) -->
    <div id="ì±„íŒ…ë¡œê·¸ë°•ìŠ¤" class="ê¸°ë³¸í…Œë‘ë¦¬" style="
  position: fixed;
  bottom: 60px;
  right: 20px;
  width: 300px;
  max-height: 800px;
  overflow-y: auto;
  font-size: 13px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: rgba(0, 0, 0, 0.8);
  z-index: 9999;
"></div>

    <!-- ì±„íŒ… ì…ë ¥ì°½: ë³„ë„ ë¶„ë¦¬í•´ì„œ ê³ ì • -->
    <input id="ì±„íŒ…ì…ë ¥" type="text" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”" style="
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 300px;
    padding: 6px;
    background: black;
    color: white;
    box-sizing: border-box; 
    border-radius: 6px;
    border: 1px solid white;
    z-index: 9999;
  " onkeydown="if(event.key==='Enter') ì±„íŒ…ë³´ë‚´ê¸°()">

    <!-- ê°ì²´ì¶”ê°€ -->


    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyATQ8ecSPS6StHUEv_-b-bw59qtjXoUzHc",
            authDomain: "gagl-eb32b.firebaseapp.com",
            projectId: "gagl-eb32b",
            storageBucket: "gagl-eb32b.firebasestorage.app",
            messagingSenderId: "689475246615",
            appId: "1:689475246615:web:9b5c0d7650e9580e34da52",
            measurementId: "G-2G82FVDY46",
            databaseURL: "https://gagl-eb32b-default-rtdb.firebaseio.com"  // ì´ ì¤„ ì¶”ê°€
        };



        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();
        const ê¸°ì¤€ì‹œê° = new Date("2025-04-15T12:25:00+09:00").getTime();
        // ë²„ì „ì—…
        document.getElementById("ë²„ì „í‘œì‹œ").innerText = "v1.1.7";

        function ì±„íŒ…ë³´ë‚´ê¸°() {
            const ì…ë ¥ = document.getElementById("ì±„íŒ…ì…ë ¥");
            const í…ìŠ¤íŠ¸ = ì…ë ¥.value.trim();
            if (!í…ìŠ¤íŠ¸) return;

            const ë©”ì‹œì§€ = {
                ì•„ì´ë””: ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "ìµëª…",
                ë‚´ìš©: í…ìŠ¤íŠ¸,
                ì‹œê°: Date.now()
            };

            db.ref("ì±„íŒ…").push(ë©”ì‹œì§€);
            ì…ë ¥.value = "";
        }

        let uid = "";
        let ìœ ì €ë°ì´í„° = {};
        let í˜„ì¬ì•…ë§ˆ = null;

        let í˜„ì¬ì•…ë§ˆì²´ë ¥ = 0;
        let í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥ = 0;
        let ìë™ì‚¬ëƒ¥ì¤‘ = false;
        let ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

        let í˜„ì¬ëª¬ìŠ¤í„°ì´ë¦„ = "";
        let í˜„ì¬ëª¬ìŠ¤í„°ë“±ê¸‰ = "ì¼ë°˜";

        const ë ˆì–´ëª¬ìŠ¤í„° = [
            "IV. ë””ì•„ë¸”ë¡œ",
        ];
        const ì‹ í™”ëª¬ìŠ¤í„° = [
            "LXXXIX. ë ˆë¹„ì•„íƒ„",
            // "DCCLXXVII. ë²¨ì œë¶‘",
        ];
        const ê³ ëŒ€ëª¬ìŠ¤í„° = [
            "DCCLXXVII. ë²¨ì œë¶€ë¸Œ"
        ];
        const íƒœì´ˆëª¬ìŠ¤í„° = [
            "Î©. ì‚¬íƒ„"
        ];
        const ê³µí—ˆëª¬ìŠ¤í„° = [
            "Î. ë°”ë¡ "
        ];

        // ìƒ‰ì°¾ê¸°
        const ìƒ‰ìƒë§µ = {
            "ì¼ë°˜": "#ffffff",
            "ë ˆì–´": "#00ff00",
            "ì‹ í™”": "#0000ff",
            "ê³ ëŒ€": "#ffff00",
            "íƒœì´ˆ": "#800080",
            "ê³µí—ˆ": "#ff0000",

            "ë¹¨": "#ff0000",
            "ì£¼": "#ff8000",
            "ë…¸": "#ffff00",
            "ì´ˆ": "#00ff00",
            "íŒŒ": "#0080ff",
            "ë‚¨": "#8a2be2",
            "ë³´": "#800080",

            "ë¹¨ì£¼": "#ff4000",
            "ì£¼ë…¸": "#ffbf00",
            "ë…¸ì´ˆ": "#80ff00",
            "ì´ˆíŒŒ": "#00ff80",
            "íŒŒë‚¨": "#4455d0",
            "ë‚¨ë³´": "#851bb1"
        };

        const ë¬´ì§€ê°œìƒ‰ìƒ = [
            "#ff0000", // ë¹¨ê°•
            "#ff4000", // ì£¼í™©ë¹¨ê°•
            "#ff8000", // ì£¼í™©
            "#ffbf00", // í™©ì£¼í™©
            "#ffff00", // ë…¸ë‘
            "#bfff00", // ì—°ë‘ë…¸ë‘
            "#80ff00", // ì—°ë‘
            "#40ff00", // ì—°ë‘ì´ˆë¡
            "#00ff00", // ì´ˆë¡
            "#00ff80", // ì´ˆë¡ì²­ë¡
            "#00ffff", // ì²­ë¡
            "#0080ff", // íŒŒë‘
            "#8000ff", // ë³´ë¼
            "#bf00ff"  // ìí™ë³´ë¼
        ];


        function ì¼ë°˜ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë§ˆê³„ì˜ ì°½`;
        }

        function ë ˆì–´ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë””ì•„ë¸”ë¡œì˜ ì‹¬ì¥`;
        }

        function ì‹ í™”ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë ˆë¹„ì•„íƒ„ì˜ ë¹„ëŠ˜`;
        }

        function ê³ ëŒ€ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë²¨ì œë¶€ë¸Œì˜ ê¼¬ë¦¬`;
        }

        function íƒœì´ˆë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ì‚¬íƒ„ì˜ ë‚ ê°œ`;
        }

        function ê³µí—ˆë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë°”ë¡ ì˜ ì´‰ìˆ˜`;
        }



        const ì¥ë¹„ë“œëí™•ë¥  = {
            ì¼ë°˜: 0.0008,
            ë ˆì–´: 1,    // 100%
            ì‹ í™”: 1,    // 100%
            ê³ ëŒ€: 1,     // 100%
            íƒœì´ˆ: 1,
            ê³µí—ˆ: 1   // 100%
        };

        // const ì¥ë¹„ë“œëí™•ë¥  = {
        //     ì¼ë°˜: 1,
        //     ë ˆì–´: 1,    // 100%
        //     ì‹ í™”: 1,    // 100%
        //     ê³ ëŒ€: 1,     // 100%
        //     íƒœì´ˆ: 1,
        //     ê³µí—ˆ: 1   // 100%
        // };

        function íšŒì›ê°€ì…() {
            const ì•„ì´ë”” = document.getElementById("ì´ë©”ì¼ì…ë ¥").value.trim();
            const ë¹„ë²ˆ = document.getElementById("ë¹„ë²ˆì…ë ¥").value.trim();
            if (!ì•„ì´ë”” || !ë¹„ë²ˆ) return alert("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
            if (ë¹„ë²ˆ.length < 6) return alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤");

            const ì´ë©”ì¼í˜•ì‹ = `${ì•„ì´ë””}@gagl.com`;
            const íƒˆí‡´í‚¤ = ì´ë©”ì¼í˜•ì‹.replace(/\./g, "_");

            db.ref("íƒˆí‡´ì´ë©”ì¼/" + íƒˆí‡´í‚¤).once("value").then((snapshot) => {
                if (snapshot.exists()) {
                    alert("ì´ ì•„ì´ë””ëŠ” íƒˆí‡´ë˜ì–´ ë‹¤ì‹œ ê°€ì…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    return;
                }

                auth.createUserWithEmailAndPassword(ì´ë©”ì¼í˜•ì‹, ë¹„ë²ˆ)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        const uid = user.uid;

                        const ì„¸ì…˜í† í° = crypto.randomUUID();
                        localStorage.setItem("ì„¸ì…˜í† í°", ì„¸ì…˜í† í°);

                        const ìœ ì €ë°ì´í„° = {
                            ì•„ì´ë””,
                            ìƒì„±ì‹œê°: new Date().toISOString(),
                            ë ˆë²¨: 1,
                            ê³µê²©ë ¥: 10,
                            ë‚¨ì€ì²´ë ¥: 10,
                            ìµœëŒ€ì²´ë ¥: 10,
                            ê²½í—˜ì¹˜: 0,
                            ê³¨ë“œ: 400000,
                            ìˆ™ë ¨ë„: 0,
                            í˜„ì¬ì¸µ: 1,
                            í˜„ì¬ì•…ë§ˆë²ˆí˜¸: 1,
                            ìŠ¤í‚¬: {},
                            ì¡°ìš°ê¸°ë¡: { ë ˆì–´: 0, ì‹ í™”: 0, ê³ ëŒ€: 0, íƒœì´ˆ: 0, ê³µí—ˆ: 0 },
                            í•©ì„±ê¸°ë¡: {},
                            ì¥ë¹„ëª©ë¡: [],
                            ê°•ë¦¼ëª¬ìŠ¤í„°: null
                        };

                        // âœ… ìœ ì €ë°ì´í„° ë¨¼ì € ì €ì¥
                        db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                            // âœ… ê·¸ í›„ ì„¸ì…˜í† í° ë”°ë¡œ ë®ì–´ì“°ê¸°
                            db.ref("users/" + uid).update({ ì„¸ì…˜í† í° });
                            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                            í™”ë©´í•´ì œ();
                        });
                    })
            });
        }


        function ë¡œê·¸ì¸() {
            const ì•„ì´ë”” = document.getElementById("ì´ë©”ì¼ì…ë ¥").value.trim();
            const ë¹„ë²ˆ = document.getElementById("ë¹„ë²ˆì…ë ¥").value.trim();
            if (!ì•„ì´ë”” || !ë¹„ë²ˆ) return alert("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");

            const ì´ë©”ì¼í˜•ì‹ = `${ì•„ì´ë””}@gagl.com`;
            const íƒˆí‡´í‚¤ = ì´ë©”ì¼í˜•ì‹.replace(/\./g, "_");

            // âœ… ë¡œê·¸ì¸ ì „ì— íƒˆí‡´ëœ ì´ë©”ì¼ì¸ì§€ í™•ì¸
            db.ref("íƒˆí‡´ì´ë©”ì¼/" + íƒˆí‡´í‚¤).once("value").then((snapshot) => {
                if (snapshot.exists()) {
                    alert("ì´ ì•„ì´ë””ëŠ” íƒˆí‡´ë˜ì–´ ë¡œê·¸ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
                    return;
                }

                // âœ… ì‹¤ì œ ë¡œê·¸ì¸ ì‹œë„
                auth.signInWithEmailAndPassword(ì´ë©”ì¼í˜•ì‹, ë¹„ë²ˆ)
                    .then((userCredential) => {
                        const user = userCredential.user;
                        const uid = user.uid;

                        const ì„¸ì…˜í† í° = localStorage.getItem("ì„¸ì…˜í† í°") || crypto.randomUUID();
                        localStorage.setItem("ì„¸ì…˜í† í°", ì„¸ì…˜í† í°);
                        db.ref("users/" + uid).update({ ì„¸ì…˜í† í° });

                    })
                    .catch(err => {
                        alert("ë¡œê·¸ì¸ ì‹¤íŒ¨: " + err.message);
                    });
            });
        }



        function ì¥ë¹„ë“œëì‹œë„(ë“±ê¸‰, ì¶œì²˜ = "") {
            const í™•ë¥  = ì¥ë¹„ë“œëí™•ë¥ [ë“±ê¸‰] ?? 0;
            if (Math.random() >= í™•ë¥ ) return;

            if (!ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡) ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡ = [];

            let ì´ë¦„ = "";
            let ë“œëë“±ê¸‰ = "";

            if (ë“±ê¸‰ === "ì¼ë°˜") {
                ì´ë¦„ = ì¼ë°˜ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ì¼ë°˜";
            } else if (ë“±ê¸‰ === "ë ˆì–´") {
                ì´ë¦„ = ë ˆì–´ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ë ˆì–´";
            } else if (ë“±ê¸‰ === "ì‹ í™”") {
                ì´ë¦„ = ì‹ í™”ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ì‹ í™”";
            } else if (ë“±ê¸‰ === "ê³ ëŒ€") {
                ì´ë¦„ = ê³ ëŒ€ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ê³ ëŒ€";
            } else if (ë“±ê¸‰ === "íƒœì´ˆ") {
                ì´ë¦„ = íƒœì´ˆë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "íƒœì´ˆ";
            } else if (ë“±ê¸‰ === "ê³µí—ˆ") {
                ì´ë¦„ = ê³µí—ˆë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ê³µí—ˆ";
            } else {
                return;
            }

            // âœ… ê³µê²©ë ¥ = ê¸°ë³¸ê°’ Â± 20% ì˜¤ì°¨
            let ê¸°ë³¸ê³µê²©ë ¥ = 0;
            if (ë“±ê¸‰ === "ì¼ë°˜") ê¸°ë³¸ê³µê²©ë ¥ = 10;
            else if (ë“±ê¸‰ === "ë ˆì–´") ê¸°ë³¸ê³µê²©ë ¥ = 100;
            else if (ë“±ê¸‰ === "ì‹ í™”") ê¸°ë³¸ê³µê²©ë ¥ = 900;
            else if (ë“±ê¸‰ === "ê³ ëŒ€") ê¸°ë³¸ê³µê²©ë ¥ = 7200;
            else if (ë“±ê¸‰ === "íƒœì´ˆ") ê¸°ë³¸ê³µê²©ë ¥ = 50400;
            else if (ë“±ê¸‰ === "ê³µí—ˆ") ê¸°ë³¸ê³µê²©ë ¥ = 302400;

            const ì˜¤ì°¨ë²”ìœ„ = ê¸°ë³¸ê³µê²©ë ¥ * 0.2;
            const ê³µê²©ë ¥ = Math.floor(ê¸°ë³¸ê³µê²©ë ¥ + (Math.random() * 2 - 1) * ì˜¤ì°¨ë²”ìœ„);

            let ê¸°ì¡´ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(z => z.ì´ë¦„ === ì´ë¦„ && z.ë“±ê¸‰ === ë“œëë“±ê¸‰);

            if (ê¸°ì¡´) {
                ê¸°ì¡´.ê³µê²©ë ¥ += ê³µê²©ë ¥;

                // âœ… í•©ì„±íšŸìˆ˜ ì¦ê°€
                const í‚¤ = `${ê¸°ì¡´.ì´ë¦„}|${ê¸°ì¡´.ë“±ê¸‰}`;
                ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡[í‚¤] = (ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡[í‚¤] ?? 0) + 1;

                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ê³µê²©ë ¥;
                ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥ += 1;
            } else {
                const ì‹ ê·œ = { ì´ë¦„, ë“±ê¸‰: ë“œëë“±ê¸‰, ê³µê²©ë ¥, ê°•í™”: 0 };

                // âœ… ìµœì´ˆ í•©ì„±íšŸìˆ˜ 0ìœ¼ë¡œ ì„¤ì •
                const í‚¤ = `${ì´ë¦„}|${ë“œëë“±ê¸‰}`;
                ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡[í‚¤] = 0;

                ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.push(ì‹ ê·œ);
                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ê³µê²©ë ¥;
            }

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).update({
                ì¥ë¹„ëª©ë¡: ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡,
                í•©ì„±ê¸°ë¡: ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡, // â† ì´ ì¤„ì„ ì¶”ê°€í•´ì•¼ í•¨
                ê³µê²©ë ¥: ìœ ì €ë°ì´í„°.ê³µê²©ë ¥,
                ìµœëŒ€ì²´ë ¥: ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥
            }).then(() => {
                í™”ë©´í•´ì œ();
            });

            const ì¥ë¹„ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(z => z.ì´ë¦„ === ì´ë¦„);

            // âœ… ë°”ë¡œ ì—¬ê¸°!
            const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
            const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;
            const ë¡œê·¸ë©”ì‹œì§€ = `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}]${ì¶œì²˜} ${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜})${ì¥ë¹„.ê°•í™” ? " +" + ì¥ë¹„.ê°•í™” : ""} (ê³µê²©ë ¥ +${ê³µê²©ë ¥}) ë“œë!`;
            í™”ë©´ì ê¸ˆ();
            if (ë“±ê¸‰ === "íƒœì´ˆ" || ë“±ê¸‰ === "ê³µí—ˆ") {
                db.ref("ë“œëë¡œê·¸").push({
                    ì•„ì´ë””: ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "ìµëª…",
                    ì´ë¦„: ì¥ë¹„.ì´ë¦„,
                    ê³µê²©ë ¥: ê³µê²©ë ¥,
                    ë“±ê¸‰: ì¥ë¹„.ë“±ê¸‰,
                    ê°•í™”: ì¥ë¹„.ê°•í™”,
                    ë¡œê·¸: ë¡œê·¸ë©”ì‹œì§€,
                    ì‹œê°: Date.now(),
                }).then(() => {
                    í™”ë©´í•´ì œ();
                });
            } else {
                í™”ë©´í•´ì œ();
            }
        }

        function ë“œëë¡œê·¸ì¶”ê°€(ì•„ì´ë””, ì¥ë¹„) {
            const ë°•ìŠ¤ = document.getElementById("ë“œëë¡œê·¸ë°•ìŠ¤");
            const ì¤„ = document.createElement("div");

            ì¤„.innerText = ì¥ë¹„.ë¡œê·¸
                ? ì¥ë¹„.ë¡œê·¸
                : `[${ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„} (ê³µê²©ë ¥ +${ì¥ë¹„.ê³µê²©ë ¥}) ë“œë!`;
            ì¤„.style.color = ìƒ‰ìƒë§µ[ì¥ë¹„.ë“±ê¸‰] || "white";

            ë°•ìŠ¤.appendChild(ì¤„);

            // 20ê°œ ì´ˆê³¼ ì‹œ ë§¨ ìœ„ ì œê±°
            while (ë°•ìŠ¤.childNodes.length > 20) {
                ë°•ìŠ¤.removeChild(ë°•ìŠ¤.firstChild);
            }
        }



        auth.onAuthStateChanged(function (user) {
            if (user) {
                if (user.isAnonymous) {
                    user.delete().then(() => ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°());
                    return;
                }

                uid = user.uid;
                const ì„¸ì…˜í† í° = localStorage.getItem("ì„¸ì…˜í† í°") || crypto.randomUUID();
                localStorage.setItem("ì„¸ì…˜í† í°", ì„¸ì…˜í† í°);
                db.ref("users/" + uid).update({ ì„¸ì…˜í† í° }).then(() => {

                    // ê°ì‹œ ë£¨í”„ëŠ” 2ì´ˆ í›„ ì‹œì‘ (ì¶©ë¶„íˆ ì•ˆì •ëœ ìƒíƒœ)
                    setTimeout(() => {
                        setInterval(() => {
                            const ë‚´í† í° = localStorage.getItem("ì„¸ì…˜í† í°");
                            db.ref("users/" + uid + "/ì„¸ì…˜í† í°").once("value").then(snapshot => {
                                const ì„œë²„í† í° = snapshot.val();
                                if (!ë‚´í† í° || ë‚´í† í° !== ì„œë²„í† í°) {
                                    alert("ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ ë¸Œë¼ìš°ì €ëŠ” ë¡œê·¸ì•„ì›ƒë©ë‹ˆë‹¤.");
                                    auth.signOut().then(() => {
                                        localStorage.removeItem("ì„¸ì…˜í† í°");
                                        location.reload();
                                    });
                                }
                            });
                        }, 3000);
                    }, 2000); // âœ… ë”œë ˆì´ ì¤˜ì„œ ì•ˆì „í•˜ê²Œ ì‹œì‘
                });


                í™”ë©´ì ê¸ˆ();

                db.ref("users/" + uid).once("value").then((snapshot) => {
                    if (!snapshot.exists()) {
                        // âœ… ìœ ì € ë°ì´í„° ì—†ìœ¼ë©´ ë¡œê·¸ì•„ì›ƒ í›„ ë¡œê·¸ì¸í™”ë©´ ì´ë™
                        auth.signOut().then(() => {
                            localStorage.removeItem("ì„¸ì…˜í† í°");
                            ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°();
                            í™”ë©´í•´ì œ();
                        });
                        return;
                    }

                    const ë°ì´í„° = snapshot.val();
                    const ìƒì„±ì‹œê° = Date.parse(ë°ì´í„°?.ìƒì„±ì‹œê° || "");
                    if (!isNaN(ìƒì„±ì‹œê°) && ìƒì„±ì‹œê° < ê¸°ì¤€ì‹œê°) {
                        const ê²½ê³  = document.createElement("div");
                        ê²½ê³ .innerHTML = `
                    <div style="
                        position: fixed;
                        top: 0; left: 0; right: 0; bottom: 0;
                        background: black;
                        color: red;
                        font-size: 18px;
                        display: flex;
                        flex-direction: column;
                        justify-content: center;
                        align-items: center;
                        z-index: 99999;
                        animation: ê¹œë¹¡ì„ 1s infinite;
                    ">
                        <div style="margin-bottom: 20px; text-align: center;">
                            <p>ğŸŒ‘ í•˜ëŠ˜ì´ ì–´ë‘ì›Œì§€ê³ ...</p>
                            <p>â˜„ï¸ ìš´ì„ì´ ë‹¤ê°€ì˜µë‹ˆë‹¤...</p>
                            <p style="font-size: 24px; font-weight: bold; color: orange;">ğŸ’¥ ë©”í…Œì˜¤ ì‘ë ¬!</p>
                        </div>
                        <button id="í™•ì¸ë²„íŠ¼" style="
                            padding: 10px 20px;
                            font-size: 16px;
                            background: red;
                            color: white;
                            border: none;
                            border-radius: 8px;
                            cursor: pointer;
                        ">í™•ì¸</button>
                    </div>
                    <style>
                    @keyframes ê¹œë¹¡ì„ {
                        0% { background-color: black; }
                        50% { background-color: darkred; }
                        100% { background-color: black; }
                    }
                    </style>
                `;
                        document.body.appendChild(ê²½ê³ );

                        document.getElementById("í™•ì¸ë²„íŠ¼").addEventListener("click", () => {
                            db.ref("users/" + uid).remove().then(() => {
                                user.delete().then(() => {
                                    location.reload();
                                    í™”ë©´í•´ì œ();
                                });
                            });
                        });
                        return;
                    }

                    // âœ… ìœ ì € ë°ì´í„° ì •ìƒ ë¡œë”©
                    ìœ ì €ë°ì´í„° = {
                        ...ë°ì´í„°,
                        ì¡°ìš°ê¸°ë¡: ë°ì´í„°.ì¡°ìš°ê¸°ë¡ || {},
                        ìŠ¤í‚¬: ë°ì´í„°.ìŠ¤í‚¬ || {},
                        ì¥ë¹„ëª©ë¡: ë°ì´í„°.ì¥ë¹„ëª©ë¡ || [],
                        í•©ì„±ê¸°ë¡: ë°ì´í„°.í•©ì„±ê¸°ë¡ || {},
                        ìµœëŒ€ì²´ë ¥: ë°ì´í„°.ìµœëŒ€ì²´ë ¥ || 100,
                        ê°•ë¦¼ëª¬ìŠ¤í„°: ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° || null
                    };

                    if (!("ë ˆì–´" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ë ˆì–´ = 0;
                    if (!("ì‹ í™”" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ì‹ í™” = 0;
                    if (!("ê³ ëŒ€" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ê³ ëŒ€ = 0;
                    if (!("íƒœì´ˆ" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.íƒœì´ˆ = 0;
                    if (!("ê³µí—ˆ" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ê³µí—ˆ = 0;

                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                    í™”ë©´í•´ì œ();
                });

            } else {
                ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°(); // ë¡œê·¸ì¸ ì•ˆ ëœ ê²½ìš° ë¡œê·¸ì¸ì°½ í‘œì‹œ
            }
        });



        function í™”ë©´ì ê¸ˆ() {
            document.getElementById("ë¸”ë¡œì»¤").style.display = "block";
        }

        function í™”ë©´í•´ì œ() {
            document.getElementById("ë¸”ë¡œì»¤").style.display = "none";
        }

        function ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("ë“œëë¡œê·¸ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì±„íŒ…ì…ë ¥").style.display = "none";

            document.getElementById("ë¡œê·¸ì¸í™”ë©´").style.display = "block";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
        }


        function ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €) {
            document.getElementById("ë¡œê·¸ì¸í™”ë©´").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "block";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "block";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "block";
            document.getElementById("ë“œëë¡œê·¸ë°•ìŠ¤").style.display = "block";
            document.getElementById("ì±„íŒ…ì…ë ¥").style.display = "block";

            document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "gagl";
            document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").innerText = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "gagl";
            document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = "ê³µê²©ë ¥ " + (ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ || 0);
            document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥} / ${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;
            document.getElementById("í˜„ì¬ì¸µ").innerText = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ + "ì¸µ" || "gagl";

            document.getElementById("ë ˆë²¨").innerText = "ë ˆë²¨ " + (ìœ ì €ë°ì´í„°.ë ˆë²¨ ?? 1);
            document.getElementById("ì´ê²½í—˜ì¹˜").innerText = typeof ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ === "number" ? ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜.toLocaleString() : "0";
            document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "0";
            document.getElementById("ì´ê³¨ë“œ").innerText = typeof ìœ ì €ë°ì´í„°.ê³¨ë“œ === "number" ? ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString() : "0";
            document.getElementById("íšë“ê³¨ë“œ").innerText = "0";
            document.getElementById("ì´ìˆ™ë ¨ë„").innerText = typeof ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ === "number" ? ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„.toLocaleString() : "0";
            document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "0";

            const baseRate = {
                ê³µí—ˆ: 0.0000002,
                íƒœì´ˆ: 0.000005,
                ê³ ëŒ€: 0.00002,
                ì‹ í™”: 0.00005,
                ë ˆì–´: 0.0002
            };
            // const baseRate = {
            //     ê³µí—ˆ: 0.16,
            //     íƒœì´ˆ: 0.16,
            //     ê³ ëŒ€: 0.16,
            //     ì‹ í™”: 0.16,
            //     ë ˆì–´: 0.16
            // };

            const ì¸µìˆ˜ = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ;
            const ë“±ì¥ë¥  = {
                ê³µí—ˆ: baseRate.ê³µí—ˆ * ì¸µìˆ˜,
                íƒœì´ˆ: baseRate.íƒœì´ˆ * ì¸µìˆ˜,
                ê³ ëŒ€: baseRate.ê³ ëŒ€ * ì¸µìˆ˜,
                ì‹ í™”: baseRate.ì‹ í™” * ì¸µìˆ˜,
                ë ˆì–´: baseRate.ë ˆì–´ * ì¸µìˆ˜
            };

            const ê¸°ë³¸ì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];
            const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);

            let íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = null;
            let ë“±ê¸‰ = "ì¼ë°˜";

            if (ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°) {
                ë“±ê¸‰ = ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°.ë“±ê¸‰;
                íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°.ì´ë¦„;
            } else {
                const r = Math.random();

                if (r < ë“±ì¥ë¥ .ê³µí—ˆ) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ê³µí—ˆëª¬ìŠ¤í„°[Math.floor(Math.random() * ê³µí—ˆëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ê³µí—ˆ";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = íƒœì´ˆëª¬ìŠ¤í„°[Math.floor(Math.random() * íƒœì´ˆëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "íƒœì´ˆ";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ + ë“±ì¥ë¥ .ê³ ëŒ€) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ê³ ëŒ€ëª¬ìŠ¤í„°[Math.floor(Math.random() * ê³ ëŒ€ëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ê³ ëŒ€";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ + ë“±ì¥ë¥ .ê³ ëŒ€ + ë“±ì¥ë¥ .ì‹ í™”) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ì‹ í™”ëª¬ìŠ¤í„°[Math.floor(Math.random() * ì‹ í™”ëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ì‹ í™”";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ + ë“±ì¥ë¥ .ê³ ëŒ€ + ë“±ì¥ë¥ .ì‹ í™” + ë“±ì¥ë¥ .ë ˆì–´) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ë ˆì–´ëª¬ìŠ¤í„°[Math.floor(Math.random() * ë ˆì–´ëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ë ˆì–´";
                }
            }


            if (ë“±ê¸‰ !== "ì¼ë°˜") {
                ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = {
                    ë“±ê¸‰,
                    ì´ë¦„: íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„
                };
                db.ref("users/" + uid).update({ ê°•ë¦¼ëª¬ìŠ¤í„°: ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° });




                ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡[ë“±ê¸‰] = (ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡[ë“±ê¸‰] || 0) + 1;
                í™”ë©´ì ê¸ˆ(); // âœ… ì ê¸ˆ

                db.ref("users/" + uid).update({ ì¡°ìš°ê¸°ë¡: ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡ }).then(() => {
                    í™”ë©´í•´ì œ(); // âœ… í•´ì œ
                });

                const ì»¨í…Œì´ë„ˆ = document.createElement("div");
                ì»¨í…Œì´ë„ˆ.innerHTML = `
    <div style="display: flex; align-items: center; gap: 6px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
        viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ[ë“±ê¸‰]}" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-octagon-alert-icon lucide-octagon-alert">
          <path d="M12 16h.01"/>
          <path d="M12 8v4"/>
          <path d="M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z"/>
        </svg>
        <span style="color: ${ìƒ‰ìƒë§µ[ë“±ê¸‰]}; font-weight: bold; font-size: 14px;">
            ${ë“±ê¸‰}ì•…ë§ˆ ${íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„} ê°•ë¦¼!
        </span>
    </div>
    `;

                ì»¨í…Œì´ë„ˆ.style.position = "absolute";
                ì»¨í…Œì´ë„ˆ.style.left = `${Math.random() * 80 + 10}%`;
                ì»¨í…Œì´ë„ˆ.style.top = `${Math.random() * 50 + 20}%`;
                ì»¨í…Œì´ë„ˆ.style.zIndex = "9999";
                ì»¨í…Œì´ë„ˆ.style.pointerEvents = "none";
                ì»¨í…Œì´ë„ˆ.style.whiteSpace = "nowrap";

                document.getElementById("ì „íˆ¬í™”ë©´").appendChild(ì»¨í…Œì´ë„ˆ);
                setTimeout(() => ì»¨í…Œì´ë„ˆ.remove(), 2000);
            }

            const ëª¬ìŠ¤í„°ì´ë¦„ = íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ || `${ë¡œë§ˆë²ˆí˜¸}. ${ê¸°ë³¸ì´ë¦„}`;
            document.getElementById("ì•…ë§ˆì´ë¦„").innerText = ëª¬ìŠ¤í„°ì´ë¦„;

            const ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ, ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸, ë“±ê¸‰);
            í˜„ì¬ì•…ë§ˆ = ì•…ë§ˆ;
            í˜„ì¬ì•…ë§ˆì²´ë ¥ = ì•…ë§ˆ.ì²´ë ¥;
            í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥ = ì•…ë§ˆ.ì²´ë ¥;
            í˜„ì¬ëª¬ìŠ¤í„°ì´ë¦„ = ëª¬ìŠ¤í„°ì´ë¦„;
            í˜„ì¬ëª¬ìŠ¤í„°ë“±ê¸‰ = ë“±ê¸‰;

            document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${í˜„ì¬ì•…ë§ˆì²´ë ¥} / ${í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥}`;
            document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ì•…ë§ˆ.ë°©ì–´ë ¥}`;
            document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = `0.2px solid ${{
                "ì¼ë°˜": "#2e2e2e",
                "ë ˆì–´": "#2665c9", // â†’ "#2acd25"
                "ì‹ í™”": "#c59b20", // â†’ "#2665c9"
                "ê³ ëŒ€": "#c825cd", // â†’ "#c59b20"
                "íƒœì´ˆ": "#cd2525", // â†’ "#c825cd"
                "ê³µí—ˆ": "#2acd25"  // â†’ "#cd2525"
            }[ë“±ê¸‰]
                }`;
            // document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.boxShadow = `0 0 2px 2px ${ìƒ‰ìƒë§µ[ë“±ê¸‰]}`;
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
        }

        function ìë™ì‚¬ëƒ¥ì¤‘ì§€() {
            ìë™ì‚¬ëƒ¥ì¤‘ = false;
            clearInterval(ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸);
            ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

            const ë²„íŠ¼ = document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼");
            ë²„íŠ¼.innerText = "â± ìë™ì‚¬ëƒ¥";
            ë²„íŠ¼.style.color = "white";
        }


        function ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "block";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            const ì»¨í…Œì´ë„ˆ = document.getElementById("ì „ë‹¹ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            db.ref("users").once("value").then((snapshot) => {
                const ìœ ì €ë¦¬ìŠ¤íŠ¸ = [];

                snapshot.forEach((child) => {
                    const ë°ì´í„° = child.val();

                    // ğŸ”’ ìƒì„±ì‹œê° í•„í„°
                    const ìƒì„±ì‹œê° = new Date(ë°ì´í„°.ìƒì„±ì‹œê°).getTime();
                    if (!isNaN(ìƒì„±ì‹œê°) && ìƒì„±ì‹œê° < ê¸°ì¤€ì‹œê°) return;

                    if (!ë°ì´í„°.ì•„ì´ë”” || ë°ì´í„°.ì•„ì´ë””.trim() === "") return;
                    ìœ ì €ë¦¬ìŠ¤íŠ¸.push(ë°ì´í„°);
                });

                // âœ… ê³µê²©ë ¥ ê¸°ì¤€ ì •ë ¬
                ìœ ì €ë¦¬ìŠ¤íŠ¸.sort((a, b) => b.ê³µê²©ë ¥ - a.ê³µê²©ë ¥);

                ìœ ì €ë¦¬ìŠ¤íŠ¸.slice(0, 10).forEach((ìœ ì €, index) => {
                    const ì¤„ = document.createElement("div");
                    ì¤„.className = "ì–‘ìª½ì •ë ¬ ë°‘ì¤„";
                    if (ìœ ì €.ì•„ì´ë”” === ìœ ì €ë°ì´í„°.ì•„ì´ë””) {
                        ì¤„.classList.add("ë‚´ì•„ì´ë””ê°•ì¡°");
                    }

                    let ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "";
                    if (index === 0) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ê¸ˆ";
                    else if (index === 1) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ì€";
                    else if (index === 2) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ë™";

                    const ì™•ê´€ = index < 3
                        ? `<svg xmlns="http://www.w3.org/2000/svg" class="crown-icon ${ì™•ê´€ìƒ‰í´ë˜ìŠ¤}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                     <path d="M2 5l4.5 4.5L12 3l5.5 6.5L22 5l-1 14H3L2 5z" />
                     <path d="M5 20h14" />
                   </svg>`
                        : `<span>${index + 1}</span>`;

                    ì¤„.innerHTML = `
  <div class="ê°€ë¡œì •ë ¬">${ì™•ê´€}</div>
  <div>${ìœ ì €.ì•„ì´ë””} (lv.${ìœ ì €.ë ˆë²¨ || 1}) - ê³µê²©ë ¥ ${ìœ ì €.ê³µê²©ë ¥} / ${ìœ ì €.í˜„ì¬ì¸µ}ì¸µ</div>
`;
                    ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);

                    ì¤„.addEventListener("click", () => {
                        í™”ë©´ì ê¸ˆ();
                        db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ìœ ì €.ì•„ì´ë””).once("value").then(snapshot => {
                            snapshot.forEach(child => {
                                const ëŒ€ìƒë°ì´í„° = child.val();
                                const ì¥ë¹„ë“¤ = ëŒ€ìƒë°ì´í„°.ì¥ë¹„ëª©ë¡ || [];

                                const ì°½ = document.getElementById("ë¯¸ë‹ˆì¥ë¹„ì°½");
                                ì°½.style.display = "block";
                                ì°½.innerHTML = `<div style="font-weight:bold; margin-bottom:8px;">ğŸ” ${ìœ ì €.ì•„ì´ë””} ì¥ë¹„</div>`;

                                if (ì¥ë¹„ë“¤.length === 0) {
                                    ì°½.innerHTML += "ì¥ë¹„ ì—†ìŒ";
                                    í™”ë©´í•´ì œ();
                                    return;
                                }

                                ì¥ë¹„ë“¤.sort((a, b) => b.ê³µê²©ë ¥ - a.ê³µê²©ë ¥);

                                for (const ì¥ë¹„ of ì¥ë¹„ë“¤) {
                                    const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
                                    const í•©ì„±ìˆ˜ = ëŒ€ìƒë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;
                                    const ê°•í™”í‘œì‹œ = ì¥ë¹„.ê°•í™” ? ` +${ì¥ë¹„.ê°•í™”}` : "";
                                    const ì´ë¦„í‘œì‹œ = `${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜})${ê°•í™”í‘œì‹œ}`;

                                    const ë°•ìŠ¤ = document.createElement("div");
                                    ë°•ìŠ¤.className = "ê¸°ë³¸í…Œë‘ë¦¬";
                                    ë°•ìŠ¤.style.marginBottom = "6px";
                                    ë°•ìŠ¤.style.border = `1px solid ${ìƒ‰ìƒë§µ[ì¥ë¹„.ë“±ê¸‰] || "#ccc"}`;
                                    ë°•ìŠ¤.innerText = `[${ì¥ë¹„.ë“±ê¸‰}] ${ì´ë¦„í‘œì‹œ} - ğŸ—¡ ${ì¥ë¹„.ê³µê²©ë ¥}`;
                                    ì°½.appendChild(ë°•ìŠ¤);
                                }

                                í™”ë©´í•´ì œ();
                            });
                        });
                    });

                });

                const ë‚´ë­í‚¹ì¸ë±ìŠ¤ = ìœ ì €ë¦¬ìŠ¤íŠ¸.findIndex(u => u.ì•„ì´ë”” === ìœ ì €ë°ì´í„°.ì•„ì´ë””);
                const ë‚´ë­í‚¹ = ë‚´ë­í‚¹ì¸ë±ìŠ¤ + 1;

                if (ë‚´ë­í‚¹ > 10) {
                    const ë‚´ì¤„ = document.createElement("div");
                    ë‚´ì¤„.className = "ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ë‚´ì•„ì´ë””ê°•ì¡°";

                    ë‚´ì¤„.innerHTML = `
  <div class="ê°€ë¡œì •ë ¬">${ë‚´ë­í‚¹}</div>
  <div>${ìœ ì €ë°ì´í„°.ì•„ì´ë””} - ê³µê²©ë ¥ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥} / ${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ</div>
`;
                    ì»¨í…Œì´ë„ˆ.appendChild(ë‚´ì¤„);
                }
            });
        }

        document.addEventListener("click", (e) => {
            const ì°½ = document.getElementById("ë¯¸ë‹ˆì¥ë¹„ì°½");
            if (ì°½.style.display === "block" && !ì°½.contains(e.target)) {
                ì°½.style.display = "none";
            }
        });

        function ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "block";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            const ê¸°ë¡ = ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡ || { ë ˆì–´: 0, ì‹ í™”: 0, ê³ ëŒ€: 0, íƒœì´ˆ: 0, ê³µí—ˆ: 0 };
            document.getElementById("ì¥ë¹„ëª©ë¡").innerText =
                `ë ˆì–´:${ê¸°ë¡.ë ˆì–´} ì‹ í™”:${ê¸°ë¡.ì‹ í™”} ê³ ëŒ€:${ê¸°ë¡.ê³ ëŒ€} íƒœì´ˆ:${ê¸°ë¡.íƒœì´ˆ} ê³µí—ˆ:${ê¸°ë¡.ê³µí—ˆ}`;

            const ì¥ë¹„ì»¨í…Œì´ë„ˆ = document.getElementById("ì¥ë¹„ì»¨í…Œì´ë„ˆ");
            ì¥ë¹„ì»¨í…Œì´ë„ˆ.innerHTML = "";
            document.getElementById("ì¥ë¹„ê³¨ë“œí‘œì‹œ").innerText =
                `ğŸ’° ${ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString()} Gold | ê³µê²©ë ¥ ğŸ—¡ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥} | ìµœëŒ€ì²´ë ¥ â¤ï¸ ${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;

            const ì¥ë¹„ëª©ë¡ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡ || [];

            if (ì¥ë¹„ëª©ë¡.length === 0) {
                ì¥ë¹„ì»¨í…Œì´ë„ˆ.innerText = "íšë“í•œ ì¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤.";
                return;
            }

            ì¥ë¹„ëª©ë¡.sort((a, b) => b.ê³µê²©ë ¥ - a.ê³µê²©ë ¥);

            ì¥ë¹„ëª©ë¡.forEach(ì¥ë¹„ => {
                const ë°•ìŠ¤ = document.createElement("div");
                // ë°•ìŠ¤.className = `ê¸°ë³¸í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬ ì¥ë¹„-${ì¥ë¹„.ë“±ê¸‰}`;

                ë°•ìŠ¤.className = `ê¸°ë³¸í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬`;
                ë°•ìŠ¤.style.border = `1px solid ${ìƒ‰ìƒë§µ[ì¥ë¹„.ë“±ê¸‰]}`;


                // âœ… í•©ì„±íšŸìˆ˜ ê°€ì ¸ì˜¤ê¸°
                const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
                const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;
                const ê°•í™”í‘œì‹œ = ì¥ë¹„.ê°•í™” ? ` +${ì¥ë¹„.ê°•í™”}` : "";
                const ì´ë¦„í‘œì‹œ = `${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜})${ê°•í™”í‘œì‹œ}`;

                ë°•ìŠ¤.innerHTML = `
      <div>[${ì¥ë¹„.ë“±ê¸‰}] ${ì´ë¦„í‘œì‹œ}</div>
      <div>
        <svg onclick="ì¥ë¹„ê°•í™”('${ì¥ë¹„.ì´ë¦„}', '${ì¥ë¹„.ë“±ê¸‰}', this.closest('.ê¸°ë³¸í…Œë‘ë¦¬'))"
         xmlns="http://www.w3.org/2000/svg"
         width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
         style="cursor:pointer; margin-right: 4px;">
          <path d="m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9"/>
          <path d="m18 15 4-4"/>
          <path d="m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5"/>
        </svg>
        ê³µê²©ë ¥ +${ì¥ë¹„.ê³µê²©ë ¥}
      </div>
    `;
                ì¥ë¹„ì»¨í…Œì´ë„ˆ.appendChild(ë°•ìŠ¤);
            });
        }

        function ì¥ë¹„ê°•í™”(ì´ë¦„, ë“±ê¸‰, ë°•ìŠ¤) {
            const ì¥ë¹„ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(z => z.ì´ë¦„ === ì´ë¦„ && z.ë“±ê¸‰ === ë“±ê¸‰);
            if (!ì¥ë¹„) return;

            const ê°•í™”ë¹„ìš© = { ì¼ë°˜: 1000, ë ˆì–´: 10000, ì‹ í™”: 100000, ê³ ëŒ€: 1000000, íƒœì´ˆ: 10000000, ê³µí—ˆ: 100000000 }[ë“±ê¸‰];
            const ê°•í™”ê³µê²©ë ¥ = { ì¼ë°˜: 3, ë ˆì–´: 30, ì‹ í™”: 180, ê³ ëŒ€: 1440, íƒœì´ˆ: 5040, ê³µí—ˆ: 30240 }[ë“±ê¸‰];

            if (ìœ ì €ë°ì´í„°.ê³¨ë“œ < ê°•í™”ë¹„ìš©) return ë©”ì‹œì§€í‘œì‹œ(ì¥ë¹„í™”ë©´, `${ë¨¸ë‹ˆì•„ì´ì½˜}`, `${ê°•í™”ë¹„ìš©.toLocaleString()}Goldê°€ í•„ìš”í•©ë‹ˆë‹¤.`, "#cd4b25");

            if (!confirm(`[${ì´ë¦„}]ì„(ë¥¼) ê°•í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nê³¨ë“œ ${ê°•í™”ë¹„ìš©.toLocaleString()} ì†Œëª¨ë©ë‹ˆë‹¤.`)) return;

            ìœ ì €ë°ì´í„°.ê³¨ë“œ -= ê°•í™”ë¹„ìš©;

            const ê¸°ì¡´ê°•í™” = ì¥ë¹„.ê°•í™” || 0; // ì‹¤íŒ¨ ëŒ€ë¹„ í˜„ì¬ ê°•í™” ìˆ˜ì¹˜ ì €ì¥

            const ì„±ê³µ = Math.random() < 0.51;
            if (ì„±ê³µ) {
                ì¥ë¹„.ê°•í™” = ê¸°ì¡´ê°•í™” + 1;
                ì¥ë¹„.ê³µê²©ë ¥ += ê°•í™”ê³µê²©ë ¥;
                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ê°•í™”ê³µê²©ë ¥;
                ê°•í™”ì´í™íŠ¸ë³´ì—¬ì£¼ê¸°(ë°•ìŠ¤, "ê°•í™” ì„±ê³µ!", "#00c851");
            } else {
                ê°•í™”ì´í™íŠ¸ë³´ì—¬ì£¼ê¸°(ë°•ìŠ¤, "ê°•í™” ì‹¤íŒ¨..", "#ef4444");
            }

            const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
            const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;

            const ë¡œê·¸ë©”ì‹œì§€ = ì„±ê³µ
                ? `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜}) ê°•í™” +${ì¥ë¹„.ê°•í™”} ì„±ê³µ!`
                : `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜}) ê°•í™” +${ê¸°ì¡´ê°•í™”} ì‹¤íŒ¨..`;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).update({
                ì¥ë¹„ëª©ë¡: ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡,
                ê³¨ë“œ: ìœ ì €ë°ì´í„°.ê³¨ë“œ,
                ê³µê²©ë ¥: ìœ ì €ë°ì´í„°.ê³µê²©ë ¥
            }).then(() => {
                ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });

            const ë¡œê·¸ê°ì²´ = {
                ì•„ì´ë””: ìœ ì €ë°ì´í„°.ì•„ì´ë””,
                ì´ë¦„: ì¥ë¹„.ì´ë¦„,
                ê°•í™”: ì¥ë¹„.ê°•í™” || 0,
                ë“±ê¸‰: ì¥ë¹„.ë“±ê¸‰,
                ë¡œê·¸: ë¡œê·¸ë©”ì‹œì§€,
                ì‹œê°: Date.now()
            };

            db.ref("ë“œëë¡œê·¸").push(ë¡œê·¸ê°ì²´);
        }


        function ê°•í™”ì´í™íŠ¸ë³´ì—¬ì£¼ê¸°(ë°•ìŠ¤, ë©”ì‹œì§€, ìƒ‰ìƒ) {
            const rect = ë°•ìŠ¤.getBoundingClientRect();

            const el = document.createElement("div");
            el.innerText = ë©”ì‹œì§€;

            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = ìƒ‰ìƒ;
            el.style.fontWeight = "bold";
            el.style.fontSize = "14px";
            el.style.background = "rgba(0,0,0,0.7)";
            el.style.padding = "6px 10px";
            el.style.borderRadius = "8px";
            el.style.pointerEvents = "none";
            el.style.zIndex = 9999;
            el.style.whiteSpace = "nowrap";
            el.style.animation = "fadeOut 2s ease-out forwards";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }


        function ìˆ™ë ¨ë„í•„ìš”ëŸ‰ì—…ë°ì´íŠ¸() {
            const ì´íˆ¬ì = ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜();
            const ë‹¤ìŒíˆ¬ììˆœë²ˆ = ì´íˆ¬ì + 1;
            const ë¹„ìš© = ìˆ™ë ¨ë„ì†Œëª¨(ë‹¤ìŒíˆ¬ììˆœë²ˆ);
            document.getElementById("ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ").innerText = `ë‹¤ìŒ íˆ¬ì ì‹œ í•„ìš” ìˆ™ë ¨ë„: ${ë¹„ìš©}`;
        }


        function ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "block";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
            document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").innerText = "ë³´ìœ  ìˆ™ë ¨ë„ " + ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„;
            let ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ = document.getElementById("ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ");
            if (!ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ) {
                ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ = document.createElement("div");
                ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ.id = "ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ";
                ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ.style.fontSize = "13px";
                ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ.style.color = "#888";
                ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ.style.marginBottom = "10px";
                document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").insertAdjacentElement("afterend", ìˆ™ë ¨ë„í•„ìš”ëŸ‰í‘œì‹œ);
            }
            const ì»¨í…Œì´ë„ˆ = document.getElementById("ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";


            const ìŠ¤í‚¬ì •ë³´ = {
                í¬ë¦¬í‹°ì»¬: {
                    ë‹¨ê³„: ["ì•ŒíŒŒ í¬ë¦¬í‹°ì»¬", "ë² íƒ€ í¬ë¦¬í‹°ì»¬", "ê°ë§ˆ í¬ë¦¬í‹°ì»¬", "ë¸íƒ€ í¬ë¦¬í‹°ì»¬", "ì—¡ì‹¤ë¡  í¬ë¦¬í‹°ì»¬", "ì œíƒ€ í¬ë¦¬í‹°ì»¬", "ì—íƒ€ í¬ë¦¬í‹°ì»¬"],
                    ì„¤ëª…: ["ìµœì¢…ë°ë¯¸ì§€ 1.2ë°°", "ìµœì¢…ë°ë¯¸ì§€ 1.4ë°°", "ìµœì¢…ë°ë¯¸ì§€ 1.6ë°°", "ìµœì¢…ë°ë¯¸ì§€ 1.8ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.0ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.2ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.4ë°°"],
                    ìƒ‰ìƒ: Array(10).fill("#ff0000"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-axe-icon"><path d="m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"/><path d="M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"/></svg>`
                },
                ë²„ì„œì»¤: {
                    ë‹¨ê³„: ["ì•µê±° ë²„ì„œì»¤", "ë ˆì´ì§€ ë²„ì„œì»¤", "í”„ë Œì§€ ë²„ì„œì»¤", "ë§¤ë“œë‹ˆìŠ¤ ë²„ì„œì»¤", "í•˜ìš¸ ë²„ì„œì»¤", "ìƒˆë¹„ì§€ ë²„ì„œì»¤", "ë¸”ëŸ¬ë“œ ë²„ì„œì»¤", "ì¹´ì˜¤ìŠ¤ ë²„ì„œì»¤"],
                    ì„¤ëª…: ["ì²´ë ¥-1, ìµœì¢…ë°ë¯¸ì§€ 1.4ë°°", "ì²´ë ¥-2, ìµœì¢…ë°ë¯¸ì§€ 1.8ë°°", "ì²´ë ¥-3, ìµœì¢…ë°ë¯¸ì§€ 2.2ë°°", "ì²´ë ¥-4, ìµœì¢…ë°ë¯¸ì§€ 2.6ë°°", "ì²´ë ¥-5, ìµœì¢…ë°ë¯¸ì§€ 3.0ë°°", "ì²´ë ¥-6, ìµœì¢…ë°ë¯¸ì§€ 3.4ë°°", "ì²´ë ¥-7, ìµœì¢…ë°ë¯¸ì§€ 3.8ë°°", "ì²´ë ¥-8, ìµœì¢…ë°ë¯¸ì§€ 4.2ë°°"],
                    ìƒ‰ìƒ: Array(10).fill("#ff7f00"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>`
                },
                ë“œë ˆì¸: {
                    ë‹¨ê³„: ["ê¸°ê°€ ë“œë ˆì¸", "í…Œë¼ ë“œë ˆì¸", "í˜íƒ€ ë“œë ˆì¸", "ì—‘ì‚¬ ë“œë ˆì¸", "ì œíƒ€ ë“œë ˆì¸", "ìš”íƒ€ ë“œë ˆì¸", "ë¡œë‚˜ ë“œë ˆì¸", "ì¿¼ì¹´ ë“œë ˆì¸"],
                    ì„¤ëª…: ["ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 1", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 2", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 3", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 4", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 5", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 6", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 7", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 8"],
                    ìƒ‰ìƒ: Array(10).fill("#ffff00"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplet-icon lucide-droplet"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></svg>`
                },
                ì¸ì‚¬ì´íŠ¸: {
                    ë‹¨ê³„: ["ë§ˆì´í¬ë¡œ ì¸ì‚¬ì´íŠ¸", "ë‚˜ë…¸ ì¸ì‚¬ì´íŠ¸"],
                    ì„¤ëª…: ["ìˆ™ë ¨ë„ + 1", "ìˆ™ë ¨ë„ + 2"],
                    ìƒ‰ìƒ: Array(10).fill("#00ff00"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-diamond-plus-icon lucide-diamond-plus"><path d="M12 8v8"/><path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"/><path d="M8 12h8"/></svg>`
                },
                ì•„ì´ì–¸ë°”ë””: {
                    ë‹¨ê³„: ["ìŠ¤í†¤ ì•„ì´ì–¸ë°”ë””", "ìŠ¤í‹¸ ì•„ì´ì–¸ë°”ë””", "í‹°íƒ„ ì•„ì´ì–¸ë°”ë””", "í”Œë ˆì´íŠ¸ ì•„ì´ì–¸ë°”ë””", "ë¯¸ìŠ¤ë¦´ ì•„ì´ì–¸ë°”ë””"],
                    ì„¤ëª…: ["ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 5", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 10", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 15", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 20", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 25"],
                    ìƒ‰ìƒ: Array(10).fill("#00bfff"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-biceps-flexed-icon lucide-biceps-flexed"><path d="M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1"/><path d="M15 14a5 5 0 0 0-7.584 2"/><path d="M9.964 6.825C8.019 7.977 9.5 13 8 15"/></svg>`
                },
                í€µë‹ˆìŠ¤: {
                    ë‹¨ê³„: ["í„°ë³´ í€µë‹ˆìŠ¤", "í•˜ì´í¼ í€µë‹ˆìŠ¤", "í”Œë˜ì‹œ í€µë‹ˆìŠ¤", "ìŠ¤ìœ„í”„íŠ¸ í€µë‹ˆìŠ¤", "ì œíŠ¸ í€µë‹ˆìŠ¤"],
                    ì„¤ëª…: ["ìë™ì‚¬ëƒ¥ ë”œë ˆì´ -20ms", "ìë™ì‚¬ëƒ¥ ë”œë ˆì´ -40ms", "ìë™ì‚¬ëƒ¥ ë”œë ˆì´ -60ms", "ìë™ì‚¬ëƒ¥ ë”œë ˆì´ -80ms", "ìë™ì‚¬ëƒ¥ ë”œë ˆì´ -100ms"],
                    ìƒ‰ìƒ: Array(10).fill("#8a2be2"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history-icon lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>`
                },
                ë°œêµ´: {
                    ë‹¨ê³„: ["ë£¨ë¹„ ë°œêµ´", "ì‚¬íŒŒì´ì–´ ë°œêµ´", "ì—ë©”ë„ë“œ ë°œêµ´", "ë‹¤ì´ì•„ëª¬ë“œ ë°œêµ´", "í† íŒŒì¦ˆ ë°œêµ´"],
                    ì„¤ëª…: ["ê³¨ë“œíšë“ 1.2ë°°", "ê³¨ë“œíšë“ 1.4ë°°", "ê³¨ë“œíšë“ 1.6ë°°", "ê³¨ë“œíšë“ 1.8ë°°", "ê³¨ë“œíšë“ 2.0ë°°"],
                    ìƒ‰ìƒ: Array(10).fill("#800080"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gem-icon lucide-gem"><path d="M6 3h12l4 6-10 13L2 9Z"/><path d="M11 3 8 9l4 13 4-13-3-6"/><path d="M2 9h20"/></svg>`
                },
                ë²„ë‹: {
                    ë‹¨ê³„: ["ì¸í˜ë¥´ë…¸ ë²„ë‹", "í”Œë ˆì„ ë²„ë‹", "ë¸”ë ˆì´ì§• ë²„ë‹", "í—¬íŒŒì´ì–´ ë²„ë‹", "í”¼ë‹‰ìŠ¤ ë²„ë‹"],
                    ì„¤ëª…: ["ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€1.6ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€2.2ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€2.8ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€3.4ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€4.0ë°°"],
                    ìƒ‰ìƒ: Array(10).fill("#ff4000"),
                    ì•„ì´ì½˜: (ìƒ‰) => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-battery-charging-icon lucide-battery-charging"><path d="M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/><path d="M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"/><path d="m11 7-3 5h4l-3 5"/><line x1="22" x2="22" y1="11" y2="13"/></svg>`
                }
            };

            const ìŠ¤í‚¬ëª©ë¡ = [];

            for (const í‚¤ in ìŠ¤í‚¬ì •ë³´) {
                const ì„¤ì • = ìŠ¤í‚¬ì •ë³´[í‚¤];
                const ì „ì²´ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤] || 0;
                const ë‹¨ê³„ìˆ˜ = ì„¤ì •.ë‹¨ê³„.length;
                const ë‹¨ê³„ë‹¹ë ˆë²¨ = 10;
                const ìµœëŒ€ë ˆë²¨ = ë‹¨ê³„ìˆ˜ * ë‹¨ê³„ë‹¹ë ˆë²¨;

                const í˜„ì¬ë‹¨ê³„ = Math.min(Math.floor(ì „ì²´ë ˆë²¨ / ë‹¨ê³„ë‹¹ë ˆë²¨), ë‹¨ê³„ìˆ˜ - 1);
                const ë‹¨ê³„ë ˆë²¨ = (ì „ì²´ë ˆë²¨ >= ìµœëŒ€ë ˆë²¨) ? 10 : ì „ì²´ë ˆë²¨ % ë‹¨ê³„ë‹¹ë ˆë²¨;

                const ìƒ‰ = ì„¤ì •.ìƒ‰ìƒ?.[í˜„ì¬ë‹¨ê³„] ?? "white";


                const ì´ë¦„ = ì„¤ì •.ë‹¨ê³„[í˜„ì¬ë‹¨ê³„];
                const ì„¤ëª… = ì„¤ì •.ì„¤ëª…?.[í˜„ì¬ë‹¨ê³„] || "";

                const ì•„ì´ì½˜ = ì„¤ì •.ì•„ì´ì½˜(ìƒ‰);

                const ë§ˆìŠ¤í„°ìˆ˜ = Math.floor(ì „ì²´ë ˆë²¨ / ë‹¨ê³„ë‹¹ë ˆë²¨);


                const ì´ë¦„í‘œì‹œ = `${ì•„ì´ì½˜} ${ì´ë¦„} +${ë‹¨ê³„ë ˆë²¨}`;
                const ë°œë™í™•ë¥  = ë‹¨ê³„ë ˆë²¨ * 10;
                const ì„¤ëª…í‘œì‹œ = `<div style="font-size: 12px; color: #888; margin-top: 2px;">
${ì„¤ëª…} <span style="color: #3b82f6;">ë°œë™í™•ë¥ (${ë°œë™í™•ë¥ }%)</span>
</div>`;

                ìŠ¤í‚¬ëª©ë¡.push({
                    ì´ë¦„: `${ì´ë¦„í‘œì‹œ}${ì„¤ëª…í‘œì‹œ}`,
                    í‚¤,
                    ë‹¨ê³„ìˆ˜,
                    ë‹¨ê³„ë‹¹ë ˆë²¨,
                    ë‹¨ê³„ë ˆë²¨,
                    ë§ˆìŠ¤í„°ìˆ˜ // âœ… ì´ ì¤„ ì¶”ê°€
                });
            }

            for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                const ì „ì²´ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] || 0;

                const ë£¨ì‹œë“œì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="gold" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-star-icon lucide-star"><path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/></svg>`;

                const ë³´ì¡°ì•„ì´ì½˜ = `<div style="position: absolute; top: 4px; left: 4px;">${ë£¨ì‹œë“œì•„ì´ì½˜.repeat(ìŠ¤í‚¬.ë§ˆìŠ¤í„°ìˆ˜)}</div>`;

                const ì¤„ = document.createElement("div");
                ì¤„.className = "ì–‘ìª½ì •ë ¬ ê¸°ë³¸í…Œë‘ë¦¬";
                ì¤„.style.position = "relative";
                ì¤„.innerHTML = `
  ${ë³´ì¡°ì•„ì´ì½˜}
  <div>${ìŠ¤í‚¬.ì´ë¦„}</div>
  <div class="ê°€ë¡œì •ë ¬">
    <div class="ë²„íŠ¼">+</div>
    <div class="ë²„íŠ¼">-</div>
    <div class="ë²„íŠ¼">M</div>
    <div class="ë²„íŠ¼">R</div>
  </div>
`;
                ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);

                ì¤„.querySelectorAll(".ë²„íŠ¼").forEach(ë²„íŠ¼ => {
                    const ë²„íŠ¼í…ìŠ¤íŠ¸ = ë²„íŠ¼.innerText;

                    ë²„íŠ¼.addEventListener("click", () => {
                        const ë‹¨ê³„ìˆ˜ = ìŠ¤í‚¬.ë‹¨ê³„ìˆ˜;
                        const ë‹¨ê³„ë‹¹ë ˆë²¨ = ìŠ¤í‚¬.ë‹¨ê³„ë‹¹ë ˆë²¨;
                        let ì „ì²´ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] || 0;

                        if (ë²„íŠ¼í…ìŠ¤íŠ¸ === "+") {
                            const ì´íˆ¬ì = Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬).reduce((a, b) => a + b, 0);
                            const ë‹¤ìŒíˆ¬ììˆœë²ˆ = ì´íˆ¬ì + 1;
                            const ë¹„ìš© = ìˆ™ë ¨ë„ì†Œëª¨(ë‹¤ìŒíˆ¬ììˆœë²ˆ);

                            if (ì „ì²´ë ˆë²¨ >= ë‹¨ê³„ìˆ˜ * ë‹¨ê³„ë‹¹ë ˆë²¨) return ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, `${ë§ˆìŠ¤í„°ì•„ì´ì½˜}`, "ìµœì¢…ë‹¨ê³„ì…ë‹ˆë‹¤.", "white");
                            if (ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ < ë¹„ìš©) return ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "", "ìˆ™ë ¨ë„ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.", "ef4444");

                            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ -= ë¹„ìš©;
                            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = ì „ì²´ë ˆë²¨ + 1;
                        }

                        else if (ë²„íŠ¼í…ìŠ¤íŠ¸ === "-") {
                            if (ì „ì²´ë ˆë²¨ <= 0) return ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, `${ì‹¤íŒ¨ì•„ì´ì½˜}`, "íšŒìˆ˜í•  ìŠ¤í‚¬ì´ ì—†ìŠµë‹ˆë‹¤.", "ef4444");

                            const ì´íˆ¬ì = Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬).reduce((a, b) => a + b, 0);
                            const ë§ˆì§€ë§‰ìˆœë²ˆ = ì´íˆ¬ì;
                            const í™˜ê¸‰ = ìˆ™ë ¨ë„ì†Œëª¨(ë§ˆì§€ë§‰ìˆœë²ˆ);

                            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += í™˜ê¸‰;
                            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = ì „ì²´ë ˆë²¨ - 1;
                        }


                        else if (ë²„íŠ¼í…ìŠ¤íŠ¸ === "M") {
                            while (true) {
                                const ì´íˆ¬ì = Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬).reduce((a, b) => a + b, 0);
                                const ë‹¤ìŒìˆœë²ˆ = ì´íˆ¬ì + 1;
                                const ë¹„ìš© = ìˆ™ë ¨ë„ì†Œëª¨(ë‹¤ìŒìˆœë²ˆ);
                                if (ì „ì²´ë ˆë²¨ >= ë‹¨ê³„ìˆ˜ * ë‹¨ê³„ë‹¹ë ˆë²¨) {
                                    ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, `${ë§ˆìŠ¤í„°ì•„ì´ì½˜}`, "ìµœì¢…ë‹¨ê³„ì…ë‹ˆë‹¤.", "white");
                                    break;
                                }
                                if (ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ < ë¹„ìš©) {
                                    ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "", "ìˆ™ë ¨ë„ ë¶€ì¡±.", "white");
                                    break;
                                }

                                ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ -= ë¹„ìš©;
                                ì „ì²´ë ˆë²¨++;
                                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = ì „ì²´ë ˆë²¨;
                            }
                        }


                        else if (ë²„íŠ¼í…ìŠ¤íŠ¸ === "R") {
                            const í˜„ì¬ë ˆë²¨ = ì „ì²´ë ˆë²¨;
                            let í™˜ê¸‰ = 0;
                            let íˆ¬ììˆœë²ˆ = Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬).reduce((a, b) => a + b, 0);

                            for (let i = 0; i < í˜„ì¬ë ˆë²¨; i++) {
                                í™˜ê¸‰ += ìˆ™ë ¨ë„ì†Œëª¨(íˆ¬ììˆœë²ˆ);
                                íˆ¬ììˆœë²ˆ--;
                            }

                            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += í™˜ê¸‰;
                            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                        }

                        í™”ë©´ì ê¸ˆ();
                        db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                            ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                            í™”ë©´í•´ì œ();
                        });
                    });
                });
            }
            ìˆ™ë ¨ë„í•„ìš”ëŸ‰ì—…ë°ì´íŠ¸();
        }


        function ìˆ™ë ¨ë„ì†Œëª¨(ìˆœë²ˆ) {
            return ìˆœë²ˆ === 1 ? 1 : ìˆ™ë ¨ë„ì†Œëª¨(ìˆœë²ˆ - 1) + (ìˆœë²ˆ - 1);
        }
        // ì˜ˆ: 1â†’1, 2â†’2, 3â†’4, 4â†’7, 5â†’11, ...


        document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").addEventListener("click", () => {
            if (!confirm("ëª¨ë“  ìŠ¤í‚¬ í¬ì¸íŠ¸ë¥¼ íšŒìˆ˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

            let ì´í™˜ê¸‰ = 0;
            let ì „ì²´íˆ¬ì = Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬).reduce((a, b) => a + b, 0);
            let íˆ¬ììˆœë²ˆ = ì „ì²´íˆ¬ì;

            for (const í‚¤ in ìœ ì €ë°ì´í„°.ìŠ¤í‚¬) {
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤];
                for (let i = 0; i < ë ˆë²¨; i++) {
                    ì´í™˜ê¸‰ += ìˆ™ë ¨ë„ì†Œëª¨(íˆ¬ììˆœë²ˆ);
                    íˆ¬ììˆœë²ˆ--;
                }
                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤] = 0;
            }

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += ì´í™˜ê¸‰;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, `${ì„±ê³µì•„ì´ì½˜}`, "ìˆ™ë ¨ë„ê°€ ëª¨ë‘ íšŒìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤", "white");
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        });


        function ì•„ì´ë””ì„¤ì •() {
            const ì…ë ¥ì•„ì´ë”” = document.getElementById("ì•„ì´ë””ì…ë ¥").value.trim();
            if (!ì…ë ¥ì•„ì´ë””) return ë©”ì‹œì§€í‘œì‹œ(ë¡œê·¸ì¸ì°½, "", "ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "white");

            // 1ï¸âƒ£ ì•„ì´ë”” ì¤‘ë³µ ì—¬ë¶€ í™•ì¸
            í™”ë©´ì ê¸ˆ();
            db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ì…ë ¥ì•„ì´ë””).once("value", (snapshot) => {
                if (snapshot.exists()) {
                    í™”ë©´í•´ì œ();
                    return ë©”ì‹œì§€í‘œì‹œ(ë¡œê·¸ì¸ì°½, "", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.", "white");
                }

                // 2ï¸âƒ£ ì¤‘ë³µ ì•„ë‹ˆë©´ ì €ì¥ ì§„í–‰
                ìœ ì €ë°ì´í„°.ì•„ì´ë”” = ì…ë ¥ì•„ì´ë””;
                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                    í™”ë©´í•´ì œ();
                });
            });
        }

        document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").addEventListener("click", () => {
            const el = document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ");

            if (el.querySelector("input")) return;

            const í˜„ì¬ì•„ì´ë”” = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "";
            const input = document.createElement("input");
            input.type = "text";
            input.value = í˜„ì¬ì•„ì´ë””;
            input.maxLength = 8;
            input.style.width = "120px";
            input.style.fontSize = "inherit";

            el.innerHTML = "";
            el.appendChild(input);
            input.focus();

            input.addEventListener("keydown", async (e) => {
                if (e.key === "Enter") {
                    const ìƒˆì•„ì´ë”” = input.value.trim();
                    if (!ìƒˆì•„ì´ë””) return ë©”ì‹œì§€í‘œì‹œ(el, "", "ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "white");

                    í™”ë©´ì ê¸ˆ();
                    const snapshot = await db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ìƒˆì•„ì´ë””).once("value");
                    const ì´ë¯¸ì¡´ì¬ = snapshot.exists() && ìƒˆì•„ì´ë”” !== í˜„ì¬ì•„ì´ë””;
                    if (ì´ë¯¸ì¡´ì¬) {
                        í™”ë©´í•´ì œ();
                        ë©”ì‹œì§€í‘œì‹œ(el, "", "ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.", "white");
                        input.focus();
                        return;
                    }

                    const ìƒˆì´ë©”ì¼ = `${ìƒˆì•„ì´ë””}@gagl.com`;
                    const ë¹„ë²ˆ = prompt("í˜„ì¬ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”");
                    if (!ë¹„ë²ˆ) {
                        í™”ë©´í•´ì œ();
                        el.innerText = í˜„ì¬ì•„ì´ë””;
                        return;
                    }

                    const user = auth.currentUser;
                    const credential = firebase.auth.EmailAuthProvider.credential(user.email, ë¹„ë²ˆ);

                    user.reauthenticateWithCredential(credential)
                        .then(() => user.updateEmail(ìƒˆì´ë©”ì¼))
                        .then(() => {
                            ìœ ì €ë°ì´í„°.ì•„ì´ë”” = ìƒˆì•„ì´ë””;
                            return db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°);
                        })
                        .then(() => {
                            el.innerText = ìƒˆì•„ì´ë””;
                            document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìƒˆì•„ì´ë””;
                            í™”ë©´í•´ì œ();
                        })
                        .catch((err) => {
                            í™”ë©´í•´ì œ();
                            ë©”ì‹œì§€í‘œì‹œ(el, "", "ë³€ê²½ ì‹¤íŒ¨: " + err.message, "red");
                            el.innerText = í˜„ì¬ì•„ì´ë””;
                        });
                }

                if (e.key === "Escape") el.innerText = í˜„ì¬ì•„ì´ë””;
            });

            input.addEventListener("blur", () => {
                el.innerText = í˜„ì¬ì•„ì´ë””;
            });
        });


        const ì•…ë§ˆë¦¬ìŠ¤íŠ¸ = [
            "ë””ë‚˜ë¥´", "ì—ë¦¬ê³¤", "ë„ë ˆì•Œ", "í¬ë¡œì…€", "ë£¨í˜ìŠ¤", "ë²¨", "ì‹œì—ë¥´", "ì„¸ë ˆìš°ìŠ¤", "ë²„ì•Œë² ë¦¬ìŠ¤", "ë°œë¼í¬",
            "ë¡œë…¸ë² ", "ìê°„", "ì•ˆë“œë¼ë©œë¦¬ìš°ìŠ¤", "ë‹ˆë² ë¡œìŠ¤", "ì—ì´ëª¬", "ë¼ì—ìŠ¤", "ì•„ë¼íƒ€ë°”", "ë°”í‹°ë°”ìŠ¤", "ì•„ëª¬", "ì•ˆë“œë¡œë§ë¦¬ìš°ìŠ¤",
            "ë°”í”¼ë©”íŠ¸", "ì˜¤ë¡œì´ì•„ìŠ¤", "ì˜¤ì„¸", "ì•„ë¯¸", "ë°ì¹´ë¸Œë¦¬ì•„", "ë²¨ë¦¬ì•Œ", "ë””ì¹´ë¦¬ë¸Œ", "ì„¸ì´ë¥´", "ì˜¤ë¡œë²„ìŠ¤", "ë¬´ë£¨ë¬´ë¥´",
            "ì¹´ì´ë¯¸", "ì•Œë¡œì„¸ìŠ¤", "ìƒ¤ë¥´ë‚˜í¬", "ìƒ¤í¬", "ì‚¬ë¸Œë‚™", "ë¼í•˜ë¸Œ", "ë§í¬ë¥´ìŠ¤", "í•˜ìš°ë ˆìŠ¤", "í”¼ë‹‰ìŠ¤", "ë¶€ì•Œ",
            "í‘¸ë¥´ì¹´ìŠ¤", "ê°€í”„", "ì•„ìŠ¤ëª¨ë°ìš°ìŠ¤", "í¬ë¥´ì¹´ìŠ¤", "ë³´ë½ìŠ¤", "ê¸€ë¼ì‹œì•„ë¼ë³¼ë¼ìŠ¤", "ë‚˜ë² ë¦¬ìš°ìŠ¤", "ì•„ì´ëª¬", "í”„ë£¨í‘¸ìŠ¤", "ì‚´ë¡œìŠ¤",
            "í•˜í”„ë¦¬", "í˜ë‹ˆì•…ìŠ¤", "ë‹¤ì´ëª¬", "ìŠ¤í‹¸", "ë§ˆë¥´ì½”ì‹œì•„ìŠ¤", "ë³´íŠ¸ìŠ¤", "ì œíŒŒë¥´", "ì—˜ë¦¬ê³ ìŠ¤", "ë ˆë¦¬ì–´", "ë² ë ˆíŠ¸",
            "ì‹œíŠ¸ë¦¬", "êµ¬ì‹œì˜¨", "ë¶€ì—ë¥´", "ì¹´ì„", "í¬ë¥´ë„¤ìš°ìŠ¤", "ë¶€ë„¤", "ì•„ëª¬", "ë§ˆë¼ë°”ìŠ¤", "í‘¸ë¥´ì†", "ë§íŒŒìŠ¤",
            "íŒŒì„", "ë°”ë¥´ë°”í† ìŠ¤", "ì•„ê°€ë ˆìŠ¤", "ë°”ì•Œ"
        ];

        function ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(num) {
            const ë¡œë§ˆ = ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV", "I"];
            const ê°’ = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];
            let ê²°ê³¼ = "";
            for (let i = 0; i < ê°’.length; i++) {
                while (num >= ê°’[i]) {
                    ê²°ê³¼ += ë¡œë§ˆ[i];
                    num -= ê°’[i];
                }
            }
            return ê²°ê³¼;
        }

        const ëª¬ìŠ¤í„°ìŠ¤íƒ¯í‘œ = {
            1: { ì²´ë ¥: 30, ë°©ì–´ë ¥: 1 },
            2: { ì²´ë ¥: 450, ë°©ì–´ë ¥: 15 },
            3: { ì²´ë ¥: 1300, ë°©ì–´ë ¥: 60 },
            4: { ì²´ë ¥: 2210, ë°©ì–´ë ¥: 96 },
            5: { ì²´ë ¥: 3757, ë°©ì–´ë ¥: 153 },
            6: { ì²´ë ¥: 6386, ë°©ì–´ë ¥: 244 },
            7: { ì²´ë ¥: 10856, ë°©ì–´ë ¥: 390 },
            8: { ì²´ë ¥: 18455, ë°©ì–´ë ¥: 624 },
            9: { ì²´ë ¥: 31373, ë°©ì–´ë ¥: 998 },
            10: { ì²´ë ¥: 53334, ë°©ì–´ë ¥: 1596 },
            11: { ì²´ë ¥: 90667, ë°©ì–´ë ¥: 2553 },
            12: { ì²´ë ¥: 154134, ë°©ì–´ë ¥: 4084 },
            13: { ì²´ë ¥: 262028, ë°©ì–´ë ¥: 6534 },
            14: { ì²´ë ¥: 445448, ë°©ì–´ë ¥: 10454 },
            15: { ì²´ë ¥: 757261, ë°©ì–´ë ¥: 16726 },
            16: { ì²´ë ¥: 1287343, ë°©ì–´ë ¥: 26761 },
            17: { ì²´ë ¥: 2188483, ë°©ì–´ë ¥: 42817 },
            18: { ì²´ë ¥: 3720421, ë°©ì–´ë ¥: 68499 },
            19: { ì²´ë ¥: 6324715, ë°©ì–´ë ¥: 109598 },
            20: { ì²´ë ¥: 10752015, ë°©ì–´ë ¥: 175357 }
        };


        function í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ì¸µ, ë²ˆí˜¸, ë“±ê¸‰ = "ì¼ë°˜") {
            const ì•…ë§ˆìˆ˜ = 72;

            const ê¸°ë³¸ = ëª¬ìŠ¤í„°ìŠ¤íƒ¯í‘œ[ì¸µ] || { ì²´ë ¥: 30, ë°©ì–´ë ¥: 1 }; // ë¯¸ì • ì¸µì€ ë³´ì •ì¹˜ë¡œ
            let ì²´ë ¥ê¸°ë³¸ = ê¸°ë³¸.ì²´ë ¥;
            let ë°©ì–´ê¸°ë³¸ = ê¸°ë³¸.ë°©ì–´ë ¥;

            // ğŸ”€ ìŠ¤íƒ¯ì— ëœë¤ 90%~110% ì ìš©
            const ì²´ë ¥ = Math.floor(ì²´ë ¥ê¸°ë³¸ * (Math.random() * 0.2 + 0.9));
            const ë°©ì–´ë ¥ = Math.floor(ë°©ì–´ê¸°ë³¸ * (Math.random() * 0.2 + 0.9));

            // ğŸ§© ë“±ê¸‰ ë³´ì •
            let ìµœì¢…ì²´ë ¥ = ì²´ë ¥;
            let ìµœì¢…ë°©ì–´ = ë°©ì–´ë ¥;
            switch (ë“±ê¸‰) {
                case "ë ˆì–´":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 1.2);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 1.2);
                    break;
                case "ì‹ í™”":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 1.5);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 1.5);
                    break;
                case "ê³ ëŒ€":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 1.9);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 1.9);
                    break;
                case "íƒœì´ˆ":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 2.4);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 2.4);
                    break;
                case "ê³µí—ˆ":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 3.0);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 3.0);
                    break;
            }

            return {
                ì¸µ,
                ë²ˆí˜¸,
                ì²´ë ¥: ìµœì¢…ì²´ë ¥,
                ë°©ì–´ë ¥: ìµœì¢…ë°©ì–´,
            };
        }

        function ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜() {
            return Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ || {}).reduce((a, b) => a + b, 0);
        }

        document.getElementById("íƒˆí‡´").addEventListener("click", function () {
            if (!uid) return alert("ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");

            if (confirm("ì •ë§ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.")) {
                í™”ë©´ì ê¸ˆ(); // âœ… íƒˆí‡´ ì¤‘ í™”ë©´ ì°¨ë‹¨

                const ì´ë©”ì¼ = auth.currentUser.email;
                const íƒˆí‡´í‚¤ = ì´ë©”ì¼.replace(/\./g, "_");

                db.ref("users/" + uid).remove().then(() => {
                    db.ref("íƒˆí‡´ì´ë©”ì¼/" + íƒˆí‡´í‚¤).set(true).then(() => {
                        auth.currentUser.delete().then(() => {
                            auth.signOut().then(() => {
                                localStorage.removeItem("ì„¸ì…˜í† í°");
                                í™”ë©´í•´ì œ(); // âœ… ì™„ì „ ì¢…ë£Œ í›„ í•´ì œ
                                location.reload();
                            });
                        });
                    });
                });
            }
        });

        function ë²„ë‹ìŠ¤í‚¬ë³´ì •() {
            const ë²„ë‹ìŠ¤í‚¬ë“¤ = [
                { ì´ë¦„: "ì¸í˜ë¥´ë…¸ ë²„ë‹", ë°°ìœ¨: 1.6 },
                { ì´ë¦„: "í”Œë ˆì„ ë²„ë‹", ë°°ìœ¨: 2.2 },
                { ì´ë¦„: "ë¸”ë ˆì´ì§• ë²„ë‹", ë°°ìœ¨: 2.8 },
                { ì´ë¦„: "í—¬íŒŒì´ì–´ ë²„ë‹", ë°°ìœ¨: 3.4 },
                { ì´ë¦„: "í”¼ë‹‰ìŠ¤ ë²„ë‹", ë°°ìœ¨: 4.0 },
            ];
            const ë²„ë‹ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["ë²„ë‹"] || 0;
            const í˜„ì¬HP = ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥;
            const ìµœëŒ€HP = ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥;
            if (í˜„ì¬HP > ìµœëŒ€HP * 0.5) return 1;

            let ëˆ„ì ë°°ìœ¨ = 0;

            for (let i = 0; i < ë²„ë‹ìŠ¤í‚¬ë“¤.length; i++) {
                const ì‹œì‘ = i * 10;
                const í˜„ì¬ë ˆë²¨ = Math.max(0, Math.min(ë²„ë‹ë ˆë²¨ - ì‹œì‘, 10));
                if (í˜„ì¬ë ˆë²¨ <= 0) break;

                const í™•ë¥  = í˜„ì¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ë ˆë²¨ * 0.1;
                if (Math.random() < í™•ë¥ ) {
                    ëˆ„ì ë°°ìœ¨ += (ë²„ë‹ìŠ¤í‚¬ë“¤[i].ë°°ìœ¨ - 1);
                } else break;
            }

            return 1 + ëˆ„ì ë°°ìœ¨;
        }

        function ê³µê²©í•˜ê¸°() {
            if (í˜„ì¬ì•…ë§ˆì²´ë ¥ <= 0 || ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ <= 0) {
                í™”ë©´í•´ì œ(); // ğŸ’¡ ì´ ì¤„ ì¶”ê°€
                return;
            }
            í™”ë©´ì ê¸ˆ();

            const ì•„ì´ì–¸ë°”ë””ìŠ¤í‚¬ë“¤ = [
                { ì´ë¦„: "ìŠ¤í†¤ ì•„ì´ì–¸ë°”ë””", ì²´ë ¥: 5 },
                { ì´ë¦„: "ìŠ¤í‹¸ ì•„ì´ì–¸ë°”ë””", ì²´ë ¥: 10 },
                { ì´ë¦„: "í‹°íƒ„ ì•„ì´ì–¸ë°”ë””", ì²´ë ¥: 15 },
                { ì´ë¦„: "í”Œë ˆì´íŠ¸ ì•„ì´ì–¸ë°”ë””", ì²´ë ¥: 20 },
                { ì´ë¦„: "ë¯¸ìŠ¤ë¦´ ì•„ì´ì–¸ë°”ë””", ì²´ë ¥: 25 },
            ];
            const ì•„ì´ì–¸ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["ì•„ì´ì–¸ë°”ë””"] || 0;
            let ì¶”ê°€ì²´ë ¥ = 0;
            for (let i = 0; i < ì•„ì´ì–¸ë°”ë””ìŠ¤í‚¬ë“¤.length; i++) {
                const ì‹œì‘ = i * 10;
                const í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ = Math.max(0, Math.min(ì•„ì´ì–¸ë ˆë²¨ - ì‹œì‘, 10));
                if (í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ <= 0) break;

                const í™•ë¥  = í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ * 0.1;
                if (Math.random() < í™•ë¥ ) {
                    ì¶”ê°€ì²´ë ¥ += ì•„ì´ì–¸ë°”ë””ìŠ¤í‚¬ë“¤[i].ì²´ë ¥;
                } else break;
            }
            ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = Math.min(ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥, ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ + ì¶”ê°€ì²´ë ¥);
            if (ì¶”ê°€ì²´ë ¥ > 0) {
                ë©”ì‹œì§€í‘œì‹œ(ìœ ì €í…Œë‘ë¦¬ì•ˆí‘œì‹œ, `${ì•„ì´ì–¸ë°”ë””ì•„ì´ì½˜}`, `+${ì¶”ê°€ì²´ë ¥}`, "#00ffff");
            }



            // âœ… ëª¬ìŠ¤í„° ì´ë¦„ ì¼ê´€ì„± ìˆê²Œ ì¶”ì¶œ
            const ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆ;
            const ì•…ë§ˆì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];
            const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
            const ëª¬ìŠ¤í„°ì´ë¦„ = `${ë¡œë§ˆë²ˆí˜¸}. ${ì•…ë§ˆì´ë¦„}`;
            const ì „íˆ¬ì¤‘ëª¬ìŠ¤í„°ì´ë¦„ = í˜„ì¬ëª¬ìŠ¤í„°ì´ë¦„;
            const ì „íˆ¬ì¤‘ëª¬ìŠ¤í„°ë“±ê¸‰ = í˜„ì¬ëª¬ìŠ¤í„°ë“±ê¸‰;

            let ì•…ë§ˆHP = ì•…ë§ˆ.ì²´ë ¥;
            let ìœ ì €HP = ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥;
            let ì „íˆ¬ê²°ê³¼ = null;

            while (ì•…ë§ˆHP > 0 && ìœ ì €HP > 0) {
                const ìœ ì €ê³µ = ìœ ì €ë°ì´í„°.ê³µê²©ë ¥;
                const ë°©ì–´ = ì•…ë§ˆ.ë°©ì–´ë ¥;
                const ëœë¤ = Math.random() * 0.2 + 0.8;

                let ê¸°ë³¸ê³µê²© = Math.max(0, ìœ ì €ê³µ - ë°©ì–´);
                let ë°ë¯¸ì§€ = Math.floor(ê¸°ë³¸ê³µê²© * ëœë¤);

                const í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ë“¤ = [
                    { ì´ë¦„: "ì•ŒíŒŒ í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 1.2 },
                    { ì´ë¦„: "ë² íƒ€ í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 1.4 },
                    { ì´ë¦„: "ê°ë§ˆ í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 1.6 },
                    { ì´ë¦„: "ë¸íƒ€ í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 1.8 },
                    { ì´ë¦„: "ì—¡ì‹¤ë¡  í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 2.0 },
                    { ì´ë¦„: "ì œíƒ€ í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 2.2 },
                    { ì´ë¦„: "ì—íƒ€ í¬ë¦¬í‹°ì»¬", ë°°ìœ¨: 2.4 },
                ];

                const í¬ë¦¬í‹°ì»¬ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["í¬ë¦¬í‹°ì»¬"] || 0;
                let í¬ë¦¬í‹°ì»¬ë°°ìœ¨ = 1;
                let ìµœì¢…í¬ë¦¬ = null;

                for (let i = 0; i < í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ë“¤.length; i++) {
                    const ì‹œì‘ = i * 10;
                    const í˜„ì¬ë ˆë²¨ = Math.max(0, Math.min(í¬ë¦¬í‹°ì»¬ë ˆë²¨ - ì‹œì‘, 10));
                    if (í˜„ì¬ë ˆë²¨ <= 0) break;

                    const í™•ë¥  = í˜„ì¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ë ˆë²¨ * 0.1;
                    if (Math.random() < í™•ë¥ ) {
                        í¬ë¦¬í‹°ì»¬ë°°ìœ¨ += (í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ë“¤[i].ë°°ìœ¨ - 1);
                        ìµœì¢…í¬ë¦¬ = í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ë“¤[i].ì´ë¦„;
                    } else break;
                    if (ìµœì¢…í¬ë¦¬) {
                        ë©”ì‹œì§€í‘œì‹œ(ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ, `${í¬ë¦¬í‹°ì»¬ì•„ì´ì½˜}`, "", ìƒ‰ìƒë§µ["ë¹¨"]);
                    }
                }


                ë°ë¯¸ì§€ = Math.floor(ë°ë¯¸ì§€ * í¬ë¦¬í‹°ì»¬ë°°ìœ¨);





                // âœ… ë²„ì„œì»¤ ê³„ì—´ ìë™ ì ìš©
                const ë²„ì„œì»¤ìŠ¤í‚¬ë“¤ = [
                    { ì´ë¦„: "ì•µê±° ë²„ì„œì»¤", ì†Œëª¨: 1, ë°°ìœ¨: 0.4 },
                    { ì´ë¦„: "ë ˆì´ì§€ ë²„ì„œì»¤", ì†Œëª¨: 2, ë°°ìœ¨: 0.8 },
                    { ì´ë¦„: "í”„ë Œì§€ ë²„ì„œì»¤", ì†Œëª¨: 3, ë°°ìœ¨: 1.2 },
                    { ì´ë¦„: "ë§¤ë“œë‹ˆìŠ¤ ë²„ì„œì»¤", ì†Œëª¨: 4, ë°°ìœ¨: 1.6 },
                    { ì´ë¦„: "í•˜ìš¸ ë²„ì„œì»¤", ì†Œëª¨: 5, ë°°ìœ¨: 2.0 },
                    { ì´ë¦„: "ìƒˆë¹„ì§€ ë²„ì„œì»¤", ì†Œëª¨: 6, ë°°ìœ¨: 2.4 },
                    { ì´ë¦„: "ë¸”ëŸ¬ë“œ ë²„ì„œì»¤", ì†Œëª¨: 7, ë°°ìœ¨: 2.8 },
                    { ì´ë¦„: "ì¹´ì˜¤ìŠ¤ ë²„ì„œì»¤", ì†Œëª¨: 8, ë°°ìœ¨: 3.2 },
                    // { ì´ë¦„: "ë°ìŠ¤ ë²„ì„œì»¤", ì†Œëª¨: 9, ë°°ìœ¨: 3.6 },
                    // { ì´ë¦„: "ë£¨ë‚˜í‹± ë²„ì„œì»¤", ì†Œëª¨: 10, ë°°ìœ¨: 4.0 },
                ];
                const ë²„ì„œì»¤ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["ë²„ì„œì»¤"] || 0;

                let ë²„ì„œì»¤ë°°ìœ¨ = 1;
                let ì¶”ê°€ì²´ë ¥ì†Œëª¨ = 0;
                let ìµœì¢…ë°œë™ = null;

                for (let i = 0; i < ë²„ì„œì»¤ìŠ¤í‚¬ë“¤.length; i++) {
                    const ì‹œì‘ = i * 10;
                    const ë = ì‹œì‘ + 10;
                    const í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ = Math.max(0, Math.min(ë²„ì„œì»¤ë ˆë²¨ - ì‹œì‘, 10));

                    if (í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ <= 0) break;

                    const í™•ë¥  = í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ * 0.1;
                    if (Math.random() < í™•ë¥ ) {
                        ë²„ì„œì»¤ë°°ìœ¨ += ë²„ì„œì»¤ìŠ¤í‚¬ë“¤[i].ë°°ìœ¨;
                        ì¶”ê°€ì²´ë ¥ì†Œëª¨ += ë²„ì„œì»¤ìŠ¤í‚¬ë“¤[i].ì†Œëª¨;
                        ìµœì¢…ë°œë™ = ë²„ì„œì»¤ìŠ¤í‚¬ë“¤[i].ì´ë¦„;
                    } else {
                        break; // ì´ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í•˜ë©´ ì´í›„ ìŠ¤í‚¬ì€ ê±´ë„ˆëœ€
                    }

                    if (ìµœì¢…ë°œë™) {
                        ë©”ì‹œì§€í‘œì‹œ(ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ, `${ë²„ì„œì»¤ì•„ì´ì½˜}`, "", ìƒ‰ìƒë§µ["ì£¼"]);
                    }
                }

                ë°ë¯¸ì§€ = Math.floor(ë°ë¯¸ì§€ * ë²„ì„œì»¤ë°°ìœ¨);

                ìœ ì €HP = Math.max(0, ìœ ì €HP - (1 + ì¶”ê°€ì²´ë ¥ì†Œëª¨));

                ì•…ë§ˆHP -= ë°ë¯¸ì§€;
            }

            ì „íˆ¬ê²°ê³¼ = (ìœ ì €HP <= 0) ? "íŒ¨ë°°" : "ìŠ¹ë¦¬";

            if (ì „íˆ¬ê²°ê³¼ === "íŒ¨ë°°") {
                // âœ… í›„í‡´ ì²˜ë¦¬
                ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥;

                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;
                // ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µì€ ê·¸ëŒ€ë¡œ
                delete ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°;
                db.ref("users/" + uid).update({
                    ê²½í—˜ì¹˜: ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜,
                    ê³¨ë“œ: ìœ ì €ë°ì´í„°.ê³¨ë“œ,
                    ìˆ™ë ¨ë„: ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„,
                    ë‚¨ì€ì²´ë ¥: ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥,
                    í˜„ì¬ì¸µ: ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ,
                    í˜„ì¬ì•…ë§ˆë²ˆí˜¸: ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸,
                    ë ˆë²¨: ìœ ì €ë°ì´í„°.ë ˆë²¨,
                    ê³µê²©ë ¥: ìœ ì €ë°ì´í„°.ê³µê²©ë ¥,
                    ìµœëŒ€ì²´ë ¥: ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥
                }).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°();

                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "ìŠ¹ë¦¬";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#00c851";
                    document.getElementById("íšë“ë¡œê·¸").style.color = "#00c851";
                    document.getElementById("íšë“ë¡œê·¸").innerText =
                        `${ë³´ìƒ.ê²½í—˜ì¹˜} EXP, ${ë³´ìƒ.ê³¨ë“œ} Gold, ${ë³´ìƒ.ìˆ™ë ¨ë„} ìˆ™ë ¨ë„ íšë“`;
                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = `+${ë³´ìƒ.ê²½í—˜ì¹˜}`;
                    document.getElementById("íšë“ê³¨ë“œ").innerText = `+${ë³´ìƒ.ê³¨ë“œ}`;
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = `+${ë³´ìƒ.ìˆ™ë ¨ë„}`;
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText =
                        (ìƒˆë ˆë²¨ > ì´ì „ë ˆë²¨) ? "ë ˆë²¨ì—…!" : "";

                    í™”ë©´í•´ì œ();
                });

            } else {
                ìœ ì €HP = Math.min(ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥, ìœ ì €HP);

                // âœ… ë“œë ˆì¸ ê³„ì—´ ì²´ë ¥ íšŒë³µ (ìŠ¹ë¦¬ ì‹œ)
                const ë“œë ˆì¸ìŠ¤í‚¬ë“¤ = [
                    { ì´ë¦„: "ê¸°ê°€ ë“œë ˆì¸", íšŒë³µ: 1 },
                    { ì´ë¦„: "í…Œë¼ ë“œë ˆì¸", íšŒë³µ: 2 },
                    { ì´ë¦„: "í˜íƒ€ ë“œë ˆì¸", íšŒë³µ: 3 },
                    { ì´ë¦„: "ì—‘ì‚¬ ë“œë ˆì¸", íšŒë³µ: 4 },
                    { ì´ë¦„: "ì œíƒ€ ë“œë ˆì¸", íšŒë³µ: 5 },
                    { ì´ë¦„: "ìš”íƒ€ ë“œë ˆì¸", íšŒë³µ: 6 },
                    { ì´ë¦„: "ë¡œë‚˜ ë“œë ˆì¸", íšŒë³µ: 7 },
                    { ì´ë¦„: "ì¿¼ì¹´ ë“œë ˆì¸", íšŒë³µ: 8 },
                ];

                const ë“œë ˆì¸ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["ë“œë ˆì¸"] || 0;
                let íšŒë³µëŸ‰ = 0;
                let ìµœì¢…ë°œë™ = null;
                for (let i = 0; i < ë“œë ˆì¸ìŠ¤í‚¬ë“¤.length; i++) {
                    const ì‹œì‘ = i * 10;
                    const ë = ì‹œì‘ + 10;
                    const í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ = Math.max(0, Math.min(ë“œë ˆì¸ë ˆë²¨ - ì‹œì‘, 10));

                    if (í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ <= 0) break;

                    const í™•ë¥  = í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ * 0.1;
                    if (Math.random() < í™•ë¥ ) {
                        íšŒë³µëŸ‰ += ë“œë ˆì¸ìŠ¤í‚¬ë“¤[i].íšŒë³µ;
                        ìµœì¢…ë°œë™ = ë“œë ˆì¸ìŠ¤í‚¬ë“¤[i].ì´ë¦„;
                    } else {
                        break; // ì´ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í•˜ë©´ ì´í›„ ìŠ¤í‚¬ì€ ê±´ë„ˆëœ€
                    }
                }

                ìœ ì €HP = Math.min(ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥, ìœ ì €HP + íšŒë³µëŸ‰);
                if (íšŒë³µëŸ‰ > 0) {
                    ë©”ì‹œì§€í‘œì‹œ(ìœ ì €í…Œë‘ë¦¬ì•ˆí‘œì‹œ, `${ë“œë ˆì¸ì•„ì´ì½˜}`, `+${íšŒë³µëŸ‰}`, "#ffff00");

                }
                const ë³´ìƒ = ë³´ìƒíšë“(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ);
                const ì´ì „ë ˆë²¨ = ìœ ì €ë°ì´í„°.ë ˆë²¨;

                // âœ… ì¸ì‚¬ì´íŠ¸ ê³„ì—´ ìˆ™ë ¨ë„ ë³´ìƒ ì¦ê°€
                const ì¸ì‚¬ì´íŠ¸ìŠ¤í‚¬ = [
                    { ì´ë¦„: "ë§ˆì´í¬ë¡œ ì¸ì‚¬ì´íŠ¸", ì¶”ê°€: 1 },
                    { ì´ë¦„: "ë‚˜ë…¸ ì¸ì‚¬ì´íŠ¸", ì¶”ê°€: 2 },
                ];
                const ì¸ì‚¬ì´íŠ¸ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["ì¸ì‚¬ì´íŠ¸"] || 0;

                let ìˆ™ë ¨ë„ì¶”ê°€ = 0;
                for (let i = 0; i < ì¸ì‚¬ì´íŠ¸ìŠ¤í‚¬.length; i++) {
                    const ì‹œì‘ = i * 10;
                    const ë = ì‹œì‘ + 10;
                    const í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ = Math.max(0, Math.min(ì¸ì‚¬ì´íŠ¸ë ˆë²¨ - ì‹œì‘, 10));

                    if (í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ <= 0) break;

                    const í™•ë¥  = í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ * 0.1;
                    if (Math.random() < í™•ë¥ ) {
                        ìˆ™ë ¨ë„ì¶”ê°€ += ì¸ì‚¬ì´íŠ¸ìŠ¤í‚¬[i].ì¶”ê°€;
                    } else {
                        break; // ì´ ë‹¨ê³„ì—ì„œ ì‹¤íŒ¨í•˜ë©´ ì´í›„ ìŠ¤í‚¬ì€ ê±´ë„ˆëœ€
                    }
                }

                let ê¸°ì¡´ê³¨ë“œ = ë³´ìƒ.ê³¨ë“œ;
                let ìµœì¢…ê³¨ë“œ = Math.floor(ë³´ìƒ.ê³¨ë“œ * ë°œêµ´ìŠ¤í‚¬ë³´ì •());
                if (ìµœì¢…ê³¨ë“œ - ê¸°ì¡´ê³¨ë“œ > 0) {
                    ë©”ì‹œì§€í‘œì‹œ(ê³¨ë“œí…Œë‘ë¦¬ì•ˆí‘œì‹œ, `${ë°œêµ´ì•„ì´ì½˜}`, `+${ìµœì¢…ê³¨ë“œ - ê¸°ì¡´ê³¨ë“œ}`, "#8000ff");

                }

                ë³´ìƒ.ìˆ™ë ¨ë„ += ìˆ™ë ¨ë„ì¶”ê°€;
                const ê³¨ë“œë°°ìœ¨ = ë°œêµ´ìŠ¤í‚¬ë³´ì •();
                ë³´ìƒ.ê³¨ë“œ = Math.floor(ë³´ìƒ.ê³¨ë“œ * ë°œêµ´ìŠ¤í‚¬ë³´ì •());

                ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = ìœ ì €HP;
                ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ += ë³´ìƒ.ê²½í—˜ì¹˜;
                ìœ ì €ë°ì´í„°.ê³¨ë“œ += ë³´ìƒ.ê³¨ë“œ;
                ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += ë³´ìƒ.ìˆ™ë ¨ë„;
                if (ìˆ™ë ¨ë„ì¶”ê°€ > 0) {
                    ë©”ì‹œì§€í‘œì‹œ(ìˆ™ë ¨ë„í…Œë‘ë¦¬ì•ˆí‘œì‹œ, `${ì¸ì‚¬ì´íŠ¸ì•„ì´ì½˜}`, `+${ìˆ™ë ¨ë„ì¶”ê°€}`, "#80ff00");

                }

                const ìƒˆë ˆë²¨ = Math.floor(ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ / 1000) + 1;
                if (ìƒˆë ˆë²¨ > ì´ì „ë ˆë²¨) {
                    const ì¦ê°€ëŸ‰ = ìƒˆë ˆë²¨ - ì´ì „ë ˆë²¨;
                    ìœ ì €ë°ì´í„°.ë ˆë²¨ = ìƒˆë ˆë²¨;
                    ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ì¦ê°€ëŸ‰ * 1;
                    ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥;
                }

                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;

                // âœ… ê°•ë¦¼ëª¬ìŠ¤í„° ë“œëí…œ ì²˜ë¦¬
                if (ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°) {
                    ì¥ë¹„ë“œëì‹œë„(ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°.ë“±ê¸‰);
                } else {
                    ì¥ë¹„ë“œëì‹œë„("ì¼ë°˜");
                }



                delete ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°;

                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°();

                    // âœ… ìŠ¹ë¦¬ UI ì¶œë ¥
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "ìŠ¹ë¦¬";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#00c851";
                    document.getElementById("íšë“ë¡œê·¸").style.color = "#00c851";
                    document.getElementById("íšë“ë¡œê·¸").innerText =
                        `${ë³´ìƒ.ê²½í—˜ì¹˜} EXP, ${ë³´ìƒ.ê³¨ë“œ} Gold, ${ë³´ìƒ.ìˆ™ë ¨ë„} ìˆ™ë ¨ë„ íšë“`;
                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = `+${ë³´ìƒ.ê²½í—˜ì¹˜}`;
                    document.getElementById("íšë“ê³¨ë“œ").innerText = `+${ë³´ìƒ.ê³¨ë“œ}`;
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = `+${ë³´ìƒ.ìˆ™ë ¨ë„}`;
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText =
                        (ìƒˆë ˆë²¨ > ì´ì „ë ˆë²¨) ? "ë ˆë²¨ì—…!" : "";

                    // ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°(`${ì „íˆ¬ì¤‘ëª¬ìŠ¤í„°ì´ë¦„} ì²˜ì¹˜!`);
                    í™”ë©´í•´ì œ();
                });
            }
        }

        document.getElementById("ì•„ë˜ì¸µìœ¼ë¡œ").addEventListener("click", () => {
            if (ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ > 1) {
                ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ -= 1;
                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;
                ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = null; // âœ… ê°•ë¦¼ ìƒíƒœ ì´ˆê¸°í™”
                ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
            }
        });

        const ë§ˆë²•ì§„ = `
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
    <circle cx="12" cy="12" r="10"/>
    <path d="m14.31 8 5.74 9.94"/>
    <path d="M9.69 8h11.48"/>
    <path d="m7.38 12 5.74-9.94"/>
    <path d="M9.69 16 3.95 6.06"/>
    <path d="M14.31 16H2.83"/>
    <path d="m16.62 12-5.74 9.94"/>
</svg>
`;

        const í¬ë¦¬í‹°ì»¬ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-axe-icon lucide-axe"><path d="m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"/><path d="M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"/></svg>`;
        const ë²„ì„œì»¤ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>`;
        const ë“œë ˆì¸ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplet-icon lucide-droplet"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></svg>`;
        const ì¸ì‚¬ì´íŠ¸ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-diamond-plus-icon lucide-diamond-plus"><path d="M12 8v8"/><path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"/><path d="M8 12h8"/></svg>`;
        const ì•„ì´ì–¸ë°”ë””ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-biceps-flexed-icon lucide-biceps-flexed"><path d="M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1"/><path d="M15 14a5 5 0 0 0-7.584 2"/><path d="M9.964 6.825C8.019 7.977 9.5 13 8 15"/></svg>`;
        const í€µë‹ˆìŠ¤ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history-icon lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>`;
        const ë°œêµ´ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gem-icon lucide-gem"><path d="M6 3h12l4 6-10 13L2 9Z"/><path d="M11 3 8 9l4 13 4-13-3-6"/><path d="M2 9h20"/></svg>`;
        const ë¨¸ë‹ˆì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-coins-icon lucide-coins"><circle cx="8" cy="8" r="6"/><path d="M18.09 10.37A6 6 0 1 1 10.34 18"/><path d="M7 6h1v4"/><path d="m16.71 13.88.7.71-2.82 2.82"/></svg>`;
        const ì„±ê³µì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-party-popper-icon lucide-party-popper"><path d="M5.8 11.3 2 22l10.7-3.79"/><path d="M4 3h.01"/><path d="M22 8h.01"/><path d="M15 2h.01"/><path d="M22 20h.01"/><path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"/><path d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17"/><path d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7"/><path d="M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"/></svg>`;
        const ì‹¤íŒ¨ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ban-icon lucide-ban"><circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/></svg>`;
        const ë§ˆìŠ¤í„°ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-graduation-cap-icon lucide-graduation-cap"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"/><path d="M22 10v6"/><path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5"/></svg>`;
        const ë²„ë‹ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-battery-charging-icon lucide-battery-charging"><path d="M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/><path d="M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"/><path d="m11 7-3 5h4l-3 5"/><line x1="22" x2="22" y1="11" y2="13"/></svg>`;


        document.getElementById("ìœ„ì¸µìœ¼ë¡œ").addEventListener("click", () => {
            if (ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ >= 20) {
                ë©”ì‹œì§€í‘œì‹œ(ì¸µì¡°ì ˆ, ë§ˆë²•ì§„, "ë§ˆë²•ì§„ì´ ê°€ë¡œë§‰ê³  ìˆìŠµë‹ˆë‹¤", "white");
                return;
            }
            ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ += 1;
            ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;
            ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = null; // âœ… ê°•ë¦¼ ìƒíƒœ ì´ˆê¸°í™”
            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
        });


        function ë©”ì‹œì§€í‘œì‹œ(ëŒ€ìƒ, ì•„ì´ì½˜HTML, í…ìŠ¤íŠ¸, ê¸€ììƒ‰) {
            // const ëŒ€ìƒ = document.getElementById("ì¸µì¡°ì ˆ");
            const rect = ëŒ€ìƒ.getBoundingClientRect();

            const el = document.createElement("div");
            el.innerHTML = `
        ${ì•„ì´ì½˜HTML}<span>${í…ìŠ¤íŠ¸}</span>
    `;
            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = ê¸€ììƒ‰;
            // el.style.background = ;
            el.style.padding = "8px 12px";
            el.style.borderRadius = "8px";
            // el.style.background = "rgba(0,0,0,0.7)";
            el.style.fontWeight = "bold";
            el.style.zIndex = 9999;
            el.style.pointerEvents = "none";
            el.style.animation = "fadeOut 2s ease-out forwards";
            el.style.whiteSpace = "nowrap";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        function ë³´ìƒíšë“(ì¸µ) {
            const ê²½í—˜ì¹˜ = Math.floor(ì¸µ * 1);
            const ê³¨ë“œ = Math.floor(Math.random() * 100) + ì¸µ * 100;
            const ìˆ™ë ¨ë„ = Math.floor(ì¸µ * 1); // ì˜ˆ: ì¸µë‹¹ 1 ì¦ê°€

            return { ê²½í—˜ì¹˜, ê³¨ë“œ, ìˆ™ë ¨ë„ };
        }


        window.addEventListener("DOMContentLoaded", function () {
            document.getElementById("ê³µê²©ë²„íŠ¼").addEventListener("click", ê³µê²©í•˜ê¸°);

            const ë“œëë¡œê·¸ëª©ë¡ = [];
            const ì±„íŒ…ë¡œê·¸ëª©ë¡ = [];
            const ì´ë¯¸í‘œì‹œí•œì‹œê° = new Set();

            function ë¡œê·¸ì—…ë°ì´íŠ¸() {
                const ë“œëë°•ìŠ¤ = document.getElementById("ë“œëë¡œê·¸ë°•ìŠ¤");
                const ì±„íŒ…ë°•ìŠ¤ = document.getElementById("ì±„íŒ…ë¡œê·¸ë°•ìŠ¤");

                ë“œëë°•ìŠ¤.innerHTML = "";
                ì±„íŒ…ë°•ìŠ¤.innerHTML = "";

                ë“œëë¡œê·¸ëª©ë¡.slice(-20).forEach(í•­ëª© => {
                    const ì¤„ = document.createElement("div");
                    ì¤„.innerText = í•­ëª©.ë¡œê·¸ || `[${í•­ëª©.ì•„ì´ë””}] ${í•­ëª©.ì´ë¦„} (ê³µê²©ë ¥ +${í•­ëª©.ê³µê²©ë ¥}) ë“œë!`;
                    ì¤„.style.color = ìƒ‰ìƒë§µ[í•­ëª©.ë“±ê¸‰] || "white";
                    ë“œëë°•ìŠ¤.appendChild(ì¤„);
                });

                ì±„íŒ…ë¡œê·¸ëª©ë¡.slice(-20).forEach(í•­ëª© => {
                    const ì¤„ = document.createElement("div");
                    ì¤„.innerText = `[${í•­ëª©.ì•„ì´ë””}] ${í•­ëª©.ë‚´ìš©}`;
                    ì¤„.style.color = "#aaa";
                    ì±„íŒ…ë°•ìŠ¤.appendChild(ì¤„);
                });
            }

            // ğŸ”¹ ì´ˆê¸° ë¡œë”©
            Promise.all([
                db.ref("ë“œëë¡œê·¸").limitToLast(20).once("value"),
                db.ref("ì±„íŒ…").limitToLast(20).once("value")
            ]).then(([ë“œëìŠ¤ëƒ…, ì±„íŒ…ìŠ¤ëƒ…]) => {
                ë“œëìŠ¤ëƒ….forEach(child => {
                    const d = child.val();
                    if (d.ì‹œê°) ì´ë¯¸í‘œì‹œí•œì‹œê°.add(d.ì‹œê°);
                    ë“œëë¡œê·¸ëª©ë¡.push(d);
                });

                ì±„íŒ…ìŠ¤ëƒ….forEach(child => {
                    const c = child.val();
                    if (c.ì‹œê°) ì´ë¯¸í‘œì‹œí•œì‹œê°.add(c.ì‹œê°);
                    ì±„íŒ…ë¡œê·¸ëª©ë¡.push(c);
                });

                ë¡œê·¸ì—…ë°ì´íŠ¸();
            });

            // ğŸ”¹ ì‹¤ì‹œê°„ ì±„íŒ…
            db.ref("ì±„íŒ…").limitToLast(1).on("child_added", (snapshot) => {
                const c = snapshot.val();
                if (ì´ë¯¸í‘œì‹œí•œì‹œê°.has(c.ì‹œê°)) return;
                ì´ë¯¸í‘œì‹œí•œì‹œê°.add(c.ì‹œê°);
                ì±„íŒ…ë¡œê·¸ëª©ë¡.push(c);
                ë¡œê·¸ì—…ë°ì´íŠ¸();
            });

            // ğŸ”¹ ì‹¤ì‹œê°„ ë“œëë¡œê·¸
            db.ref("ë“œëë¡œê·¸").limitToLast(1).on("child_added", (snapshot) => {
                const d = snapshot.val();
                if (ì´ë¯¸í‘œì‹œí•œì‹œê°.has(d.ì‹œê°)) return;
                ì´ë¯¸í‘œì‹œí•œì‹œê°.add(d.ì‹œê°);

                db.ref("users").orderByChild("ì•„ì´ë””").equalTo(d.ì•„ì´ë””).once("value").then(userSnap => {
                    let í—ˆìš© = true;
                    if (!d.ì•„ì´ë”” || d.ì•„ì´ë””.trim() === "") í—ˆìš© = false;

                    userSnap.forEach(child => {
                        const ìœ ì € = child.val();
                        const ìƒì„±ì‹œê° = new Date(ìœ ì €?.ìƒì„±ì‹œê°).getTime();
                        if (!isNaN(ìƒì„±ì‹œê°) && ìƒì„±ì‹œê° < ê¸°ì¤€ì‹œê°) í—ˆìš© = false;
                    });

                    if (í—ˆìš©) {
                        ë“œëë¡œê·¸ëª©ë¡.push(d);
                        ë¡œê·¸ì—…ë°ì´íŠ¸();
                    }
                });
            });
        });



        function ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°(text) {
            const ëŒ€ìƒ = document.querySelector(".ëª¬ìŠ¤í„°í…Œë‘ë¦¬");
            if (!ëŒ€ìƒ) return;

            const rect = ëŒ€ìƒ.getBoundingClientRect();

            const el = document.createElement("div");
            el.innerText = text;
            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = "#b0b0b0";
            el.style.background = "rgba(0, 0, 0, 0.8)";
            el.style.padding = "10px 20px";
            el.style.border = "2px solid #2e2e2e";
            el.style.borderRadius = "12px";
            el.style.fontWeight = "bold";
            el.style.fontSize = "14px";
            el.style.pointerEvents = "none";
            el.style.zIndex = "9999";
            el.style.whiteSpace = "nowrap";
            el.style.animation = "fadeOut 2s ease-in-out forwards";
            el.style.boxShadow = "0 0 20px rgba(234, 0, 255, 0.6)";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        function ìë™ì‚¬ëƒ¥í† ê¸€() {
            const ë²„íŠ¼ = document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼");

            if (!ìë™ì‚¬ëƒ¥ì¤‘) {
                ìë™ì‚¬ëƒ¥ì¤‘ = true;
                ë²„íŠ¼.innerText = "ğŸ›‘ ìë™ì¤‘ì§€";
                ë²„íŠ¼.style.color = "red";

                const ë°˜ë³µ = () => {
                    if (!ìë™ì‚¬ëƒ¥ì¤‘ || ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ <= 0) return;

                    const ê¸°ë³¸ë”œë ˆì´ = 1000;
                    const ë”œë ˆì´ë³´ì • = í€µë‹ˆìŠ¤ë”œë ˆì´ë³´ì •();
                    const ì‹¤ì œë”œë ˆì´ = Math.max(500, ê¸°ë³¸ë”œë ˆì´ - ë”œë ˆì´ë³´ì •);

                    if (ì‹¤ì œë”œë ˆì´ !== 1000) {
                        ë©”ì‹œì§€í‘œì‹œ(ìë™ì‚¬ëƒ¥ë²„íŠ¼, `${í€µë‹ˆìŠ¤ì•„ì´ì½˜}`, "", ìƒ‰ìƒë§µ["ë‚¨"]);
                    }

                    ê³µê²©í•˜ê¸°();
                    ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = setTimeout(ë°˜ë³µ, ì‹¤ì œë”œë ˆì´);
                };

                setTimeout(ë°˜ë³µ, 1000);
            } else {
                ìë™ì‚¬ëƒ¥ì¤‘ì§€();
            }
        }

        function í€µë‹ˆìŠ¤ë”œë ˆì´ë³´ì •() {
            const í€µë‹ˆìŠ¤ìŠ¤í‚¬ë“¤ = [
                { ì´ë¦„: "í„°ë³´ í€µë‹ˆìŠ¤", ê°ì†Œ: 20 },
                { ì´ë¦„: "í•˜ì´í¼ í€µë‹ˆìŠ¤", ê°ì†Œ: 40 },
                { ì´ë¦„: "í”Œë˜ì‹œ í€µë‹ˆìŠ¤", ê°ì†Œ: 60 },
                { ì´ë¦„: "ìŠ¤ìœ„í”„íŠ¸ í€µë‹ˆìŠ¤", ê°ì†Œ: 80 },
                { ì´ë¦„: "ì œíŠ¸ í€µë‹ˆìŠ¤", ê°ì†Œ: 100 },
            ];
            const í€µë‹ˆìŠ¤ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["í€µë‹ˆìŠ¤"] || 0;

            let ëˆ„ì ê°ì†Œ = 0;
            for (let i = 0; i < í€µë‹ˆìŠ¤ìŠ¤í‚¬ë“¤.length; i++) {
                const ì‹œì‘ = i * 10;
                const í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ = Math.max(0, Math.min(í€µë‹ˆìŠ¤ë ˆë²¨ - ì‹œì‘, 10));
                if (í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ <= 0) break;

                const í™•ë¥  = í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ìŠ¤í‚¬ë ˆë²¨ * 0.1;
                if (Math.random() < í™•ë¥ ) {
                    ëˆ„ì ê°ì†Œ += í€µë‹ˆìŠ¤ìŠ¤í‚¬ë“¤[i].ê°ì†Œ;
                } else {
                    break;
                }
            }
            return ëˆ„ì ê°ì†Œ;
        }

        function ë°œêµ´ìŠ¤í‚¬ë³´ì •() {
            const ë°œêµ´ìŠ¤í‚¬ë“¤ = [
                { ì´ë¦„: "ë£¨ë¹„ ë°œêµ´", ì¦ê°€: 0.2 },
                { ì´ë¦„: "ì‚¬íŒŒì´ì–´ ë°œêµ´", ì¦ê°€: 0.4 },
                { ì´ë¦„: "ì—ë©”ë„ë“œ ë°œêµ´", ì¦ê°€: 0.6 },
                { ì´ë¦„: "ë‹¤ì´ì•„ëª¬ë“œ ë°œêµ´", ì¦ê°€: 0.8 },
                { ì´ë¦„: "í† íŒŒì¦ˆ ë°œêµ´", ì¦ê°€: 1.0 },
            ];
            const ë°œêµ´ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.["ë°œêµ´"] || 0;

            let ëˆ„ì ë°°ìœ¨ = 0;
            for (let i = 0; i < ë°œêµ´ìŠ¤í‚¬ë“¤.length; i++) {
                const ì‹œì‘ = i * 10;
                const í˜„ì¬ë ˆë²¨ = Math.max(0, Math.min(ë°œêµ´ë ˆë²¨ - ì‹œì‘, 10));
                if (í˜„ì¬ë ˆë²¨ <= 0) break;

                const í™•ë¥  = í˜„ì¬ë ˆë²¨ >= 10 ? 1 : í˜„ì¬ë ˆë²¨ * 0.1;
                if (Math.random() < í™•ë¥ ) {
                    ëˆ„ì ë°°ìœ¨ += ë°œêµ´ìŠ¤í‚¬ë“¤[i].ì¦ê°€;
                } else break;
            }

            return 1 + ëˆ„ì ë°°ìœ¨;
        }


        document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼").addEventListener("click", ìë™ì‚¬ëƒ¥í† ê¸€);

        document.getElementById("ì „ë‹¹").addEventListener("click", () => {
            ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        document.getElementById("ìŠ¤í‚¬").addEventListener("click", () => {
            ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });
        document.getElementById("ì¥ë¹„").addEventListener("click", () => {
            ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        document.getElementById("ì „íˆ¬").addEventListener("click", () => {
            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
        });

        document.addEventListener("click", (e) => {
            if (
                ìë™ì‚¬ëƒ¥ì¤‘ &&
                !e.target.closest("#ìë™ì‚¬ëƒ¥ë²„íŠ¼") &&
                !e.target.closest("#ì±„íŒ…ì…ë ¥")
            ) {
                ìë™ì‚¬ëƒ¥ì¤‘ì§€();
            }
        });



        function ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ) {
            return Math.floor(10 * Math.pow(1.02, íˆ¬ììˆœë²ˆ));
        }


        // document.getElementById("ê³µê²©ë²„íŠ¼").style.display = "none";
        document.getElementById("ê³µê²©ë²„íŠ¼").style.visibility = "hidden";

        function ë¬´ì§€ê°œë³€í™˜(el) {
            const ìƒ‰ìƒë“¤ = [
                "#ff0000", "#ff7f00", "#ffff00",
                "#00ff00", "#00bfff", "#8a2be2", "#ff00ff"
            ];
            let ì¸ë±ìŠ¤ = 0;
            setInterval(() => {
                el.style.color = ìƒ‰ìƒë“¤[ì¸ë±ìŠ¤ % ìƒ‰ìƒë“¤.length];
                ì¸ë±ìŠ¤++;
            }, 200);
        }

        const ë²„ì „ë²„íŠ¼ = document.getElementById("ë²„ì „í‘œì‹œ");
        ë²„ì „ë²„íŠ¼.style.cursor = "pointer";

        const ë©”ë‰´ì–¼ì°½ = document.createElement("div");
        ë©”ë‰´ì–¼ì°½.id = "ë©”ë‰´ì–¼ì°½";
        ë©”ë‰´ì–¼ì°½.className = "ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬";
        ë©”ë‰´ì–¼ì°½.style.position = "fixed";
        ë©”ë‰´ì–¼ì°½.style.top = "40px";
        ë©”ë‰´ì–¼ì°½.style.left = "10px";
        ë©”ë‰´ì–¼ì°½.style.background = "#000";
        ë©”ë‰´ì–¼ì°½.style.color = "white";
        ë©”ë‰´ì–¼ì°½.style.zIndex = "9999";
        ë©”ë‰´ì–¼ì°½.style.width = "fit-content";
        // ë©”ë‰´ì–¼ì°½.style.whiteSpace = "nowrap";
        ë©”ë‰´ì–¼ì°½.style.display = "none";
        ë©”ë‰´ì–¼ì°½.innerHTML = `
  <div style="font-weight: bold; margin-bottom: 10px;">ğŸ“˜ ìš´ì˜ì ë©”ë‰´ì–¼</div>
  <div>
    0. ì‹ ê·œìœ ì € ì§€ì›ìê¸ˆ 300,000ì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤<br>
    1. ë³´ìœ ê³¨ë“œ í´ë¦­ì‹œ ë„ë°• ê°€ëŠ¥í•©ë‹ˆë‹¤<br>
          ë ˆì–´ì¥ë¹„ ë„ë°•ìœ¼ë¡œ ì‹œì‘í•˜ì„¸ìš”<br>
          ì‹¤íŒ¨í•˜ì‹œë©´ íƒˆí‡´í›„ ë‹¤ì‹œì‹œì‘í•˜ì„¸ìš”<br>
2. ìë™ì‚¬ëƒ¥í•˜ì„¸ìš”<br>
3. ìŠ¤í‚¬í™”ë©´ì— ì´ë³´ìœ ìˆ™ë ¨ë„ë¥¼ í´ë¦­í•˜ì‹œë©´<br>
ì§€ê¸ˆê¹Œì§€ íˆ¬ìëœ ëª¨ë“  ìˆ™ë ¨ë„ê°€ íšŒìˆ˜ë©ë‹ˆë‹¤<br>
4. ì•„ì´ë””ë¥¼ í´ë¦­í•˜ì‹œë©´ ì•„ì´ë”” ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤<br>
5. ì¸µ ì˜†ì˜ í™”ì‚´í‘œë¡œ ì¸µ ì´ë™ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤<br>
6. ë„ë°•ì´ë‚˜ ë“œëìœ¼ë¡œ íšë“í•œ ì¥ë¹„ì˜ ê³µê²©ë ¥ì€<br>
ì „ë¶€ ëˆ„ì ë˜ì–´ ê³µê²©ë ¥ì— í•©ì‚°ë©ë‹ˆë‹¤<br>
7. ì¶”ê°€ë¡œ í•©ì„±ë˜ì–´ì§€ëŠ” ì•„ì´í…œì€(0)í‘œì‹œê°€ ë˜ê³ <br>
í•©ì„± ë³´ë„ˆìŠ¤ë¡œ ìµœëŒ€ì²´ë ¥ì´ 1 ì¦ê°€í•©ë‹ˆë‹¤<br>
7-1. ì¥ë¹„í™”ë©´ì— ë§ì¹˜ëŠ” ê°•í™”ë²„íŠ¼ì…ë‹ˆë‹¤<br>
ì¼ë°˜ë“±ê¸‰ê³¼ ë ˆì–´ë“±ê¸‰ ì¥ë¹„ëŠ” ê°•í™” íš¨ìœ¨ì´ ë” ì¢‹ìŠµë‹ˆë‹¤<br>
8. ì¸µìˆ˜ê°€ ì˜¤ë¥¼ìˆ˜ë¡ í•„ë“œ ì™¸ ëª¬ìŠ¤í„°ì˜ ë“±ì¥í™•ë¥ ì´<br>
ì¦ê°€í•©ë‹ˆë‹¤<br>
9. í•„ë“œ ì™¸ ëª¬ìŠ¤í„° ì „íˆ¬ì—ì„œ ìŠ¹ë¦¬ ì‹œ<br>
í•´ë‹¹ ëª¬ìŠ¤í„° ë“±ê¸‰ì˜ ì•„ì´í…œì„ í™•ì •ë“œëí•©ë‹ˆë‹¤<br>
10. ëª¨ë“  íŒì—…ì°½ì€ ë°”ê¹¥ í´ë¦­ì‹œ í•´ì œë©ë‹ˆë‹¤<br>

ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡<br>
v1.1.4 íŒ¨ì¹˜ë…¸íŠ¸<br>
1. ì•„ì´ë””ë¥¼ í´ë¦­í•˜ì‹œë©´ ì•„ì´ë”” ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤<br>
ë¡œê·¸ì¸ ì•„ì´ë””ë„ ë³€ê²½ì´ë‹ˆ ë¡œê·¸ì¸ ì‹œ ì°¸ê³ í•˜ì„¸ìš”<br>
    </div>
`;
        // ë²„ì „ì—…

        document.body.appendChild(ë©”ë‰´ì–¼ì°½);

        ë²„ì „ë²„íŠ¼.addEventListener("click", () => {
            ë©”ë‰´ì–¼ì°½.style.display = (ë©”ë‰´ì–¼ì°½.style.display === "none") ? "block" : "none";
        });

        document.addEventListener("click", (e) => {
            if (
                ë©”ë‰´ì–¼ì°½.style.display === "block" &&
                !ë©”ë‰´ì–¼ì°½.contains(e.target) &&
                !ë²„ì „ë²„íŠ¼.contains(e.target)
            ) {
                ë©”ë‰´ì–¼ì°½.style.display = "none";
            }
        });

        // âœ… ì´ê³¨ë“œ í´ë¦­ ì‹œ ë„ë°•ì°½ ìƒì„±
        const ì´ê³¨ë“œê°ì²´ = document.getElementById("ì´ê³¨ë“œ");
        ì´ê³¨ë“œê°ì²´.style.cursor = "pointer";
        ì´ê³¨ë“œê°ì²´.addEventListener("click", () => {
            const ê¸°ì¡´ = document.getElementById("ë„ë°•ì°½");
            if (ê¸°ì¡´) ê¸°ì¡´.remove();

            const ë„ë°•ì°½ = document.createElement("div");
            ë„ë°•ì°½.id = "ë„ë°•ì°½";
            ë„ë°•ì°½.style.position = "fixed";
            ë„ë°•ì°½.style.top = "50%";
            ë„ë°•ì°½.style.width = "200px";
            ë„ë°•ì°½.style.left = "50%";
            ë„ë°•ì°½.style.transform = "translate(-50%, -50%)";
            ë„ë°•ì°½.style.background = "#000";
            ë„ë°•ì°½.style.border = "2px solid 2e2e2e";
            ë„ë°•ì°½.style.padding = "20px";
            ë„ë°•ì°½.style.zIndex = 9999;
            ë„ë°•ì°½.style.color = "white";
            ë„ë°•ì°½.style.borderRadius = "10px";
            ë„ë°•ì°½.style.display = "flex";
            ë„ë°•ì°½.style.flexDirection = "column";
            ë„ë°•ì°½.style.gap = "8px";
            ë„ë°•ì°½.className = "ê¸°ë³¸í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬";
            ë„ë°•ì°½.innerHTML = `
<div id="ë„ë°•ì¥" style="text-align:center; font-weight:bold;">
  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align:middle;">
    <path d="m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72"/>
    <path d="m14 7 3 3"/>
    <path d="M5 6v4"/>
    <path d="M19 14v4"/>
    <path d="M10 2v2"/>
    <path d="M7 8H3"/>
    <path d="M21 16h-4"/>
    <path d="M11 3H9"/>
  </svg>
  ì¥ë¹„ ë„ë°•
</div>
  <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ë ˆì–´',100000)">100,000G - ë ˆì–´ì¥ë¹„</div>
  <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ì‹ í™”',1000000)">1,000,000G - ì‹ í™”ì¥ë¹„</div>
  <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ê³ ëŒ€',10000000)">10,000,000G - ê³ ëŒ€ì¥ë¹„</div>
  <div class="ë²„íŠ¼" onclick="document.getElementById('ë„ë°•ì°½').remove()">âŒ ë‹«ê¸°</div>
`;
            document.body.appendChild(ë„ë°•ì°½);

            // <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ì¼ë°˜',10000)">10,000G - ì¼ë°˜ì¥ë¹„</div>
            //             <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ì‹ í™”',25000)">25,000G - ì‹ í™”ì¥ë¹„</div>
            //   <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ê³ ëŒ€',100000)">100,000G - ê³ ëŒ€ì¥ë¹„</div>
            //   <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('íƒœì´ˆ',500000)">500,000G - íƒœì´ˆì¥ë¹„</div>
            //   <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ê³µí—ˆ',2000000)">2,000,000G - ê³µí—ˆì¥ë¹„</div>

            // âœ… ë¬´ì§€ê°œ íš¨ê³¼ ì ìš©ì€ ë„ë°•ì°½ append ì´í›„ ì‹¤í–‰í•´ì•¼ í•¨
            const ì•„ì´ì½˜ = ë„ë°•ì°½.querySelector("svg");
            const í…ìŠ¤íŠ¸ = ë„ë°•ì°½.querySelector("div"); // ì²«ì¤„ div

            if (ì•„ì´ì½˜) ë¬´ì§€ê°œë³€í™˜(ì•„ì´ì½˜);
            if (í…ìŠ¤íŠ¸) ë¬´ì§€ê°œë³€í™˜(í…ìŠ¤íŠ¸);

            // ì™¸ë¶€ í´ë¦­ ì‹œ ë„ë°•ì°½ ì œê±°
            setTimeout(() => {
                document.addEventListener("click", ë°”ê¹¥í´ë¦­ë‹«ê¸°);
            });

            function ë°”ê¹¥í´ë¦­ë‹«ê¸°(e) {
                if (!ë„ë°•ì°½.contains(e.target) && e.target !== ì´ê³¨ë“œê°ì²´) {
                    ë„ë°•ì°½.remove();
                    document.removeEventListener("click", ë°”ê¹¥í´ë¦­ë‹«ê¸°);
                }
            }
        });

        // âœ… ë„ë°• ì‹œë„ í•¨ìˆ˜
        function ë„ë°•ì‹œë„(ë“±ê¸‰, ë¹„ìš©) {
            if (Number(ìœ ì €ë°ì´í„°.ê³¨ë“œ) < ë¹„ìš©) {
                ë©”ì‹œì§€í‘œì‹œ(ë„ë°•ì¥, `${ë¨¸ë‹ˆì•„ì´ì½˜}`, "ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤", "white")
                return;
            }
            ìœ ì €ë°ì´í„°.ê³¨ë“œ -= ë¹„ìš©;

            if (Math.random() < 0.51) {
                ì¥ë¹„ë“œëì‹œë„(ë“±ê¸‰, "ì­íŒŸ!");
                ë©”ì‹œì§€í‘œì‹œ(ë„ë°•ì¥, `${ì„±ê³µì•„ì´ì½˜}`, `[${ë“±ê¸‰}] ë“±ê¸‰ ì¥ë¹„ ë„ë°• ì„±ê³µ!`, "#00c851");
            } else {
                ë©”ì‹œì§€í‘œì‹œ(ë„ë°•ì¥, `${ì‹¤íŒ¨ì•„ì´ì½˜}`, "ë„ë°• ì‹¤íŒ¨..!", "#ef4444");

                // ì‹¤íŒ¨ ë¡œê·¸ ë‚¨ê¸°ê³  ì‹¶ë‹¤ë©´ â†“ ì´ê²ƒë„ ì¶”ê°€ ê°€ëŠ¥
                const ë¡œê·¸ = {
                    ì•„ì´ë””: ìœ ì €ë°ì´í„°.ì•„ì´ë””,
                    ì´ë¦„: "ë„ë°• ì‹¤íŒ¨",
                    ë“±ê¸‰: ë“±ê¸‰,
                    ê³µê²©ë ¥: 0,
                    ë¡œê·¸: `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}] ${ë“±ê¸‰} ì¥ë¹„ ë„ë°• ì‹¤íŒ¨..`,
                    ì‹œê°: Date.now(),
                };
                db.ref("ë“œëë¡œê·¸").push(ë¡œê·¸);
            }
            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).update({ ê³¨ë“œ: ìœ ì €ë°ì´í„°.ê³¨ë“œ }).then(() => {
                í™”ë©´í•´ì œ();
                ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
            });
            const ì°½ = document.getElementById("ë„ë°•ì°½");

        }


        document.getElementById("ë¡œê·¸ì•„ì›ƒ").addEventListener("click", () => {
            auth.signOut().then(() => {
                localStorage.removeItem("ì„¸ì…˜í† í°");
                location.reload();
            });
        });






        // ìŠ¤í¬ë¦½íŠ¸ì¶”ê°€





    </script>





</body>

</html>


<!-- ìŠ¤í‚¬ì¶”ê°€ë§¤ì»¤ë‹ˆì¦˜
ì´ë¦„ì„¤ì •
ëª©ë¡ì„¤ì •
íš¨ê³¼ì ìš©
ì•„ì´ì½˜ì„ ë³„
cssìƒ‰ìƒë“±ë¡
ìŠ¤í‚¬í™”ë©´ì•„ì´ì½˜ë“±ë¡ -->