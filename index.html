<!DOCTYPE html>
<html lang="ko">

<head>

    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-database-compat.js"></script>


    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <meta charset="UTF-8">
    <title>gagl</title>
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: black;
            margin: 0;
            padding: 0;
            color: white;
            display: flex;
            /* justify-content: center; */
            align-items: center;
            flex-direction: column;
            height: 100vh;
            font-size: 14px;
            /* position: fixed; */
            /* í™”ë©´ê³ ì •ë°°ì¹˜ ìŠ¤í¬ë¡¤í•´ë„ ì•ˆì›€ì§ì„ */
            /* justify-content: space-between; */
            /* ì–‘ìª½ì •ë ¬ */
            font-weight: 500;
        }

        .ë°‘ì¤„ {
            border-bottom: 0.2px solid #2e2e2e;
            /* position: fixed; */
            /* top: 0; */
            width: 100%;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ê°€ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .ì„¸ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì–‘ìª½ì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 10px;
        }

        .ì‚¬ë°±í”½ì…€ {
            width: 400px;
        }

        .ë²„íŠ¼ {
            border-radius: 5px;
            padding: 5px;
        }

        .ë²„íŠ¼:hover {
            background-color: #333;
            cursor: pointer;
        }

        .ì»¤ì„œí˜¸ë²„:hover {
            cursor: pointer;
        }

        .ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 400px;
            border: 0.2px solid #2e2e2e;
            border-radius: 10px;
            padding: 15px;
        }

        .ê¸°ë³¸í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 100%;
            box-sizing: border-box;
            border: 0.2px solid #2e2e2e;
            border-radius: 10px;
            padding: 15px;
        }

        .ì¥ë¹„-ì¼ë°˜ {
            border: 1px solid #ffffff;
        }

        .ì¥ë¹„-ë ˆì–´ {
            border: 1px solid #2665c9;
        }

        .ì¥ë¹„-ì‹ í™” {
            border: 1px solid #c59b20;
        }

        .ì¥ë¹„-ê³ ëŒ€ {
            border: 1px solid #c825cd;
        }

        .ì¥ë¹„-íƒœì´ˆ {
            border: 1px solid #cd2525;
        }

        .ìœ ì €ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            width: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì—ë„ˆì§€ë°” {
            background-color: #eab308;
            height: 5px;
            border-radius: 10px;
            width: 100%;
        }

        .ìœ ì €í…Œë‘ë¦¬ {
            border: 0.2px solid #2614c7;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */
        }

        .ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            border: 0.2px solid #c71414;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */

        }

        .ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ {
            background-color: #121212;
            height: 85px;
            border-radius: 10px;
            width: 100px;
            padding: 15px;
        }

        .ë ˆë²¨ {
            color: #00c851;
        }

        .ì´ê²½í—˜ì¹˜ {
            color: #ffffff;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê²½í—˜ì¹˜ {
            color: #7a7a7a;
            font-size: 10px;
            font-weight: lighter;
        }

        .ê³¨ë“œ {
            color: #b0b0b0;
        }

        .ì´ê³¨ë“œ {
            color: #f5c400;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê³¨ë“œ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ìˆ™ë ¨ë„ {
            color: #b0b0b0;
        }

        .ì´ìˆ™ë ¨ë„ {
            color: #3b82f6;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ìˆ™ë ¨ë„ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ì½˜ì†”ë¡œê·¸ì°½ {
            color: #ffffff;
            border-radius: 10px;
            position: fixed;
            left: 0;
            bottom: 0;
            font-weight: bold;
        }

        .ë¡œë”©ì»¨í…Œì´ë„ˆ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: sans-serif;
            font-size: 16px;
        }

        .ë¡œë”©ìŠ¤í”¼ë„ˆ {
            width: 50px;
            height: 50px;
            border: 6px solid #ccc;
            border-top-color: #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* 
        #ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤ {
            max-height: 220px;
            overflow-y: hidden;
        } */

        #ì£½ìŒë©”ì‹œì§€ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            width: 400px;
            position: fixed;
            top: 33%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: #b0b0b0;
            padding: 15px;
            border: 3px solid #2e2e2e;
            border-radius: 12px;
            /* font-size: 20px; */
            /* font-weight: bold; */
            z-index: 9999;
            box-shadow: 0 0 20px #2e2e2e;
            animation: fadeOut 2s ease-in-out forwards;
            user-select: none;
            pointer-events: none;
        }

        /* ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ê²Œ í•˜ëŠ” í˜ì´ë“œ ì•„ì›ƒ */
        @keyframes fadeOut {
            0% {
                opacity: 1;
            }

            70% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                display: none;
            }
        }



        #ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸ {
            font-size: 16px;
            margin-top: 10px;
        }

        #íšë“ë¡œê·¸ {
            color: #00c851;
        }

        #ë ˆë²¨ì—…í‘œì‹œ {
            color: #00c851;
        }

        #ì¸µì¡°ì ˆ {
            background: linear-gradient(135deg, #330000, #660000, #990000);
            border: 2px solid #ff3300;
            box-shadow: 0 0 12px #ff0000, 0 0 24px #440000 inset;
            animation: ë§ˆê³„ë¶ˆê¸¸ 4s ease-in-out infinite;
            gap: 30px;
        }

        @keyframes ë§ˆê³„ë¶ˆê¸¸ {

            0%,
            100% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.3);
            }
        }

        .crown-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        .ê¸ˆ {
            stroke: gold;
        }

        .ì€ {
            stroke: silver;
        }

        .ë™ {
            stroke: #cd7f32;
        }

        #ë³´ìœ ìˆ™ë ¨ë„:hover {
            cursor: pointer;
            text-decoration: underline;
            color: #3b82f6;
        }

        .target-icon {
            width: 16px;
            height: 16px;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            margin-right: 4px;
        }

        .ì¸ì‚¬ì´íŠ¸ {
            stroke: #22c55e;
        }

        /* í¬ë¦¬í‹°ì»¬ - ë¹¨ê°• */
        .ì•ŒíŒŒ,
        .ë² íƒ€,
        .ê°ë§ˆ,
        .ë¸íƒ€,
        .ì—¡ì‹¤ë¡ ,
        .ì œíƒ€,
        .ì—íƒ€,
        .ì„íƒ€,
        .ì´ì˜¤íƒ€,
        .ì¹´íŒŒ,
        .ëŒë‹¤,
        .ë®¤,
        .ë‰´,
        .í¬ì‹œ,
        .ì˜¤ë¯¸í¬ë¡ ,
        .íŒŒì´,
        .ë¡œ,
        .ì‹œê·¸ë§ˆ,
        .íƒ€ìš°,
        .ì…ì‹¤ë¡ ,
        .íŒŒì´2,
        .ì¹´ì´,
        .í”„ì‹œ,
        .ì˜¤ë©”ê°€ {
            stroke: #ef4444;
        }

        /* ë“œë ˆì¸ - ì£¼í™© */
        .í‚¬ë¡œ,
        .ë©”ê°€,
        .ê¸°ê°€,
        .í…Œë¼,
        .í˜íƒ€,
        .ì—‘ì‚¬,
        .ì œíƒ€,
        .ìš”íƒ€,
        .ë¡œë‚˜,
        .ì¿¼ì¹´ {
            stroke: #f97316;
        }

        /* ë²„ì„œì»¤ - ë…¸ë‘ */
        .ì•µê±°,
        .ë ˆì´ì§€,
        .í”„ë Œì§€,
        .ë§¤ë“œë‹ˆìŠ¤,
        .í•˜ìš¸,
        .ìƒˆë¹„ì§€,
        .ë¸”ëŸ¬ë“œ,
        .ì¹´ì˜¤ìŠ¤,
        .ë°ìŠ¤,
        .ë£¨ë‚˜í‹± {
            stroke: #facc15;
        }

        .ë‚´ì•„ì´ë””ê°•ì¡° {
            background-color: #505050;
            /* font-weight: bold;
            border-radius: 6px; */
        }

        .ìƒ‰ìƒì‹¤í—˜ {
            background-color: #8b5cf6;
            background-color: #3bf0f6;
            background-color: #5cf669;
            background-color: #f6ec5c;
        }

        #ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤ {
            position: relative;
            /* âœ… ì¶”ê°€ */
        }

        #ì „íˆ¬í™”ë©´ {
            position: relative;
        }

        .ë°œêµ´ {
            stroke: #3b82f6;
        }

        .í€µë‹ˆìŠ¤ {
            stroke: #1e3a8a;
            /* ë‚¨ìƒ‰ ê³„ì—´ */
        }

        .ìë™ì‚¬ëƒ¥ {
            border-radius: 5px;
            padding: 5px;
            background-color: #fafafa;
            color: black;
        }

        /* cssì¶”ê°€ */
    </style>
</head>

<body>

    <!-- <div id="ë¡œë”©í™”ë©´" class="ë¡œë”©ì»¨í…Œì´ë„ˆ">
        <div class="ë¡œë”©ìŠ¤í”¼ë„ˆ"></div>
        <div style="margin-top: 10px;">ë¡œë”© ì¤‘ì…ë‹ˆë‹¤...</div>
    </div> -->
    <!-- body ìµœìƒë‹¨ ì–´ë””ë“  ê°€ëŠ¥ -->
    <div id="ê³ ì •ì´í™íŠ¸ì˜ì—­" style="
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  display: none;
"></div>

    <div id="ë“œëë¡œê·¸ë°•ìŠ¤" class="ê¸°ë³¸í…Œë‘ë¦¬" style="
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 300px;
  max-height: 800px;
  overflow-y: auto;
  font-size: 13px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: rgba(0, 0, 0, 0.8);
  z-index: 9999;
"></div>


    <div class="ë°‘ì¤„" id="ìƒë‹¨ë°”">
        <div class="ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€">
            <div class="ì»¤ì„œí˜¸ë²„" id="íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ">
                gagl
            </div>
            <div id="ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼" style="display: none;">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ë²„íŠ¼" id="ì „íˆ¬">
                        ì „íˆ¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì¥ë¹„">
                        ì¥ë¹„
                    </div>
                    <div class="ë²„íŠ¼" id="ìŠ¤í‚¬">
                        ìŠ¤í‚¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì „ë‹¹">
                        ì „ë‹¹
                    </div>
                    <div class="ë²„íŠ¼" id="íƒˆí‡´">
                        íƒˆí‡´
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì—ë„ˆì§€ë°•ìŠ¤" style="display: none;">
        <div class="ì–‘ìª½ì •ë ¬">
            <div style="color: #eab308;">
                <!-- ë£¨ì‹œë“œ zap ì•„ì´ì½˜ SVG -->
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-zap-icon lucide-zap">
                    <path
                        d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" />
                </svg>
            </div>
            <div>
                â™¾ï¸
            </div>
        </div>
        <div class="ì—ë„ˆì§€ë°”">

        </div>
    </div>



    <div id="ë¡œê·¸ì¸í™”ë©´" style="display: none;">

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
            <input type="text" placeholder="ì•„ì´ë””ì„ ì…ë ¥í•˜ì„¸ìš”" id="ì•„ì´ë””ì…ë ¥" autocomplete="off" maxlength="8">
            <button onclick="ì•„ì´ë””ì„¤ì •()">í™•ì¸</button>
        </div>
    </div>




    <div id="ì „íˆ¬í™”ë©´" style="display: none;">
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ê°€ë¡œì •ë ¬" id="ì¸µì¡°ì ˆ">
            <div id="ì•„ë˜ì¸µìœ¼ë¡œ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-down-dash-icon lucide-arrow-big-down-dash">
                    <path d="M15 5H9" />
                    <path d="M15 9v3h4l-7 7-7-7h4V9z" />
                </svg>
            </div>
            <div id="í˜„ì¬ì¸µ">
                1ì¸µ

            </div>
            <div id="ìœ„ì¸µìœ¼ë¡œ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-up-dash-icon lucide-arrow-big-up-dash">
                    <path d="M9 19h6" />
                    <path d="M9 15v-3H5l7-7 7 7h-4v3H9z" />
                </svg>
            </div>

        </div>

        <div id="ì‚¬ëƒ¥ê²°ê³¼">
            <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ë ˆë²¨" id="ë ˆë²¨">
                            ë ˆë²¨ 129
                        </div>
                        <div class="ì´ê²½í—˜ì¹˜" id="ì´ê²½í—˜ì¹˜">
                            12,932
                        </div>
                        <div class="íšë“ê²½í—˜ì¹˜" id="íšë“ê²½í—˜ì¹˜">
                            45
                        </div>
                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ê³¨ë“œ" id="ê³¨ë“œ">
                            ê³¨ë“œ
                        </div>
                        <div class="ì´ê³¨ë“œ" id="ì´ê³¨ë“œ">
                            999,999
                        </div>
                        <div class="íšë“ê³¨ë“œ" id="íšë“ê³¨ë“œ">
                            999
                        </div>

                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ìˆ™ë ¨ë„" id="ìˆ™ë ¨ë„">
                            ìˆ™ë ¨ë„
                        </div>
                        <div class="ì´ìˆ™ë ¨ë„" id="ì´ìˆ™ë ¨ë„">
                            999,999
                        </div>
                        <div class="íšë“ìˆ™ë ¨ë„" id="íšë“ìˆ™ë ¨ë„">
                            999
                        </div>

                    </div>
                </div>

                <div class="ì„¸ë¡œì •ë ¬" id="ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤">
                    <div>
                        <div class="ë²„íŠ¼" id="ê³µê²©ë²„íŠ¼">âš”ï¸ ê³µê²©í•˜ê¸°</div>
                    </div>
                    <div class="ë²„íŠ¼" id="ìë™ì‚¬ëƒ¥ë²„íŠ¼">â± ìë™ì‚¬ëƒ¥</div>
                </div>


                <div class="ê°€ë¡œì •ë ¬" id="ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸">
                </div>
                <div class="ê°€ë¡œì •ë ¬" id="íšë“ë¡œê·¸">
                </div>

                <div class="ê°€ë¡œì •ë ¬" id="ë ˆë²¨ì—…í‘œì‹œ">

                </div>
            </div>
        </div>




        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ìœ ì €í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬">
            <div id="ìœ ì €ì•„ì´ë””">
                ì˜ì
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ìœ ì €ê³µê²©ë ¥">
                    ê³µê²©ë ¥ 100
                </div>
                <div id="ìœ ì €ì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
            </div>

        </div>
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ëª¬ìŠ¤í„°í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬">
            <div id="ì•…ë§ˆì´ë¦„">
                ëª¬ìŠ¤í„°
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ì•…ë§ˆì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
                <div id="ì•…ë§ˆë°©ì–´ë ¥">
                    ë°©ì–´ë ¥ 10
                </div>
            </div>
        </div>


    </div>

    <div id="ì „ë‹¹í™”ë©´" style="display: none;">
        <div id="ì „ë‹¹ì»¨í…Œì´ë„ˆ" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
        </div>
    </div>

    <div class="ì½˜ì†”ë¡œê·¸ì°½" id="ì½˜ì†”ë¡œê·¸ì°½">

    </div>

    <div id="ì£½ìŒë©”ì‹œì§€" style="display: none;"></div>

    <div id="ë¸”ë¡œì»¤" style="
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 9999;
  display: none;
  cursor: wait;
"></div>

    <div id="ì¥ë¹„í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„ ì–‘ìª½ì •ë ¬">
            <div>ê°•ë¦¼ì¹´ìš´íŠ¸</div>
            <div class="ê°€ë¡œì •ë ¬">
                <div id="ì¥ë¹„ëª©ë¡"></div>
                <!-- <div class="ë²„íŠ¼" onclick="ì¥ë¹„ìë™í•©ì„±()">ìë™í•©ì„±</div> -->
            </div>
        </div>

        <div id="ì¥ë¹„ê³¨ë“œí‘œì‹œ" style="color: #f5c400;">0 Gold</div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì¥ë¹„ì»¨í…Œì´ë„ˆ">
        </div>
    </div>

    <div id="ìŠ¤í‚¬í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„" id="ë³´ìœ ìˆ™ë ¨ë„">

        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬" id="ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ">
        </div>
    </div>

    <div id="ë²„ì „í‘œì‹œ" style="
    position: fixed;
    top: 6px;
    left: 10px;
    color: #bebebe;
    font-size: 12px;
    z-index: 9999;
    opacity: 0.8;
  ">
        v1.0.0
    </div>

    <!-- ê°ì²´ì¶”ê°€ -->


    <script>
        // // ì½˜ì†” ë¡œê·¸ ì¶œë ¥ìš©
        // const ì›ë˜ë¡œê·¸ = console.log;
        // console.log = function (...args) {
        //     ì›ë˜ë¡œê·¸(...args); // ê¸°ì¡´ ì½˜ì†”ì— ì¶œë ¥
        //     const ì½˜ì†”ë¡œê·¸ì°½ = document.getElementById("ì½˜ì†”ë¡œê·¸ì°½");
        //     ì½˜ì†”ë¡œê·¸ì°½.innerText = args.map(arg =>
        //         typeof arg === "object" ? JSON.stringify(arg) : arg
        //     ).join(" ");
        //     ì½˜ì†”ë¡œê·¸ì°½.style.display = "block";
        // };

        // // ì—ëŸ¬ ë©”ì‹œì§€ ì¶œë ¥ìš©
        // window.onerror = function (message, source, lineno, colno, error) {
        //     const ì½˜ì†”ë¡œê·¸ì°½ = document.getElementById("ì½˜ì†”ë¡œê·¸ì°½");
        //     ì½˜ì†”ë¡œê·¸ì°½.innerText = `${message} (${lineno}:${colno})`;
        //     ì½˜ì†”ë¡œê·¸ì°½.style.display = "block";
        //     return true;
        // };




        const firebaseConfig = {
            apiKey: "AIzaSyATQ8ecSPS6StHUEv_-b-bw59qtjXoUzHc",
            authDomain: "gagl-eb32b.firebaseapp.com",
            projectId: "gagl-eb32b",
            storageBucket: "gagl-eb32b.firebasestorage.app",
            messagingSenderId: "689475246615",
            appId: "1:689475246615:web:9b5c0d7650e9580e34da52",
            measurementId: "G-2G82FVDY46",
            databaseURL: "https://gagl-eb32b-default-rtdb.firebaseio.com"  // ì´ ì¤„ ì¶”ê°€
        };



        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();
        const ê¸°ì¤€ì‹œê° = new Date("2025-04-12T15:15:00+09:00").getTime();
        document.getElementById("ë²„ì „í‘œì‹œ").innerText = "v1.0.1";



        let uid = "";
        let ìœ ì €ë°ì´í„° = {};
        let í˜„ì¬ì•…ë§ˆ = null;

        let í˜„ì¬ì•…ë§ˆì²´ë ¥ = 0;
        let í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥ = 0;
        let ìë™ì‚¬ëƒ¥ì¤‘ = false;
        let ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

        let í˜„ì¬ëª¬ìŠ¤í„°ì´ë¦„ = "";
        let í˜„ì¬ëª¬ìŠ¤í„°ë“±ê¸‰ = "ì¼ë°˜";

        const ë ˆì–´ëª¬ìŠ¤í„° = [
            "IV. ë””ì•„ë¸”ë¡œ",
        ];
        const ì‹ í™”ëª¬ìŠ¤í„° = [
            "LXXXIX. ë ˆë¹„ì•„íƒ„",
            // "DCCLXXVII. ë²¨ì œë¶‘",
        ];
        const ê³ ëŒ€ëª¬ìŠ¤í„° = [
            "DCCLXXVII. ë²¨ì œë¶€ë¸Œ"
        ];
        const íƒœì´ˆëª¬ìŠ¤í„° = [
            "Î©. ì‚¬íƒ„"
        ];
        const ê³µí—ˆëª¬ìŠ¤í„° = [
            "Î. ë°”ë¡ "
        ];


        const í¬ë¦¬í‹°ì»¬ì´ë¦„ë“¤ = [
            "ì•ŒíŒŒ", "ë² íƒ€", "ê°ë§ˆ", "ë¸íƒ€", "ì—¡ì‹¤ë¡ ", "ì œíƒ€", "ì—íƒ€", "ì„íƒ€", "ì´ì˜¤íƒ€", "ì¹´íŒŒ",
            "ëŒë‹¤", "ë®¤", "ë‰´", "í¬ì‹œ", "ì˜¤ë¯¸í¬ë¡ ", "íŒŒì´", "ë¡œ", "ì‹œê·¸ë§ˆ", "íƒ€ìš°", "ì…ì‹¤ë¡ ",
            "íŒŒì´2", "ì¹´ì´", "í”„ì‹œ", "ì˜¤ë©”ê°€"
        ];

        const í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ëª©ë¡ = í¬ë¦¬í‹°ì»¬ì´ë¦„ë“¤.map((ì´ë¦„, ì¸ë±ìŠ¤) => {
            const ë°°ìœ¨ = (1.1 + ì¸ë±ìŠ¤ * 0.1).toFixed(1); // âœ… ì˜¬ë°”ë¥¸ ë³€ìˆ˜ ì´ë¦„
            return {
                í‚¤: `${ì´ë¦„.toLowerCase()}í¬ë¦¬í‹°ì»¬í™•ë¥ `,
                ì´ë¦„: `${ì´ë¦„} í¬ë¦¬í‹°ì»¬`,
                ì„¤ëª…: `ìµœì¢…ë°ë¯¸ì§€ ${ë°°ìœ¨}ë°°.`,
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10 + ì¸ë±ìŠ¤ * 10,
                ì ê¸ˆí•´ì œì¡°ê±´: ì¸ë±ìŠ¤ === 0 ? null : {
                    í‚¤: `${í¬ë¦¬í‹°ì»¬ì´ë¦„ë“¤[ì¸ë±ìŠ¤ - 1].toLowerCase()}í¬ë¦¬í‹°ì»¬í™•ë¥ `,
                    ìµœì†Œë ˆë²¨: 10
                }
            };
        });

        const ë“œë ˆì¸ì´ë¦„ë“¤ = [
            "í‚¬ë¡œ", "ë©”ê°€", "ê¸°ê°€", "í…Œë¼", "í˜íƒ€",
            "ì—‘ì‚¬", "ì œíƒ€", "ìš”íƒ€", "ë¡œë‚˜", "ì¿¼ì¹´"
        ];

        const ë“œë ˆì¸ìŠ¤í‚¬ëª©ë¡ = ë“œë ˆì¸ì´ë¦„ë“¤.map((ì´ë¦„, ì¸ë±ìŠ¤) => {
            return {
                í‚¤: `${ì´ë¦„.toLowerCase()}ë“œë ˆì¸í¡í˜ˆí™•ë¥ `,
                ì´ë¦„: `${ì´ë¦„} ë“œë ˆì¸`,
                ì„¤ëª…: `ëª¬ìŠ¤í„° ì²˜ì¹˜ ì‹œ ì²´ë ¥ +${ì¸ë±ìŠ¤ + 1} íšŒë³µ.`,
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10 + ì¸ë±ìŠ¤ * 10,
                ì ê¸ˆí•´ì œì¡°ê±´: ì¸ë±ìŠ¤ === 0 ? null : {
                    í‚¤: `${ë“œë ˆì¸ì´ë¦„ë“¤[ì¸ë±ìŠ¤ - 1].toLowerCase()}ë“œë ˆì¸í¡í˜ˆí™•ë¥ `,
                    ìµœì†Œë ˆë²¨: 10
                }
            };
        });

        const ë²„ì„œì»¤ì´ë¦„ë“¤ = [
            "ì•µê±°", "ë ˆì´ì§€", "í”„ë Œì§€", "ë§¤ë“œë‹ˆìŠ¤", "í•˜ìš¸",
            "ìƒˆë¹„ì§€", "ë¸”ëŸ¬ë“œ", "ì¹´ì˜¤ìŠ¤", "ë°ìŠ¤", "ë£¨ë‚˜í‹±"
        ];

        const ë²„ì„œì»¤ë°°ìœ¨ëª©ë¡ = [1.3, 1.6, 1.9, 2.2, 2.5, 2.8, 3.1, 3.4, 3.7, 4.0];

        const ë²„ì„œì»¤ìŠ¤í‚¬ëª©ë¡ = ë²„ì„œì»¤ì´ë¦„ë“¤.map((ì´ë¦„, ì¸ë±ìŠ¤) => {
            const ë°°ìœ¨ = ë²„ì„œì»¤ë°°ìœ¨ëª©ë¡[ì¸ë±ìŠ¤].toFixed(1);
            const ì†Œëª¨ = ì¸ë±ìŠ¤ + 1;
            return {
                í‚¤: `${ì´ë¦„.toLowerCase()}ë²„ì„œì»¤ë°ë¯¸ì§€ì¦ê°€í™•ë¥ `,
                ì´ë¦„: `${ì´ë¦„} ë²„ì„œì»¤`,
                ì„¤ëª…: `ì²´ë ¥ì†Œëª¨+${ì†Œëª¨},ìµœì¢…ë°ë¯¸ì§€${ë°°ìœ¨}ë°°.`,
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10 + ì¸ë±ìŠ¤ * 10,
                ì ê¸ˆí•´ì œì¡°ê±´: ì¸ë±ìŠ¤ === 0 ? null : {
                    í‚¤: `${ë²„ì„œì»¤ì´ë¦„ë“¤[ì¸ë±ìŠ¤ - 1].toLowerCase()}ë²„ì„œì»¤ë°ë¯¸ì§€ì¦ê°€í™•ë¥ `,
                    ìµœì†Œë ˆë²¨: 10
                }
            };
        });

        const ì¸ì‚¬ì´íŠ¸ì´ë¦„ë“¤ = [
            "ë§ˆì´í¬ë¡œ", "ë‚˜ë…¸", "í”¼ì½”", "í¨í† ", "ì•„í† ", "ì œí”„í† ", "ìš”í¬í† "
        ];

        const ì¸ì‚¬ì´íŠ¸ìŠ¤í‚¬ëª©ë¡ = ì¸ì‚¬ì´íŠ¸ì´ë¦„ë“¤.map((ì´ë¦„, ì¸ë±ìŠ¤) => {
            return {
                í‚¤: `${ì´ë¦„.toLowerCase()}ì¸ì‚¬ì´íŠ¸í™•ë¥ `,
                ì´ë¦„: `${ì´ë¦„} ì¸ì‚¬ì´íŠ¸`,
                ì„¤ëª…: `ìˆ™ë ¨ë„ íšë“ëŸ‰ +${ì¸ë±ìŠ¤ + 1}`,
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10 + ì¸ë±ìŠ¤ * 10,
                ì ê¸ˆí•´ì œì¡°ê±´: ì¸ë±ìŠ¤ === 0 ? null : {
                    í‚¤: `${ì¸ì‚¬ì´íŠ¸ì´ë¦„ë“¤[ì¸ë±ìŠ¤ - 1].toLowerCase()}ì¸ì‚¬ì´íŠ¸í™•ë¥ `,
                    ìµœì†Œë ˆë²¨: 10
                }
            };
        });

        const ë°œêµ´ì´ë¦„ë“¤ = [
            "ë£¨ë¹„", "ì‚¬íŒŒì´ì–´", "ì—ë©”ë„ë“œ", "ë‹¤ì´ì•„ëª¬ë“œ", "í† íŒŒì¦ˆ",
            "ììˆ˜ì •", "ì˜¤íŒ”", "ê°€ë„·", "í˜ë¦¬ë„íŠ¸"
        ];

        const ë°œêµ´ìŠ¤í‚¬ëª©ë¡ = ë°œêµ´ì´ë¦„ë“¤.map((ì´ë¦„, ì¸ë±ìŠ¤) => {
            return {
                í‚¤: `${ì´ë¦„.toLowerCase()}ë°œêµ´ê³¨ë“œì¦ê°€í™•ë¥ `, // âœ… "ë°œêµ´" í¬í•¨
                ì´ë¦„: `${ì´ë¦„} ë°œêµ´`,
                ì„¤ëª…: `ê³¨ë“œ íšë“ëŸ‰ +${(ì¸ë±ìŠ¤ + 1) * 10}%`,
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10 + ì¸ë±ìŠ¤ * 10,
                ì ê¸ˆí•´ì œì¡°ê±´: ì¸ë±ìŠ¤ === 0 ? null : {
                    í‚¤: `${ë°œêµ´ì´ë¦„ë“¤[ì¸ë±ìŠ¤ - 1].toLowerCase()}ë°œêµ´ê³¨ë“œì¦ê°€í™•ë¥ `,
                    ìµœì†Œë ˆë²¨: 10
                }
            };
        });

        const í€µë‹ˆìŠ¤ì´ë¦„ë“¤ = [
            "í„°ë³´", "í•˜ì´í¼", "í”Œë˜ì‹œ", "ìŠ¤ìœ„í”„íŠ¸", "ì œíŠ¸",
            "ìŠ¤í†°", "í€€í…€", "í…œí¬", "ë‹¤íŠ¸", "í”Œë¡œìš°"
        ];

        const í€µë‹ˆìŠ¤ìŠ¤í‚¬ëª©ë¡ = í€µë‹ˆìŠ¤ì´ë¦„ë“¤.map((ì´ë¦„, ì¸ë±ìŠ¤) => {
            return {
                í‚¤: `${ì´ë¦„.toLowerCase()}í€µë‹ˆìŠ¤ìë™ë”œë ˆì´ê°ì†Œ`,
                ì´ë¦„: `${ì´ë¦„} í€µë‹ˆìŠ¤`,
                ì„¤ëª…: `ìë™ì‚¬ëƒ¥ ë”œë ˆì´ -20ms`,
                ìµœëŒ€ë ˆë²¨: 10,
                ìˆ™ë ¨ë„ì†Œëª¨: 10 + ì¸ë±ìŠ¤ * 10,
                ì ê¸ˆí•´ì œì¡°ê±´: ì¸ë±ìŠ¤ === 0 ? null : {
                    í‚¤: `${í€µë‹ˆìŠ¤ì´ë¦„ë“¤[ì¸ë±ìŠ¤ - 1].toLowerCase()}í€µë‹ˆìŠ¤ìë™ë”œë ˆì´ê°ì†Œ`,
                    ìµœì†Œë ˆë²¨: 10
                }
            };
        });

        function ì ìš©ëœí€µë‹ˆìŠ¤ë”œë ˆì´ê°ì†Œ() {
            const í€µë‹ˆìŠ¤ì´ë¦„ë“¤ = [
                "í„°ë³´", "í•˜ì´í¼", "í”Œë˜ì‹œ", "ìŠ¤ìœ„í”„íŠ¸", "ì œíŠ¸",
                "ìŠ¤í†°", "í€€í…€", "í…œí¬", "ë‹¤íŠ¸", "í”Œë¡œìš°"
            ];

            let ëˆ„ì ê°ì†Œ = 0;

            for (let i = 0; i < í€µë‹ˆìŠ¤ì´ë¦„ë“¤.length; i++) {
                const í‚¤ = `${í€µë‹ˆìŠ¤ì´ë¦„ë“¤[i].toLowerCase()}í€µë‹ˆìŠ¤ìë™ë”œë ˆì´ê°ì†Œ`;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;

                if (ë ˆë²¨ > 0) {
                    const ë°œë™ = í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ;
                    if (ë°œë™) ëˆ„ì ê°ì†Œ += 20;
                    else break; // ì—°ì† ì‹¤íŒ¨ ì‹œ ì´í›„ ì¤‘ë‹¨
                } else {
                    break;
                }
            }

            return ëˆ„ì ê°ì†Œ;
        }


        const ìŠ¤í‚¬ëª©ë¡ = [
            ...í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ëª©ë¡,
            ...ë“œë ˆì¸ìŠ¤í‚¬ëª©ë¡,
            ...ë²„ì„œì»¤ìŠ¤í‚¬ëª©ë¡,
            ...ì¸ì‚¬ì´íŠ¸ìŠ¤í‚¬ëª©ë¡,
            ...ë°œêµ´ìŠ¤í‚¬ëª©ë¡,
            ...í€µë‹ˆìŠ¤ìŠ¤í‚¬ëª©ë¡
        ];

        function ì¼ë°˜ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë””ì•„ë¸”ë¡œì˜ ì‹¬ì¥`;
        }

        function ë ˆì–´ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë ˆë¹„ì•„íƒ„ì˜ ë¹„ëŠ˜`;
        }

        function ì‹ í™”ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë²¨ì œë¶€ë¸Œì˜ ê¼¬ë¦¬`;
        }

        function ê³ ëŒ€ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ì‚¬íƒ„ì˜ ë‚ ê°œ`;
        }

        function íƒœì´ˆë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±() {
            return `ë°”ë¡ ì˜ ì´‰ìˆ˜`;
        }

        const ì¥ë¹„ë“œëí™•ë¥  = {
            ë ˆì–´: 1,    // 100%
            ì‹ í™”: 1,    // 100%
            ê³ ëŒ€: 1,     // 100%
            íƒœì´ˆ: 1,
            ê³µí—ˆ: 1   // 100%
        };



        function ì¥ë¹„ë“œëì‹œë„(ë“±ê¸‰, ëª¬ìŠ¤í„°ì²´ë ¥) {
            const í™•ë¥  = ì¥ë¹„ë“œëí™•ë¥ [ë“±ê¸‰] ?? 0;
            if (Math.random() >= í™•ë¥ ) return;

            if (!ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡) ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡ = [];

            let ì´ë¦„ = "";
            let ë“œëë“±ê¸‰ = "";

            if (ë“±ê¸‰ === "ë ˆì–´") {
                ì´ë¦„ = ì¼ë°˜ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ì¼ë°˜";
            } else if (ë“±ê¸‰ === "ì‹ í™”") {
                ì´ë¦„ = ë ˆì–´ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ë ˆì–´";
            } else if (ë“±ê¸‰ === "ê³ ëŒ€") {
                ì´ë¦„ = ì‹ í™”ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ì‹ í™”";
            } else if (ë“±ê¸‰ === "íƒœì´ˆ") {
                ì´ë¦„ = ê³ ëŒ€ë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "ê³ ëŒ€";
            } else if (ë“±ê¸‰ === "ê³µí—ˆ") {
                ì´ë¦„ = íƒœì´ˆë“±ê¸‰ì¥ë¹„ì´ë¦„ìƒì„±();
                ë“œëë“±ê¸‰ = "íƒœì´ˆ";
            } else {
                return;
            }

            // âœ… ê³µê²©ë ¥ = ê¸°ë³¸ê°’ Â± 20% ì˜¤ì°¨
            let ê¸°ë³¸ê³µê²©ë ¥ = 0;
            if (ë“±ê¸‰ === "ë ˆì–´") ê¸°ë³¸ê³µê²©ë ¥ = 10;
            else if (ë“±ê¸‰ === "ì‹ í™”") ê¸°ë³¸ê³µê²©ë ¥ = 100;
            else if (ë“±ê¸‰ === "ê³ ëŒ€") ê¸°ë³¸ê³µê²©ë ¥ = 1000;
            else if (ë“±ê¸‰ === "íƒœì´ˆ") ê¸°ë³¸ê³µê²©ë ¥ = 10000;
            else if (ë“±ê¸‰ === "ê³µí—ˆ") ê¸°ë³¸ê³µê²©ë ¥ = 100000;

            const ì˜¤ì°¨ë²”ìœ„ = ê¸°ë³¸ê³µê²©ë ¥ * 0.2;
            const ê³µê²©ë ¥ = Math.floor(ê¸°ë³¸ê³µê²©ë ¥ + (Math.random() * 2 - 1) * ì˜¤ì°¨ë²”ìœ„);

            let ê¸°ì¡´ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(z => z.ì´ë¦„ === ì´ë¦„);

            if (ê¸°ì¡´) {
                ê¸°ì¡´.ê³µê²©ë ¥ += ê³µê²©ë ¥;

                // âœ… í•©ì„±íšŸìˆ˜ ì¦ê°€
                const í‚¤ = `${ê¸°ì¡´.ì´ë¦„}|${ê¸°ì¡´.ë“±ê¸‰}`;
                ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡[í‚¤] = (ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡[í‚¤] ?? 0) + 1;

                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ê³µê²©ë ¥;
                ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥ += 1;
            } else {
                const ì‹ ê·œ = { ì´ë¦„, ë“±ê¸‰: ë“œëë“±ê¸‰, ê³µê²©ë ¥, ê°•í™”: 0 };

                // âœ… ìµœì´ˆ í•©ì„±íšŸìˆ˜ 0ìœ¼ë¡œ ì„¤ì •
                const í‚¤ = `${ì´ë¦„}|${ë“œëë“±ê¸‰}`;
                ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡[í‚¤] = 0;

                ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.push(ì‹ ê·œ);
                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ê³µê²©ë ¥;
            }

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).update({
                ì¥ë¹„ëª©ë¡: ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡,
                í•©ì„±ê¸°ë¡: ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡, // â† ì´ ì¤„ì„ ì¶”ê°€í•´ì•¼ í•¨
                ê³µê²©ë ¥: ìœ ì €ë°ì´í„°.ê³µê²©ë ¥,
                ìµœëŒ€ì²´ë ¥: ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥
            }).then(() => {
                í™”ë©´í•´ì œ();
            });

            const ì¥ë¹„ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(z => z.ì´ë¦„ === ì´ë¦„);

            // âœ… ë°”ë¡œ ì—¬ê¸°!
            const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
            const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;
            const ë¡œê·¸ë©”ì‹œì§€ = `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜})${ì¥ë¹„.ê°•í™” ? " +" + ì¥ë¹„.ê°•í™” : ""} (ê³µê²©ë ¥ +${ê³µê²©ë ¥}) ë“œë!`;

            í™”ë©´ì ê¸ˆ();
            db.ref("ë“œëë¡œê·¸").push({
                ì•„ì´ë””: ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "ìµëª…",
                ì´ë¦„: ì¥ë¹„.ì´ë¦„,
                ê³µê²©ë ¥: ê³µê²©ë ¥,
                ë“±ê¸‰: ì¥ë¹„.ë“±ê¸‰,
                ê°•í™”: ì¥ë¹„.ê°•í™”,
                ë¡œê·¸: ë¡œê·¸ë©”ì‹œì§€,
                ì‹œê°: Date.now(),
            }).then(() => {
                í™”ë©´í•´ì œ();
            });
        }

        function ë“œëë¡œê·¸ì¶”ê°€(ì•„ì´ë””, ì¥ë¹„) {
            // if (ì¥ë¹„.ë“±ê¸‰ === "ì¼ë°˜") return;
            const ë°•ìŠ¤ = document.getElementById("ë“œëë¡œê·¸ë°•ìŠ¤");
            const ì¤„ = document.createElement("div");

            const ìƒ‰ìƒë§µ = {
                "ì¼ë°˜": "#ffffff",
                "ë ˆì–´": "#2665c9",
                "ì‹ í™”": "#c59b20",
                "ê³ ëŒ€": "#c825cd",
                "íƒœì´ˆ": "#cd2525"
            };
            ì¤„.innerText = ì¥ë¹„.ë¡œê·¸
                ? ì¥ë¹„.ë¡œê·¸
                : `[${ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„} (ê³µê²©ë ¥ +${ì¥ë¹„.ê³µê²©ë ¥}) ë“œë!`;
            ì¤„.style.color = ìƒ‰ìƒë§µ[ì¥ë¹„.ë“±ê¸‰] || "white";

            ë°•ìŠ¤.appendChild(ì¤„);

            // 20ê°œ ì´ˆê³¼ ì‹œ ë§¨ ìœ„ ì œê±°
            while (ë°•ìŠ¤.childNodes.length > 20) {
                ë°•ìŠ¤.removeChild(ë°•ìŠ¤.firstChild);
            }
        }



        auth.onAuthStateChanged(function (user) {
            if (user) {
                uid = user.uid;

                í™”ë©´ì ê¸ˆ();
                db.ref("users/" + uid).once("value").then((snapshot) => {
                    if (snapshot.exists()) {
                        const ë°ì´í„° = snapshot.val();
                        const ìƒì„±ì‹œê° = Date.parse(ë°ì´í„°?.ìƒì„±ì‹œê° || "");
                        if (!isNaN(ìƒì„±ì‹œê°) && ìƒì„±ì‹œê° < ê¸°ì¤€ì‹œê°) {
                            const ê²½ê³  = document.createElement("div");
                            ê²½ê³ .innerHTML = `
                        <div style="
                            position: fixed;
                            top: 0; left: 0; right: 0; bottom: 0;
                            background: black;
                            color: red;
                            font-size: 18px;
                            display: flex;
                            flex-direction: column;
                            justify-content: center;
                            align-items: center;
                            z-index: 99999;
                            animation: ê¹œë¹¡ì„ 1s infinite;
                        ">
                            <div style="margin-bottom: 20px; text-align: center;">
                                <p>ğŸŒ‘ í•˜ëŠ˜ì´ ì–´ë‘ì›Œì§€ê³ ...</p>
                                <p>â˜„ï¸ ìš´ì„ì´ ë‹¤ê°€ì˜µë‹ˆë‹¤...</p>
                                <p style="font-size: 24px; font-weight: bold; color: orange;">ğŸ’¥ ë©”í…Œì˜¤ ì‘ë ¬!</p>
                            </div>
                            <button id="í™•ì¸ë²„íŠ¼" style="
                                padding: 10px 20px;
                                font-size: 16px;
                                background: red;
                                color: white;
                                border: none;
                                border-radius: 8px;
                                cursor: pointer;
                            ">í™•ì¸</button>
                        </div>
                        <style>
                        @keyframes ê¹œë¹¡ì„ {
                            0% { background-color: black; }
                            50% { background-color: darkred; }
                            100% { background-color: black; }
                        }
                        </style>
                    `;
                            document.body.appendChild(ê²½ê³ );

                            document.getElementById("í™•ì¸ë²„íŠ¼").addEventListener("click", () => {
                                db.ref("users/" + uid).remove().then(() => {
                                    location.reload(); // ë¡œê·¸ì¸í™”ë©´ìœ¼ë¡œ
                                    í™”ë©´í•´ì œ();
                                });
                            });
                            return;
                        }

                        if (ë°ì´í„°.ì•„ì´ë”” && ë°ì´í„°.ì•„ì´ë””.trim() !== "") {
                            ìœ ì €ë°ì´í„° = ë°ì´í„°;

                            // âœ… ì¡°ìš°ê¸°ë¡ í•„ë“œ ê°•ì œ ì´ˆê¸°í™”
                            if (!ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡ = {};
                            if (!("ë ˆì–´" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ë ˆì–´ = 0;
                            if (!("ì‹ í™”" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ì‹ í™” = 0;
                            if (!("ê³ ëŒ€" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ê³ ëŒ€ = 0;
                            if (!("íƒœì´ˆ" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.íƒœì´ˆ = 0;
                            if (!("ê³µí—ˆ" in ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡)) ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡.ê³µí—ˆ = 0;
                            if (!ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥) ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥ = 100;
                            if (!ìœ ì €ë°ì´í„°.ìŠ¤í‚¬) ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ = {};
                            if (!ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡) ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡ = [];
                            if (!ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°) ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = null;

                            for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                                if (!(ìŠ¤í‚¬.í‚¤ in ìœ ì €ë°ì´í„°.ìŠ¤í‚¬)) {
                                    ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                                }
                            }

                            if (!ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡) ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡ = {};

                            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                            í™”ë©´í•´ì œ();
                        } else {
                            ìœ ì €ë°ì´í„° = ë°ì´í„°;
                            ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°();
                            í™”ë©´í•´ì œ();
                        }
                    } else {
                        // ì‹ ê·œ ìœ ì € ìƒì„±
                        ìœ ì €ë°ì´í„° = {
                            ì•„ì´ë””: "",
                            ìƒì„±ì‹œê°: new Date().toISOString(),
                            ë ˆë²¨: 1,
                            ê³µê²©ë ¥: 100,
                            ë‚¨ì€ì²´ë ¥: 100,
                            ìµœëŒ€ì²´ë ¥: 100,
                            ê²½í—˜ì¹˜: 0,
                            ê³¨ë“œ: 0,
                            ìˆ™ë ¨ë„: 0,
                            í˜„ì¬ì¸µ: 1,
                            í˜„ì¬ì•…ë§ˆë²ˆí˜¸: 1,
                            ìŠ¤í‚¬: {}
                        };

                        for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                        }

                        db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                            ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°();
                            í™”ë©´í•´ì œ();
                        });
                    }
                });

            } else {
                // ìµëª… ë¡œê·¸ì¸
                auth.signInAnonymously();
            }
        });

        function í™”ë©´ì ê¸ˆ() {
            document.getElementById("ë¸”ë¡œì»¤").style.display = "block";
        }

        function í™”ë©´í•´ì œ() {
            document.getElementById("ë¸”ë¡œì»¤").style.display = "none";
        }

        function ë¡œê·¸ì¸í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            // document.getElementById("ë¡œë”©í™”ë©´").style.display = "none";
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ë¡œê·¸ì¸í™”ë©´").style.display = "block";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
        }

        function ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €) {
            document.getElementById("ë¡œê·¸ì¸í™”ë©´").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "block";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "block";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "block";

            document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "gagl";
            document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").innerText = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "gagl";
            document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = "ê³µê²©ë ¥ " + (ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ || 0);
            document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥} / ${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;
            document.getElementById("í˜„ì¬ì¸µ").innerText = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ + "ì¸µ" || "gagl";

            document.getElementById("ë ˆë²¨").innerText = "ë ˆë²¨ " + (ìœ ì €ë°ì´í„°.ë ˆë²¨ ?? 1);
            document.getElementById("ì´ê²½í—˜ì¹˜").innerText = typeof ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ === "number" ? ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜.toLocaleString() : "0";
            document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "0";
            document.getElementById("ì´ê³¨ë“œ").innerText = typeof ìœ ì €ë°ì´í„°.ê³¨ë“œ === "number" ? ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString() : "0";
            document.getElementById("íšë“ê³¨ë“œ").innerText = "0";
            document.getElementById("ì´ìˆ™ë ¨ë„").innerText = typeof ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ === "number" ? ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„.toLocaleString() : "0";
            document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "0";

            const baseRate = {
                ê³µí—ˆ: 0.000000001,
                íƒœì´ˆ: 0.00000001,
                ê³ ëŒ€: 0.0000001,
                ì‹ í™”: 0.000001,
                ë ˆì–´: 0.00001
            };

            const ì¸µìˆ˜ = ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ;
            const ë“±ì¥ë¥  = {
                ê³µí—ˆ: baseRate.ê³µí—ˆ * ì¸µìˆ˜,
                íƒœì´ˆ: baseRate.íƒœì´ˆ * ì¸µìˆ˜,
                ê³ ëŒ€: baseRate.ê³ ëŒ€ * ì¸µìˆ˜,
                ì‹ í™”: baseRate.ì‹ í™” * ì¸µìˆ˜,
                ë ˆì–´: baseRate.ë ˆì–´ * ì¸µìˆ˜
            };

            const ê¸°ë³¸ì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];
            const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);

            let íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = null;
            let ë“±ê¸‰ = "ì¼ë°˜";

            if (ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°) {
                ë“±ê¸‰ = ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°.ë“±ê¸‰;
                íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°.ì´ë¦„;
            } else {
                const r = Math.random();

                if (r < ë“±ì¥ë¥ .ê³µí—ˆ) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ê³µí—ˆëª¬ìŠ¤í„°[Math.floor(Math.random() * ê³µí—ˆëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ê³µí—ˆ";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = íƒœì´ˆëª¬ìŠ¤í„°[Math.floor(Math.random() * íƒœì´ˆëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "íƒœì´ˆ";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ + ë“±ì¥ë¥ .ê³ ëŒ€) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ê³ ëŒ€ëª¬ìŠ¤í„°[Math.floor(Math.random() * ê³ ëŒ€ëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ê³ ëŒ€";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ + ë“±ì¥ë¥ .ê³ ëŒ€ + ë“±ì¥ë¥ .ì‹ í™”) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ì‹ í™”ëª¬ìŠ¤í„°[Math.floor(Math.random() * ì‹ í™”ëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ì‹ í™”";
                } else if (r < ë“±ì¥ë¥ .ê³µí—ˆ + ë“±ì¥ë¥ .íƒœì´ˆ + ë“±ì¥ë¥ .ê³ ëŒ€ + ë“±ì¥ë¥ .ì‹ í™” + ë“±ì¥ë¥ .ë ˆì–´) {
                    íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ = ë ˆì–´ëª¬ìŠ¤í„°[Math.floor(Math.random() * ë ˆì–´ëª¬ìŠ¤í„°.length)];
                    ë“±ê¸‰ = "ë ˆì–´";
                }
            }


            if (ë“±ê¸‰ !== "ì¼ë°˜") {
                ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = {
                    ë“±ê¸‰,
                    ì´ë¦„: íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„
                };
                db.ref("users/" + uid).update({ ê°•ë¦¼ëª¬ìŠ¤í„°: ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° });

                const ìƒ‰ìƒë§µ = {
                    "ë ˆì–´": "#2665c9",
                    "ì‹ í™”": "#c59b20",
                    "ê³ ëŒ€": "#c825cd",
                    "íƒœì´ˆ": "#cd2525",
                    "ê³µí—ˆ": "#2acd25"
                };


                ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡[ë“±ê¸‰] = (ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡[ë“±ê¸‰] || 0) + 1;
                í™”ë©´ì ê¸ˆ(); // âœ… ì ê¸ˆ

                db.ref("users/" + uid).update({ ì¡°ìš°ê¸°ë¡: ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡ }).then(() => {
                    í™”ë©´í•´ì œ(); // âœ… í•´ì œ
                });

                const ì»¨í…Œì´ë„ˆ = document.createElement("div");
                ì»¨í…Œì´ë„ˆ.innerHTML = `
    <div style="display: flex; align-items: center; gap: 6px;">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
        viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ[ë“±ê¸‰]}" stroke-width="2"
        stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-octagon-alert-icon lucide-octagon-alert">
          <path d="M12 16h.01"/>
          <path d="M12 8v4"/>
          <path d="M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z"/>
        </svg>
        <span style="color: ${ìƒ‰ìƒë§µ[ë“±ê¸‰]}; font-weight: bold; font-size: 14px;">
            ${ë“±ê¸‰}ì•…ë§ˆ ${íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„} ê°•ë¦¼!
        </span>
    </div>
    `;

                ì»¨í…Œì´ë„ˆ.style.position = "absolute";
                ì»¨í…Œì´ë„ˆ.style.left = `${Math.random() * 80 + 10}%`;
                ì»¨í…Œì´ë„ˆ.style.top = `${Math.random() * 50 + 20}%`;
                ì»¨í…Œì´ë„ˆ.style.zIndex = "9999";
                ì»¨í…Œì´ë„ˆ.style.pointerEvents = "none";
                ì»¨í…Œì´ë„ˆ.style.whiteSpace = "nowrap";

                document.getElementById("ì „íˆ¬í™”ë©´").appendChild(ì»¨í…Œì´ë„ˆ);
                setTimeout(() => ì»¨í…Œì´ë„ˆ.remove(), 2000);
            }

            const ëª¬ìŠ¤í„°ì´ë¦„ = íŠ¹ìˆ˜ëª¬ìŠ¤í„°ì´ë¦„ || `${ë¡œë§ˆë²ˆí˜¸}. ${ê¸°ë³¸ì´ë¦„}`;
            document.getElementById("ì•…ë§ˆì´ë¦„").innerText = ëª¬ìŠ¤í„°ì´ë¦„;

            const ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ, ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸, ë“±ê¸‰);
            í˜„ì¬ì•…ë§ˆ = ì•…ë§ˆ;
            í˜„ì¬ì•…ë§ˆì²´ë ¥ = ì•…ë§ˆ.ì²´ë ¥;
            í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥ = ì•…ë§ˆ.ì²´ë ¥;
            í˜„ì¬ëª¬ìŠ¤í„°ì´ë¦„ = ëª¬ìŠ¤í„°ì´ë¦„;
            í˜„ì¬ëª¬ìŠ¤í„°ë“±ê¸‰ = ë“±ê¸‰;

            document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${í˜„ì¬ì•…ë§ˆì²´ë ¥} / ${í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥}`;
            document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ì•…ë§ˆ.ë°©ì–´ë ¥}`;
            document.querySelector(".ëª¬ìŠ¤í„°í…Œë‘ë¦¬").style.borderColor = {
                "ì¼ë°˜": "#c71414",
                "ë ˆì–´": "#2665c9",
                "ì‹ í™”": "#c59b20",
                "ê³ ëŒ€": "#c825cd",
                "íƒœì´ˆ": "#cd2525",
                "ê³µí—ˆ": "#2acd25"

            }[ë“±ê¸‰];

            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            setTimeout(ê³ ì •ì´í™íŠ¸ì˜ì—­ì´ˆê¸°í™”, 0);
        }

        function ìë™ì‚¬ëƒ¥ì¤‘ì§€() {
            ìë™ì‚¬ëƒ¥ì¤‘ = false;
            clearInterval(ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸);
            ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = null;

            const ë²„íŠ¼ = document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼");
            ë²„íŠ¼.innerText = "â± ìë™ì‚¬ëƒ¥";
            ë²„íŠ¼.style.color = "white";
        }


        function ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "block";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            const ì»¨í…Œì´ë„ˆ = document.getElementById("ì „ë‹¹ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            db.ref("users").once("value").then((snapshot) => {
                const ìœ ì €ë¦¬ìŠ¤íŠ¸ = [];

                snapshot.forEach((child) => {
                    const ë°ì´í„° = child.val();

                    // ğŸ”’ ìƒì„±ì‹œê° í•„í„°
                    const ìƒì„±ì‹œê° = new Date(ë°ì´í„°.ìƒì„±ì‹œê°).getTime();
                    if (ìƒì„±ì‹œê° < ê¸°ì¤€ì‹œê°) return;

                    if (!ë°ì´í„°.ì•„ì´ë”” || ë°ì´í„°.ì•„ì´ë””.trim() === "") return;
                    ìœ ì €ë¦¬ìŠ¤íŠ¸.push(ë°ì´í„°);
                });

                // âœ… ê³µê²©ë ¥ ê¸°ì¤€ ì •ë ¬
                ìœ ì €ë¦¬ìŠ¤íŠ¸.sort((a, b) => b.ê³µê²©ë ¥ - a.ê³µê²©ë ¥);

                ìœ ì €ë¦¬ìŠ¤íŠ¸.slice(0, 10).forEach((ìœ ì €, index) => {
                    const ì¤„ = document.createElement("div");
                    ì¤„.className = "ì–‘ìª½ì •ë ¬ ë°‘ì¤„";
                    if (ìœ ì €.ì•„ì´ë”” === ìœ ì €ë°ì´í„°.ì•„ì´ë””) {
                        ì¤„.classList.add("ë‚´ì•„ì´ë””ê°•ì¡°");
                    }

                    let ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "";
                    if (index === 0) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ê¸ˆ";
                    else if (index === 1) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ì€";
                    else if (index === 2) ì™•ê´€ìƒ‰í´ë˜ìŠ¤ = "ë™";

                    const ì™•ê´€ = index < 3
                        ? `<svg xmlns="http://www.w3.org/2000/svg" class="crown-icon ${ì™•ê´€ìƒ‰í´ë˜ìŠ¤}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                     <path d="M2 5l4.5 4.5L12 3l5.5 6.5L22 5l-1 14H3L2 5z" />
                     <path d="M5 20h14" />
                   </svg>`
                        : `<span>${index + 1}</span>`;

                    ì¤„.innerHTML = `
  <div class="ê°€ë¡œì •ë ¬">${ì™•ê´€}</div>
  <div>${ìœ ì €.ì•„ì´ë””} - ê³µê²©ë ¥ ${ìœ ì €.ê³µê²©ë ¥} / ${ìœ ì €.í˜„ì¬ì¸µ}ì¸µ</div>
`;
                    ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);
                });

                const ë‚´ë­í‚¹ì¸ë±ìŠ¤ = ìœ ì €ë¦¬ìŠ¤íŠ¸.findIndex(u => u.ì•„ì´ë”” === ìœ ì €ë°ì´í„°.ì•„ì´ë””);
                const ë‚´ë­í‚¹ = ë‚´ë­í‚¹ì¸ë±ìŠ¤ + 1;

                if (ë‚´ë­í‚¹ > 10) {
                    const ë‚´ì¤„ = document.createElement("div");
                    ë‚´ì¤„.className = "ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ë‚´ì•„ì´ë””ê°•ì¡°";

                    ë‚´ì¤„.innerHTML = `
  <div class="ê°€ë¡œì •ë ¬">${ë‚´ë­í‚¹}</div>
  <div>${ìœ ì €ë°ì´í„°.ì•„ì´ë””} - ê³µê²©ë ¥ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥} / ${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ</div>
`;
                    ì»¨í…Œì´ë„ˆ.appendChild(ë‚´ì¤„);
                }
            });
        }

        function ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "block";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            const ê¸°ë¡ = ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡ || { ë ˆì–´: 0, ì‹ í™”: 0, ê³ ëŒ€: 0, íƒœì´ˆ: 0, ê³µí—ˆ: 0 };
            document.getElementById("ì¥ë¹„ëª©ë¡").innerText =
                `ë ˆì–´:${ê¸°ë¡.ë ˆì–´} ì‹ í™”:${ê¸°ë¡.ì‹ í™”} ê³ ëŒ€:${ê¸°ë¡.ê³ ëŒ€} íƒœì´ˆ:${ê¸°ë¡.íƒœì´ˆ} ê³µí—ˆ:${ê¸°ë¡.ê³µí—ˆ}`;

            const ì¥ë¹„ì»¨í…Œì´ë„ˆ = document.getElementById("ì¥ë¹„ì»¨í…Œì´ë„ˆ");
            ì¥ë¹„ì»¨í…Œì´ë„ˆ.innerHTML = "";
            document.getElementById("ì¥ë¹„ê³¨ë“œí‘œì‹œ").innerText =
                `${ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString()} Gold     |     ê³µê²©ë ¥ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥}`;

            document.getElementById("ì¥ë¹„ê³¨ë“œí‘œì‹œ").innerText =
                `ğŸ’° ${ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString()} Gold | ê³µê²©ë ¥ ğŸ—¡ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥} | ìµœëŒ€ì²´ë ¥ â¤ï¸ ${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;

            const ì¥ë¹„ëª©ë¡ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡ || [];

            if (ì¥ë¹„ëª©ë¡.length === 0) {
                ì¥ë¹„ì»¨í…Œì´ë„ˆ.innerText = "íšë“í•œ ì¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤.";
                return;
            }

            ì¥ë¹„ëª©ë¡.sort((a, b) => b.ê³µê²©ë ¥ - a.ê³µê²©ë ¥);

            ì¥ë¹„ëª©ë¡.forEach(ì¥ë¹„ => {
                const ë°•ìŠ¤ = document.createElement("div");
                ë°•ìŠ¤.className = `ê¸°ë³¸í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬ ì¥ë¹„-${ì¥ë¹„.ë“±ê¸‰}`;

                // âœ… í•©ì„±íšŸìˆ˜ ê°€ì ¸ì˜¤ê¸°
                const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
                const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;
                const ê°•í™”í‘œì‹œ = ì¥ë¹„.ê°•í™” ? ` +${ì¥ë¹„.ê°•í™”}` : "";
                const ì´ë¦„í‘œì‹œ = `${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜})${ê°•í™”í‘œì‹œ}`;

                ë°•ìŠ¤.innerHTML = `
      <div>[${ì¥ë¹„.ë“±ê¸‰}] ${ì´ë¦„í‘œì‹œ}</div>
      <div>
        <svg onclick="ì¥ë¹„ê°•í™”('${ì¥ë¹„.ì´ë¦„}', '${ì¥ë¹„.ë“±ê¸‰}', this.closest('.ê¸°ë³¸í…Œë‘ë¦¬'))"
         xmlns="http://www.w3.org/2000/svg"
         width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
         stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
         style="cursor:pointer; margin-right: 4px;">
          <path d="m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9"/>
          <path d="m18 15 4-4"/>
          <path d="m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5"/>
        </svg>
        ê³µê²©ë ¥ +${ì¥ë¹„.ê³µê²©ë ¥}
      </div>
    `;
                ì¥ë¹„ì»¨í…Œì´ë„ˆ.appendChild(ë°•ìŠ¤);
            });
        }

        function ì¥ë¹„ê°•í™”(ì´ë¦„, ë“±ê¸‰, ë°•ìŠ¤) {
            const ì¥ë¹„ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(z => z.ì´ë¦„ === ì´ë¦„ && z.ë“±ê¸‰ === ë“±ê¸‰);
            if (!ì¥ë¹„) return alert("ì¥ë¹„ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

            const ê°•í™”ë¹„ìš© = { ì¼ë°˜: 10000, ë ˆì–´: 100000, ì‹ í™”: 1000000, ê³ ëŒ€: 10000000, íƒœì´ˆ: 100000000 }[ë“±ê¸‰];
            const ê°•í™”ê³µê²©ë ¥ = { ì¼ë°˜: 10, ë ˆì–´: 100, ì‹ í™”: 1000, ê³ ëŒ€: 10000, íƒœì´ˆ: 100000 }[ë“±ê¸‰];

            if (ìœ ì €ë°ì´í„°.ê³¨ë“œ < ê°•í™”ë¹„ìš©) return alert("ê³¨ë“œê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");

            if (!confirm(`[${ì´ë¦„}]ì„(ë¥¼) ê°•í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nê³¨ë“œ ${ê°•í™”ë¹„ìš©.toLocaleString()} ì†Œëª¨ë©ë‹ˆë‹¤.`)) return;

            ìœ ì €ë°ì´í„°.ê³¨ë“œ -= ê°•í™”ë¹„ìš©;

            const ê¸°ì¡´ê°•í™” = ì¥ë¹„.ê°•í™” || 0; // ì‹¤íŒ¨ ëŒ€ë¹„ í˜„ì¬ ê°•í™” ìˆ˜ì¹˜ ì €ì¥

            const ì„±ê³µ = Math.random() < 0.5;
            if (ì„±ê³µ) {
                ì¥ë¹„.ê°•í™” = ê¸°ì¡´ê°•í™” + 1;
                ì¥ë¹„.ê³µê²©ë ¥ += ê°•í™”ê³µê²©ë ¥;
                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ê°•í™”ê³µê²©ë ¥;
                ê°•í™”ì´í™íŠ¸ë³´ì—¬ì£¼ê¸°(ë°•ìŠ¤, "ê°•í™” ì„±ê³µ!", "#00c851");
            } else {
                ê°•í™”ì´í™íŠ¸ë³´ì—¬ì£¼ê¸°(ë°•ìŠ¤, "ê°•í™” ì‹¤íŒ¨!", "#ef4444");
            }

            const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
            const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;

            const ë¡œê·¸ë©”ì‹œì§€ = ì„±ê³µ
                ? `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜}) ê°•í™” +${ì¥ë¹„.ê°•í™”} ì„±ê³µ!`
                : `[${ìœ ì €ë°ì´í„°.ì•„ì´ë””}] ${ì¥ë¹„.ì´ë¦„}(${í•©ì„±ìˆ˜}) ê°•í™” +${ê¸°ì¡´ê°•í™”} ì‹¤íŒ¨`;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).update({
                ì¥ë¹„ëª©ë¡: ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡,
                ê³¨ë“œ: ìœ ì €ë°ì´í„°.ê³¨ë“œ,
                ê³µê²©ë ¥: ìœ ì €ë°ì´í„°.ê³µê²©ë ¥
            }).then(() => {
                ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });

            const ë¡œê·¸ê°ì²´ = {
                ì•„ì´ë””: ìœ ì €ë°ì´í„°.ì•„ì´ë””,
                ì´ë¦„: ì¥ë¹„.ì´ë¦„,
                ê°•í™”: ì¥ë¹„.ê°•í™” || 0,
                ë“±ê¸‰: ì¥ë¹„.ë“±ê¸‰,
                ë¡œê·¸: ë¡œê·¸ë©”ì‹œì§€,
                ì‹œê°: Date.now()
            };

            db.ref("ë“œëë¡œê·¸").push(ë¡œê·¸ê°ì²´);
        }

        function ê°•í™”ì´í™íŠ¸ë³´ì—¬ì£¼ê¸°(ë°•ìŠ¤, ë©”ì‹œì§€, ìƒ‰ìƒ) {
            const rect = ë°•ìŠ¤.getBoundingClientRect();

            const el = document.createElement("div");
            el.innerText = ë©”ì‹œì§€;

            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = ìƒ‰ìƒ;
            el.style.fontWeight = "bold";
            el.style.fontSize = "14px";
            el.style.background = "rgba(0,0,0,0.7)";
            el.style.padding = "6px 10px";
            el.style.borderRadius = "8px";
            el.style.pointerEvents = "none";
            el.style.zIndex = 9999;
            el.style.whiteSpace = "nowrap";
            el.style.animation = "fadeOut 2s ease-out forwards";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }



        function ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "block";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
            document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").innerText = "ë³´ìœ  ìˆ™ë ¨ë„ " + ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„;

            const í´ë˜ìŠ¤ë§µ = {};
            [...í¬ë¦¬í‹°ì»¬ìŠ¤í‚¬ëª©ë¡, ...ë“œë ˆì¸ìŠ¤í‚¬ëª©ë¡, ...ë²„ì„œì»¤ìŠ¤í‚¬ëª©ë¡].forEach(ìŠ¤í‚¬ => {
                const ë§¤ì¹­ = ìŠ¤í‚¬.í‚¤.replace(/í¬ë¦¬í‹°ì»¬í™•ë¥ |ë“œë ˆì¸í¡í˜ˆí™•ë¥ |ë²„ì„œì»¤ë°ë¯¸ì§€ì¦ê°€í™•ë¥ /, '');
                í´ë˜ìŠ¤ë§µ[ìŠ¤í‚¬.í‚¤] = ë§¤ì¹­;
            });

            const ì»¨í…Œì´ë„ˆ = document.getElementById("ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            // ìŠ¤í‚¬ ì´ˆê¸°í™” (ê¸°ì¡´ ìœ ì €ìš©)
            if (!ìœ ì €ë°ì´í„°.ìŠ¤í‚¬) {
                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ = {};
            }
            for (const ìŠ¤í‚¬ of ìŠ¤í‚¬ëª©ë¡) {
                if (!(ìŠ¤í‚¬.í‚¤ in ìœ ì €ë°ì´í„°.ìŠ¤í‚¬)) {
                    ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤] = 0;
                }
            }

            // ë Œë”ë§
            ìŠ¤í‚¬ëª©ë¡.forEach(ìŠ¤í‚¬ => {
                const ì¡°ê±´ = ìŠ¤í‚¬.ì ê¸ˆí•´ì œì¡°ê±´;
                const ì ê¹€ = ì¡°ê±´ && (ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[ì¡°ê±´.í‚¤] ?? 0) < ì¡°ê±´.ìµœì†Œë ˆë²¨;
                if (ì ê¹€) return;

                const ìƒìœ„ìŠ¤í‚¬ì°í˜ = ìŠ¤í‚¬ëª©ë¡.some(ë‹¤ë¥¸ìŠ¤í‚¬ => {
                    const ìƒìœ„ì¡°ê±´ = ë‹¤ë¥¸ìŠ¤í‚¬.ì ê¸ˆí•´ì œì¡°ê±´;
                    return ìƒìœ„ì¡°ê±´ &&
                        ìƒìœ„ì¡°ê±´.í‚¤.toLowerCase() === ìŠ¤í‚¬.í‚¤.toLowerCase() &&
                        (ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[ë‹¤ë¥¸ìŠ¤í‚¬.í‚¤] ?? 0) > 0;
                });
                if (ìƒìœ„ìŠ¤í‚¬ì°í˜) return;

                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬.í‚¤];
                const í™•ë¥  = ë ˆë²¨ * 10;

                const í´ë˜ìŠ¤ëª… = í´ë˜ìŠ¤ë§µ[ìŠ¤í‚¬.í‚¤] ?? "";

                const ì•„ì´ì½˜HTML = ìŠ¤í‚¬.í‚¤.includes("í¬ë¦¬í‹°ì»¬")
                    ? `<svg xmlns="http://www.w3.org/2000/svg" class="target-icon ${í´ë˜ìŠ¤ëª…}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
       <path d="m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"/>
       <path d="M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"/>
     </svg>`
                    : ìŠ¤í‚¬.í‚¤.includes("í€µë‹ˆìŠ¤")
                        ? `<svg xmlns="http://www.w3.org/2000/svg" class="í€µë‹ˆìŠ¤ target-icon ${í´ë˜ìŠ¤ëª…}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
       <path d="M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z"/>
       <path d="m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z"/>
       <path d="M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0"/>
       <path d="M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5"/>
     </svg>`
                        : ìŠ¤í‚¬.í‚¤.includes("ë²„ì„œì»¤")
                            ? `<svg xmlns="http://www.w3.org/2000/svg" class="flame-icon ${í´ë˜ìŠ¤ëª…}" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
       <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6
       .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294
       1-3a2.5 2.5 0 0 0 2.5 2.5z"/>
     </svg>`
                            : ìŠ¤í‚¬.í‚¤.includes("ë“œë ˆì¸")
                                ? `<svg xmlns="http://www.w3.org/2000/svg" class="drain-icon ${í´ë˜ìŠ¤ëª…}" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
       <path d="m18 2 4 4" />
       <path d="m17 7 3-3" />
       <path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5" />
       <path d="m9 11 4 4" />
       <path d="m5 19-3 3" />
       <path d="m14 4 6 6" />
     </svg>`
                                : ìŠ¤í‚¬.í‚¤.includes("ì¸ì‚¬ì´íŠ¸")
                                    ? `<svg xmlns="http://www.w3.org/2000/svg" class="ì¸ì‚¬ì´íŠ¸ target-icon ${í´ë˜ìŠ¤ëª…}" viewBox="0 0 24 24" fill="none" stroke="currentColor">
       <polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/>
       <polyline points="16 7 22 7 22 13"/>
     </svg>`
                                    : ìŠ¤í‚¬.í‚¤.includes("ë°œêµ´")
                                        ? `<svg xmlns="http://www.w3.org/2000/svg" class="ë°œêµ´ target-icon ${í´ë˜ìŠ¤ëª…}" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
       <path d="M6 3h12l4 6-10 13L2 9Z"/>
       <path d="M11 3 8 9l4 13 4-13-3-6"/>
       <path d="M2 9h20"/>
     </svg>`
                                        : "";


                const ë°•ìŠ¤ = document.createElement("div");
                ë°•ìŠ¤.className = "ê¸°ë³¸í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬";
                const ì†Œëª¨ëŸ‰ = ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜());

                ë°•ìŠ¤.innerHTML = `
      <div class="ì–‘ìª½ì •ë ¬">
        <div class="ê°€ë¡œì •ë ¬">${ì•„ì´ì½˜HTML}${ìŠ¤í‚¬.ì´ë¦„}</div>
        <div>${ë ˆë²¨} / ${ìŠ¤í‚¬.ìµœëŒ€ë ˆë²¨}</div>
      </div>
      <div class="ì–‘ìª½ì •ë ¬">
        <div style="font-size: 11px; font-weight: lighter;">
${ìŠ¤í‚¬.ì„¤ëª…} (${í™•ë¥ }% / ğŸ”§ ${ì†Œëª¨ëŸ‰}ìˆ™ë ¨ë„)

        </div>
        <div>
          <button onclick="ìŠ¤í‚¬íˆ¬ì('${ìŠ¤í‚¬.í‚¤}')">+</button>
          <button onclick="ìŠ¤í‚¬íšŒìˆ˜('${ìŠ¤í‚¬.í‚¤}')">-</button>
      <button onclick="ìŠ¤í‚¬ìµœëŒ€íˆ¬ì('${ìŠ¤í‚¬.í‚¤}')">M</button>
      <button onclick="ìŠ¤í‚¬ì „ë¶€íšŒìˆ˜('${ìŠ¤í‚¬.í‚¤}')">R</button>
           </div>
      </div>
    `;

                ì»¨í…Œì´ë„ˆ.appendChild(ë°•ìŠ¤);
            });
        }

        function ìŠ¤í‚¬íˆ¬ì(ìŠ¤í‚¬í‚¤) {
            const ìŠ¤í‚¬ = ìŠ¤í‚¬ëª©ë¡.find(s => s.í‚¤ === ìŠ¤í‚¬í‚¤);
            if (!ìŠ¤í‚¬) return alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í‚¬ì…ë‹ˆë‹¤.");

            const íˆ¬ììˆœë²ˆ = ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜();
            const ì†Œëª¨ëŸ‰ = ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ);

            if (ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] >= ìŠ¤í‚¬.ìµœëŒ€ë ˆë²¨) {
                return alert("ì´ë¯¸ ìµœëŒ€ë ˆë²¨ì…ë‹ˆë‹¤.");
            }

            if (ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ < ì†Œëª¨ëŸ‰) return alert(`ìˆ™ë ¨ë„ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤. (${ì†Œëª¨ëŸ‰} í•„ìš”)`);

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ -= ì†Œëª¨ëŸ‰;
            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] += 1;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        }

        function ìŠ¤í‚¬íšŒìˆ˜(ìŠ¤í‚¬í‚¤) {
            const ìŠ¤í‚¬ = ìŠ¤í‚¬ëª©ë¡.find(s => s.í‚¤ === ìŠ¤í‚¬í‚¤);
            if (!ìŠ¤í‚¬) return alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìŠ¤í‚¬ì…ë‹ˆë‹¤.");

            const í˜„ì¬ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤];
            if (í˜„ì¬ë ˆë²¨ <= 0) return alert("íšŒìˆ˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

            let íˆ¬ììˆœë²ˆ = ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜() - 1;
            const í™˜ê¸‰ = ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ);

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += í™˜ê¸‰;
            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] -= 1;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        }

        function ìŠ¤í‚¬ìµœëŒ€íˆ¬ì(ìŠ¤í‚¬í‚¤) {
            const ìŠ¤í‚¬ = ìŠ¤í‚¬ëª©ë¡.find(s => s.í‚¤ === ìŠ¤í‚¬í‚¤);
            if (!ìŠ¤í‚¬) return;

            const í˜„ì¬ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤];
            const ìµœëŒ€ë ˆë²¨ = ìŠ¤í‚¬.ìµœëŒ€ë ˆë²¨;
            let íˆ¬ììˆœë²ˆ = ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜();

            let íˆ¬ì = 0;
            let ëˆ„ì ì†Œëª¨ = 0;

            for (let i = 0; i < ìµœëŒ€ë ˆë²¨ - í˜„ì¬ë ˆë²¨; i++) {
                const ì†Œëª¨ = ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ + i);
                if (ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ >= ëˆ„ì ì†Œëª¨ + ì†Œëª¨) {
                    ëˆ„ì ì†Œëª¨ += ì†Œëª¨;
                    íˆ¬ì++;
                } else break;
            }

            if (íˆ¬ì <= 0) return alert("ìˆ™ë ¨ë„ê°€ ë¶€ì¡±í•˜ê±°ë‚˜ ìµœëŒ€ë ˆë²¨ì…ë‹ˆë‹¤.");

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ -= ëˆ„ì ì†Œëª¨;
            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] += íˆ¬ì;
            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        }

        function ìŠ¤í‚¬ì „ë¶€íšŒìˆ˜(ìŠ¤í‚¬í‚¤) {
            const ìŠ¤í‚¬ = ìŠ¤í‚¬ëª©ë¡.find(s => s.í‚¤ === ìŠ¤í‚¬í‚¤);
            if (!ìŠ¤í‚¬) return;

            const í˜„ì¬ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤];
            if (í˜„ì¬ë ˆë²¨ <= 0) return alert("íšŒìˆ˜í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");

            let íˆ¬ììˆœë²ˆ = ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜() - 1;
            let í™˜ê¸‰í•©ê³„ = 0;

            for (let i = 0; i < í˜„ì¬ë ˆë²¨; i++) {
                í™˜ê¸‰í•©ê³„ += ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ);
                íˆ¬ììˆœë²ˆ--;
            }

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += í™˜ê¸‰í•©ê³„;
            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[ìŠ¤í‚¬í‚¤] = 0;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        }


        function ì ìš©ëœí¬ë¦¬í‹°ì»¬ë°°ìœ¨() {
            const ê·¸ë¦¬ìŠ¤ì´ë¦„ë“¤ = [
                "ì•ŒíŒŒ", "ë² íƒ€", "ê°ë§ˆ", "ë¸íƒ€", "ì—¡ì‹¤ë¡ ", "ì œíƒ€", "ì—íƒ€", "ì„íƒ€", "ì´ì˜¤íƒ€", "ì¹´íŒŒ",
                "ëŒë‹¤", "ë®¤", "ë‰´", "í¬ì‹œ", "ì˜¤ë¯¸í¬ë¡ ", "íŒŒì´", "ë¡œ", "ì‹œê·¸ë§ˆ", "íƒ€ìš°", "ì…ì‹¤ë¡ ",
                "íŒŒì´2", "ì¹´ì´", "í”„ì‹œ", "ì˜¤ë©”ê°€"
            ];

            let ëˆ„ì ë°°ìœ¨ = 1.0;
            let ë§ˆì§€ë§‰ë°œë™ = null;

            for (let i = 0; i < ê·¸ë¦¬ìŠ¤ì´ë¦„ë“¤.length; i++) {
                const ì´ë¦„ = ê·¸ë¦¬ìŠ¤ì´ë¦„ë“¤[i];
                const í‚¤ = `${ì´ë¦„.toLowerCase()}í¬ë¦¬í‹°ì»¬í™•ë¥ `;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;

                const ë°œë™ = í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ;
                if (ë°œë™) {
                    ëˆ„ì ë°°ìœ¨ *= (1.1 + i * 0.1);
                    ë§ˆì§€ë§‰ë°œë™ = { ì´ë¦„: `${ì´ë¦„} í¬ë¦¬í‹°ì»¬`, í´ë˜ìŠ¤: ì´ë¦„.toLowerCase() };
                } else {
                    break; // ì„ í–‰ ìŠ¤í‚¬ ë¯¸ë°œë™ ì‹œ ì´í›„ëŠ” ê±´ë„ˆëœ€
                }
            }

            return {
                ë°°ìœ¨: ëˆ„ì ë°°ìœ¨,
                ìŠ¤í‚¬ì´ë¦„: ë§ˆì§€ë§‰ë°œë™?.ì´ë¦„ ?? null,
                í´ë˜ìŠ¤: ë§ˆì§€ë§‰ë°œë™?.í´ë˜ìŠ¤ ?? null
            };
        }

        function ë“œë ˆì¸íšŒë³µê³„ì‚°() {
            const ë“œë ˆì¸ì´ë¦„ë“¤ = [
                "í‚¬ë¡œ", "ë©”ê°€", "ê¸°ê°€", "í…Œë¼", "í˜íƒ€",
                "ì—‘ì‚¬", "ì œíƒ€", "ìš”íƒ€", "ë¡œë‚˜", "ì¿¼ì¹´"
            ];

            let ì´íšŒë³µëŸ‰ = 0;
            let ë§ˆì§€ë§‰ë°œë™ = null;

            for (let i = 0; i < ë“œë ˆì¸ì´ë¦„ë“¤.length; i++) {
                const ì´ë¦„ = ë“œë ˆì¸ì´ë¦„ë“¤[i];
                const í‚¤ = `${ì´ë¦„.toLowerCase()}ë“œë ˆì¸í¡í˜ˆí™•ë¥ `;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;

                if (ë ˆë²¨ > 0) {
                    const ë°œë™ = í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ;
                    if (ë°œë™) {
                        ì´íšŒë³µëŸ‰ += (i + 1); // 1ë¶€í„° ì‹œì‘ (í‚¬ë¡œ = 1, ë©”ê°€ = 2, ...)
                        ë§ˆì§€ë§‰ë°œë™ = ì´ë¦„;
                    } else {
                        break;
                    }
                } else {
                    break;
                }
            }

            return {
                íšŒë³µëŸ‰: ì´íšŒë³µëŸ‰,
                ë°œë™ìŠ¤í‚¬: ë§ˆì§€ë§‰ë°œë™
            };
        }

        function ë²„ì„œì»¤ë°ë¯¸ì§€ë°°ìœ¨() {
            const ì´ë¦„ë“¤ = [
                "ì•µê±°", "ë ˆì´ì§€", "í”„ë Œì§€", "ë§¤ë“œë‹ˆìŠ¤", "í•˜ìš¸",
                "ìƒˆë¹„ì§€", "ë¸”ëŸ¬ë“œ", "ì¹´ì˜¤ìŠ¤", "ë°ìŠ¤", "ë£¨ë‚˜í‹±"
            ];

            // ê° ìŠ¤í‚¬ë³„ ë°°ìœ¨
            const ë°°ìœ¨ëª©ë¡ = [1.3, 1.6, 1.9, 2.2, 2.5, 2.8, 3.1, 3.4, 3.7, 4.0];

            const ì²´ë ¥ë¹„ìœ¨ = ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ / ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥;
            if (ì²´ë ¥ë¹„ìœ¨ > 0.3) return 1.0;

            let ëˆ„ì ë°°ìœ¨ = 1.0;

            for (let i = 0; i < ì´ë¦„ë“¤.length; i++) {
                const ì´ë¦„ = ì´ë¦„ë“¤[i];
                const í‚¤ = `${ì´ë¦„.toLowerCase()}ë²„ì„œì»¤ë°ë¯¸ì§€ì¦ê°€í™•ë¥ `;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;

                const ë°œë™ = í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ;
                if (ë°œë™) {
                    ëˆ„ì ë°°ìœ¨ *= ë°°ìœ¨ëª©ë¡[i];
                } else {
                    break; // ì—°ì† ë°œë™ ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨
                }
            }

            return ëˆ„ì ë°°ìœ¨;
        }

        function ë²„ì„œì»¤ì²´ë ¥ì†Œëª¨ëŸ‰() {
            const ì´ë¦„ë“¤ = [
                "ì•µê±°", "ë ˆì´ì§€", "í”„ë Œì§€", "ë§¤ë“œë‹ˆìŠ¤", "í•˜ìš¸",
                "ìƒˆë¹„ì§€", "ë¸”ëŸ¬ë“œ", "ì¹´ì˜¤ìŠ¤", "ë°ìŠ¤", "ë£¨ë‚˜í‹±"
            ];

            let ì†Œëª¨í•©ê³„ = 1;

            for (const ì´ë¦„ of ì´ë¦„ë“¤) {
                const í‚¤ = `${ì´ë¦„.toLowerCase()}ë²„ì„œì»¤ë°ë¯¸ì§€ì¦ê°€í™•ë¥ `;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                if (ë ˆë²¨ > 0) ì†Œëª¨í•©ê³„ += 1;
                else break; // ì—°ì† ì¡°ê±´ ë¯¸ì¶©ì¡± ì‹œ ì¤‘ë‹¨
            }

            return ì†Œëª¨í•©ê³„;
        }

        function í¡í˜ˆë¡œê·¸ë³´ì—¬ì£¼ê¸°(ë°œë™ìŠ¤í‚¬, íšŒë³µëŸ‰) {
            const ëŒ€ìƒ = document.querySelector(".ìœ ì €í…Œë‘ë¦¬");
            if (!ëŒ€ìƒ) return;

            const rect = ëŒ€ìƒ.getBoundingClientRect();

            const ì•„ì´ì½˜HTML = `
    <svg xmlns="http://www.w3.org/2000/svg" class="drain-icon ${ë°œë™ìŠ¤í‚¬?.toLowerCase()}" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="m18 2 4 4" />
      <path d="m17 7 3-3" />
      <path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5" />
      <path d="m9 11 4 4" />
      <path d="m5 19-3 3" />
      <path d="m14 4 6 6" />
    </svg>
  `;

            const el = document.createElement("div");
            el.innerHTML = `${ì•„ì´ì½˜HTML} ${ë°œë™ìŠ¤í‚¬} ë“œë ˆì¸! ì²´ë ¥ +${íšŒë³µëŸ‰}`;
            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = "#f43f5e";
            el.style.fontWeight = "bold";
            el.style.fontSize = "13px";
            el.style.display = "inline-flex";
            el.style.alignItems = "center";
            el.style.gap = "5px";
            el.style.padding = "4px 8px";
            el.style.background = "rgba(0, 0, 0, 0.7)";
            el.style.borderRadius = "6px";
            el.style.pointerEvents = "none";
            el.style.whiteSpace = "nowrap";
            el.style.zIndex = "9999";
            el.style.animation = "fadeOut 2s ease-in-out forwards";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        function ê³ ì •ì´í™íŠ¸ì˜ì—­ì´ˆê¸°í™”() {
            const ìœ ì € = document.querySelector(".ìœ ì €í…Œë‘ë¦¬");
            const ëª¬ìŠ¤í„° = document.querySelector(".ëª¬ìŠ¤í„°í…Œë‘ë¦¬");
            const ë°•ìŠ¤ = document.getElementById("ê³ ì •ì´í™íŠ¸ì˜ì—­");

            if (!ìœ ì € || !ëª¬ìŠ¤í„° || !ë°•ìŠ¤) return;

            const u = ìœ ì €.getBoundingClientRect();
            const m = ëª¬ìŠ¤í„°.getBoundingClientRect();

            ë°•ìŠ¤.style.top = `${u.top}px`;
            ë°•ìŠ¤.style.left = `${u.left}px`;
            ë°•ìŠ¤.style.width = `${u.width}px`;
            ë°•ìŠ¤.style.height = `${m.bottom - u.top}px`;
            ë°•ìŠ¤.style.display = "block";
        }


        document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").addEventListener("click", () => {
            if (!confirm("ëª¨ë“  ìŠ¤í‚¬ í¬ì¸íŠ¸ë¥¼ íšŒìˆ˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;

            let íˆ¬ììˆœë²ˆ = ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜() - 1;
            let ì´í™˜ê¸‰ = 0;

            for (const ìŠ¤í‚¬ of [...ìŠ¤í‚¬ëª©ë¡].reverse()) {
                const í‚¤ = ìŠ¤í‚¬.í‚¤;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤] ?? 0;

                for (let i = 0; i < ë ˆë²¨; i++) {
                    ì´í™˜ê¸‰ += ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ);
                    íˆ¬ììˆœë²ˆ--;
                }

                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬[í‚¤] = 0;
            }

            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += ì´í™˜ê¸‰;

            í™”ë©´ì ê¸ˆ();
            db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                alert("ìŠ¤í‚¬ í¬ì¸íŠ¸ê°€ ëª¨ë‘ íšŒìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.");
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                í™”ë©´í•´ì œ();
            });
        });



        function ì•„ì´ë””ì„¤ì •() {
            const ì…ë ¥ì•„ì´ë”” = document.getElementById("ì•„ì´ë””ì…ë ¥").value.trim();
            if (!ì…ë ¥ì•„ì´ë””) return alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");

            // 1ï¸âƒ£ ì•„ì´ë”” ì¤‘ë³µ ì—¬ë¶€ í™•ì¸
            í™”ë©´ì ê¸ˆ();
            db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ì…ë ¥ì•„ì´ë””).once("value", (snapshot) => {
                if (snapshot.exists()) {
                    í™”ë©´í•´ì œ();
                    return alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                }

                // 2ï¸âƒ£ ì¤‘ë³µ ì•„ë‹ˆë©´ ì €ì¥ ì§„í–‰
                ìœ ì €ë°ì´í„°.ì•„ì´ë”” = ì…ë ¥ì•„ì´ë””;
                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                    í™”ë©´í•´ì œ();
                });
            });
        }

        document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").addEventListener("click", () => {
            const el = document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ");

            // ì´ë¯¸ ì¸í’‹ ìƒíƒœë©´ ì¤‘ë³µ ìƒì„± ë°©ì§€
            if (el.querySelector("input")) return;

            const í˜„ì¬ì•„ì´ë”” = ìœ ì €ë°ì´í„°.ì•„ì´ë”” || "";
            const input = document.createElement("input");
            input.type = "text";
            input.value = í˜„ì¬ì•„ì´ë””;
            input.maxLength = 8;
            input.style.width = "120px";
            input.style.fontSize = "inherit";

            // ê¸°ì¡´ í…ìŠ¤íŠ¸ ì œê±°í•˜ê³  input ì‚½ì…
            el.innerHTML = "";
            el.appendChild(input);
            input.focus();

            // ì—”í„°ë¡œ ì €ì¥
            input.addEventListener("keydown", (e) => {
                if (e.key === "Enter") {
                    const ìƒˆì•„ì´ë”” = input.value.trim();
                    if (!ìƒˆì•„ì´ë””) return alert("ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");

                    í™”ë©´ì ê¸ˆ();

                    db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ìƒˆì•„ì´ë””).once("value", (snapshot) => {
                        const ì´ë¯¸ì¡´ì¬ = snapshot.exists() && ìƒˆì•„ì´ë”” !== í˜„ì¬ì•„ì´ë””;

                        if (ì´ë¯¸ì¡´ì¬) {
                            í™”ë©´í•´ì œ();
                            alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
                            input.focus();
                            return;
                        }

                        // ì €ì¥ ì§„í–‰
                        ìœ ì €ë°ì´í„°.ì•„ì´ë”” = ìƒˆì•„ì´ë””;
                        db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                            el.innerText = ìƒˆì•„ì´ë””;
                            document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").innerText = ìƒˆì•„ì´ë””;
                            document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìƒˆì•„ì´ë””;
                            í™”ë©´í•´ì œ();
                        });
                    });
                }

                // Esc ëˆ„ë¥´ë©´ ì·¨ì†Œ
                if (e.key === "Escape") {
                    el.innerText = í˜„ì¬ì•„ì´ë””;
                }
            });

            // í¬ì»¤ìŠ¤ ë²—ì–´ë‚˜ë©´ ì›ë˜ëŒ€ë¡œ (ë³€ê²½ ì·¨ì†Œ)
            input.addEventListener("blur", () => {
                el.innerText = í˜„ì¬ì•„ì´ë””;
            });
        });


        const ì•…ë§ˆë¦¬ìŠ¤íŠ¸ = [
            "ë””ë‚˜ë¥´", "ì—ë¦¬ê³¤", "ë„ë ˆì•Œ", "í¬ë¡œì…€", "ë£¨í˜ìŠ¤", "ë²¨", "ì‹œì—ë¥´", "ì„¸ë ˆìš°ìŠ¤", "ë²„ì•Œë² ë¦¬ìŠ¤", "ë°œë¼í¬",
            "ë¡œë…¸ë² ", "ìê°„", "ì•ˆë“œë¼ë©œë¦¬ìš°ìŠ¤", "ë‹ˆë² ë¡œìŠ¤", "ì—ì´ëª¬", "ë¼ì—ìŠ¤", "ì•„ë¼íƒ€ë°”", "ë°”í‹°ë°”ìŠ¤", "ì•„ëª¬", "ì•ˆë“œë¡œë§ë¦¬ìš°ìŠ¤",
            "ë°”í”¼ë©”íŠ¸", "ì˜¤ë¡œì´ì•„ìŠ¤", "ì˜¤ì„¸", "ì•„ë¯¸", "ë°ì¹´ë¸Œë¦¬ì•„", "ë²¨ë¦¬ì•Œ", "ë””ì¹´ë¦¬ë¸Œ", "ì„¸ì´ë¥´", "ì˜¤ë¡œë²„ìŠ¤", "ë¬´ë£¨ë¬´ë¥´",
            "ì¹´ì´ë¯¸", "ì•Œë¡œì„¸ìŠ¤", "ìƒ¤ë¥´ë‚˜í¬", "ìƒ¤í¬", "ì‚¬ë¸Œë‚™", "ë¼í•˜ë¸Œ", "ë§í¬ë¥´ìŠ¤", "í•˜ìš°ë ˆìŠ¤", "í”¼ë‹‰ìŠ¤", "ë¶€ì•Œ",
            "í‘¸ë¥´ì¹´ìŠ¤", "ê°€í”„", "ì•„ìŠ¤ëª¨ë°ìš°ìŠ¤", "í¬ë¥´ì¹´ìŠ¤", "ë³´ë½ìŠ¤", "ê¸€ë¼ì‹œì•„ë¼ë³¼ë¼ìŠ¤", "ë‚˜ë² ë¦¬ìš°ìŠ¤", "ì•„ì´ëª¬", "í”„ë£¨í‘¸ìŠ¤", "ì‚´ë¡œìŠ¤",
            "í•˜í”„ë¦¬", "í˜ë‹ˆì•…ìŠ¤", "ë‹¤ì´ëª¬", "ìŠ¤í‹¸", "ë§ˆë¥´ì½”ì‹œì•„ìŠ¤", "ë³´íŠ¸ìŠ¤", "ì œíŒŒë¥´", "ì—˜ë¦¬ê³ ìŠ¤", "ë ˆë¦¬ì–´", "ë² ë ˆíŠ¸",
            "ì‹œíŠ¸ë¦¬", "êµ¬ì‹œì˜¨", "ë¶€ì—ë¥´", "ì¹´ì„", "í¬ë¥´ë„¤ìš°ìŠ¤", "ë¶€ë„¤", "ì•„ëª¬", "ë§ˆë¼ë°”ìŠ¤", "í‘¸ë¥´ì†", "ë§íŒŒìŠ¤",
            "íŒŒì„", "ë°”ë¥´ë°”í† ìŠ¤", "ì•„ê°€ë ˆìŠ¤", "ë°”ì•Œ"
        ];

        function ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(num) {
            const ë¡œë§ˆ = ["M", "CM", "D", "CD", "C", "XC", "L", "XL", "X", "IX", "V", "IV", "I"];
            const ê°’ = [1000, 900, 500, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1];
            let ê²°ê³¼ = "";
            for (let i = 0; i < ê°’.length; i++) {
                while (num >= ê°’[i]) {
                    ê²°ê³¼ += ë¡œë§ˆ[i];
                    num -= ê°’[i];
                }
            }
            return ê²°ê³¼;
        }


        function í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ì¸µ, ë²ˆí˜¸, ë“±ê¸‰ = "ì¼ë°˜") {
            const ì•…ë§ˆìˆ˜ = 72;

            // âœ… ì§€ìˆ˜ ë³´ì • (1.01ë°°ì”© ì„±ì¥)
            let ì²´ë ¥ê¸°ë³¸ = 400 * Math.pow(1.1, ì¸µ - 1);
            let ë°©ì–´ê¸°ë³¸ = 10 * Math.pow(1.1, ì¸µ - 1);

            // ğŸ”€ ìŠ¤íƒ¯ì— ëœë¤ 90%~110% ì ìš©
            const ì²´ë ¥ = Math.floor(ì²´ë ¥ê¸°ë³¸ * (Math.random() * 0.2 + 0.9));
            const ë°©ì–´ë ¥ = Math.floor(ë°©ì–´ê¸°ë³¸ * (Math.random() * 0.2 + 0.9));

            // ğŸ§© ë“±ê¸‰ ë³´ì •
            let ìµœì¢…ì²´ë ¥ = ì²´ë ¥;
            let ìµœì¢…ë°©ì–´ = ë°©ì–´ë ¥;
            switch (ë“±ê¸‰) {
                case "ë ˆì–´":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 1.2);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 1.2);
                    break;
                case "ì‹ í™”":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 1.5);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 1.5);
                    break;
                case "ê³ ëŒ€":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 1.9);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 1.9);
                    break;
                case "íƒœì´ˆ":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 2.4);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 2.4);
                    break;
                case "ê³µí—ˆ":
                    ìµœì¢…ì²´ë ¥ = Math.floor(ì²´ë ¥ * 3.0);
                    ìµœì¢…ë°©ì–´ = Math.floor(ë°©ì–´ë ¥ * 3.0);
                    break;
            }

            return {
                ì¸µ,
                ë²ˆí˜¸,
                ì²´ë ¥: ìµœì¢…ì²´ë ¥,
                ë°©ì–´ë ¥: ìµœì¢…ë°©ì–´,
            };
        }

        function ëˆ„ì ìŠ¤í‚¬íˆ¬ìíšŸìˆ˜() {
            return Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ || {}).reduce((a, b) => a + b, 0);
        }

        document.getElementById("íƒˆí‡´").addEventListener("click", function () {
            if (!uid) return alert("ë¡œê·¸ì¸ì´ ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.");


            if (confirm("ì •ë§ íƒˆí‡´í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë©ë‹ˆë‹¤.")) {
                // ğŸ”¥ í•´ë‹¹ uid ì „ì²´ ë°ì´í„° ì™„ì „ ì‚­ì œ
                í™”ë©´ì ê¸ˆ();
                db.ref("users/" + uid).remove().then(() => {
                    alert("ëª¨ë“  ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë¡œê·¸ì¸ í™”ë©´ì´ ë‚˜ì˜µë‹ˆë‹¤.");
                    location.reload(); // ìƒˆë¡œê³ ì¹¨í•´ì„œ ë‹¤ì‹œ ìµëª… ë¡œê·¸ì¸ë¶€í„°
                    í™”ë©´í•´ì œ();
                });
            }


        });


        function ê³µê²©í•˜ê¸°() {
            if (í˜„ì¬ì•…ë§ˆì²´ë ¥ <= 0 || ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ <= 0) {
                í™”ë©´í•´ì œ(); // ğŸ’¡ ì´ ì¤„ ì¶”ê°€
                return;
            }
            í™”ë©´ì ê¸ˆ();

            // âœ… ëª¬ìŠ¤í„° ì´ë¦„ ì¼ê´€ì„± ìˆê²Œ ì¶”ì¶œ
            const ì•…ë§ˆ = í˜„ì¬ì•…ë§ˆë¶ˆëŸ¬ì˜¤ê¸°(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ, ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
            const ì•…ë§ˆì´ë¦„ = ì•…ë§ˆë¦¬ìŠ¤íŠ¸[(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ - 1) % ì•…ë§ˆë¦¬ìŠ¤íŠ¸.length];
            const ë¡œë§ˆë²ˆí˜¸ = ìˆ«ìë¥¼ë¡œë§ˆìˆ«ìë¡œ(ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸);
            const ëª¬ìŠ¤í„°ì´ë¦„ = `${ë¡œë§ˆë²ˆí˜¸}. ${ì•…ë§ˆì´ë¦„}`;
            const ì „íˆ¬ì¤‘ëª¬ìŠ¤í„°ì´ë¦„ = í˜„ì¬ëª¬ìŠ¤í„°ì´ë¦„;
            const ì „íˆ¬ì¤‘ëª¬ìŠ¤í„°ë“±ê¸‰ = í˜„ì¬ëª¬ìŠ¤í„°ë“±ê¸‰;

            let ì•…ë§ˆHP = ì•…ë§ˆ.ì²´ë ¥;
            let ìœ ì €HP = ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥;
            let ì „íˆ¬ê²°ê³¼ = null;

            while (ì•…ë§ˆHP > 0 && ìœ ì €HP > 0) {
                const ìœ ì €ê³µ = ìœ ì €ë°ì´í„°.ê³µê²©ë ¥;
                const ë°©ì–´ = ì•…ë§ˆ.ë°©ì–´ë ¥;
                const ëœë¤ = Math.random() * 0.2 + 0.8;
                const { ë°°ìœ¨: í¬ë¦¬ë°°ìœ¨ } = ì ìš©ëœí¬ë¦¬í‹°ì»¬ë°°ìœ¨();
                const ë²„ì„œì»¤ë°°ìœ¨ = ë²„ì„œì»¤ë°ë¯¸ì§€ë°°ìœ¨();
                const ì²´ë ¥ì†Œëª¨ = ë²„ì„œì»¤ì²´ë ¥ì†Œëª¨ëŸ‰();

                const ë°ë¯¸ì§€ = Math.floor(Math.max(0, ìœ ì €ê³µ - ë°©ì–´) * ëœë¤ * í¬ë¦¬ë°°ìœ¨ * ë²„ì„œì»¤ë°°ìœ¨);

                ì•…ë§ˆHP -= ë°ë¯¸ì§€;
                ìœ ì €HP = Math.max(0, ìœ ì €HP - ì²´ë ¥ì†Œëª¨);
            }

            ì „íˆ¬ê²°ê³¼ = (ìœ ì €HP <= 0) ? "íŒ¨ë°°" : "ìŠ¹ë¦¬";

            if (ì „íˆ¬ê²°ê³¼ === "íŒ¨ë°°") {
                // âœ… í›„í‡´ ì²˜ë¦¬
                ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥;

                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;
                // ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µì€ ê·¸ëŒ€ë¡œ
                delete ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°;
                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "íŒ¨ë°°";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "red";
                    document.getElementById("íšë“ë¡œê·¸").style.color = "red";
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
                    document.getElementById("íšë“ë¡œê·¸").innerText = "ì´ ì „ ëª¬ìŠ¤í„°ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤";
                    ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°("ğŸ’€ ì²´ë ¥ì´ ëª¨ë‘ ì†Œì§„ë˜ì–´ í›„í‡´í•©ë‹ˆë‹¤!");
                    í™”ë©´í•´ì œ();
                });

            } else {
                const { íšŒë³µëŸ‰, ë°œë™ìŠ¤í‚¬ } = ë“œë ˆì¸íšŒë³µê³„ì‚°();
                ìœ ì €HP = Math.min(ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥, ìœ ì €HP + íšŒë³µëŸ‰);

                const ë³´ìƒ = ë³´ìƒíšë“(ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ);
                const ì´ì „ë ˆë²¨ = ìœ ì €ë°ì´í„°.ë ˆë²¨;

                ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = ìœ ì €HP;
                ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ += ë³´ìƒ.ê²½í—˜ì¹˜;
                ìœ ì €ë°ì´í„°.ê³¨ë“œ += ë³´ìƒ.ê³¨ë“œ;
                ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ += ë³´ìƒ.ìˆ™ë ¨ë„;

                const ìƒˆë ˆë²¨ = Math.floor(ìœ ì €ë°ì´í„°.ê²½í—˜ì¹˜ / 100) + 1;
                if (ìƒˆë ˆë²¨ > ì´ì „ë ˆë²¨) {
                    const ì¦ê°€ëŸ‰ = ìƒˆë ˆë²¨ - ì´ì „ë ˆë²¨;
                    ìœ ì €ë°ì´í„°.ë ˆë²¨ = ìƒˆë ˆë²¨;
                    ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ += ì¦ê°€ëŸ‰ * 15;
                    ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ = ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥;
                }

                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;

                // âœ… ê°•ë¦¼ëª¬ìŠ¤í„° ë“œëí…œ ì²˜ë¦¬
                if (ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°) {
                    ì¥ë¹„ë“œëì‹œë„(ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°.ë“±ê¸‰, í˜„ì¬ì•…ë§ˆìµœëŒ€ì²´ë ¥);
                }


                delete ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„°;

                db.ref("users/" + uid).set(ìœ ì €ë°ì´í„°).then(() => {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°();

                    // âœ… ìŠ¹ë¦¬ UI ì¶œë ¥
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "ìŠ¹ë¦¬";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#00c851";
                    document.getElementById("íšë“ë¡œê·¸").style.color = "#00c851";
                    document.getElementById("íšë“ë¡œê·¸").innerText =
                        `${ë³´ìƒ.ê²½í—˜ì¹˜} EXP, ${ë³´ìƒ.ê³¨ë“œ} Gold, ${ë³´ìƒ.ìˆ™ë ¨ë„} ìˆ™ë ¨ë„ íšë“`;
                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = `+${ë³´ìƒ.ê²½í—˜ì¹˜}`;
                    document.getElementById("íšë“ê³¨ë“œ").innerText = `+${ë³´ìƒ.ê³¨ë“œ}`;
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = `+${ë³´ìƒ.ìˆ™ë ¨ë„}`;
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText =
                        (ìƒˆë ˆë²¨ > ì´ì „ë ˆë²¨) ? "ë ˆë²¨ì—…!" : "";

                    if (íšŒë³µëŸ‰ > 0) {
                        í¡í˜ˆë¡œê·¸ë³´ì—¬ì£¼ê¸°(ë°œë™ìŠ¤í‚¬, íšŒë³µëŸ‰);
                    }

                    ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°(`${ì „íˆ¬ì¤‘ëª¬ìŠ¤í„°ì´ë¦„} ì²˜ì¹˜!`);
                    í™”ë©´í•´ì œ();
                });
            }
        }

        document.getElementById("ì•„ë˜ì¸µìœ¼ë¡œ").addEventListener("click", () => {
            if (ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ > 1) {
                ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ -= 1;
                ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;
                ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = null; // âœ… ê°•ë¦¼ ìƒíƒœ ì´ˆê¸°í™”
                ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
            }
        });

        document.getElementById("ìœ„ì¸µìœ¼ë¡œ").addEventListener("click", () => {
            ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ += 1;
            ìœ ì €ë°ì´í„°.í˜„ì¬ì•…ë§ˆë²ˆí˜¸ = Math.floor(Math.random() * 72) + 1;
            ìœ ì €ë°ì´í„°.ê°•ë¦¼ëª¬ìŠ¤í„° = null; // âœ… ê°•ë¦¼ ìƒíƒœ ì´ˆê¸°í™”
            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
        });


        function ë°ë¯¸ì§€í‘œì‹œ(í…ìŠ¤íŠ¸) {
            const el = document.createElement("div");
            el.innerText = í…ìŠ¤íŠ¸;

            el.style.position = "absolute";
            el.style.left = `${Math.random() * 80 + 10}%`;  // 10% ~ 90%
            el.style.top = `${Math.random() * 70 + 15}%`;   // 15% ~ 85%
            el.style.color = "orange";
            el.style.fontWeight = "bold";
            el.style.fontSize = "16px";
            el.style.pointerEvents = "none";
            el.style.whiteSpace = "nowrap";
            el.style.zIndex = "9999";
            el.style.animation = "fadeOut 1.5s ease-out forwards";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 1500);
        }

        function ë³´ìƒíšë“(ì¸µ) {
            const ê²½í—˜ì¹˜ = Math.floor(Math.random() * 15) + 10;
            let ê³¨ë“œ = Math.floor(Math.random() * 100) + ì¸µ * 100; // âœ… letìœ¼ë¡œ ë³€ê²½

            const ì¸ì‚¬ì´íŠ¸ì´ë¦„ë“¤ = ["ë§ˆì´í¬ë¡œ", "ë‚˜ë…¸", "í”¼ì½”", "í¨í† ", "ì•„í† ", "ì œí”„í† ", "ìš”í¬í† "];
            let ì¶”ê°€ìˆ™ë ¨ë„ = 0;
            for (let i = 0; i < ì¸ì‚¬ì´íŠ¸ì´ë¦„ë“¤.length; i++) {
                const í‚¤ = `${ì¸ì‚¬ì´íŠ¸ì´ë¦„ë“¤[i].toLowerCase()}ì¸ì‚¬ì´íŠ¸í™•ë¥ `;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;
                const ë°œë™ = í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ;
                if (ë°œë™) {
                    ì¶”ê°€ìˆ™ë ¨ë„ += (i + 1);
                } else {
                    break;
                }
            }

            const ìˆ™ë ¨ë„ = ì¸µ + ì¶”ê°€ìˆ™ë ¨ë„;

            const ë°œêµ´ì´ë¦„ë“¤ = ["ë£¨ë¹„", "ì‚¬íŒŒì´ì–´", "ì—ë©”ë„ë“œ", "ë‹¤ì´ì•„ëª¬ë“œ", "í† íŒŒì¦ˆ", "ììˆ˜ì •", "ì˜¤íŒ”", "ê°€ë„·", "í˜ë¦¬ë„íŠ¸"];
            for (let i = 0; i < ë°œêµ´ì´ë¦„ë“¤.length; i++) {
                const í‚¤ = `${ë°œêµ´ì´ë¦„ë“¤[i].toLowerCase()}ë°œêµ´ê³¨ë“œì¦ê°€í™•ë¥ `;
                const ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] ?? 0;
                const í™•ë¥  = ë ˆë²¨ * 10;
                const ì¦ê°€ìœ¨ = (i + 1) * 0.1;
                if (í™•ë¥  >= 100 || Math.random() * 100 < í™•ë¥ ) {
                    ê³¨ë“œ = Math.floor(ê³¨ë“œ * (1 + ì¦ê°€ìœ¨));
                } else break;
            }

            return { ê²½í—˜ì¹˜, ê³¨ë“œ, ìˆ™ë ¨ë„ };
        }


        window.addEventListener("DOMContentLoaded", function () {
            document.getElementById("ê³µê²©ë²„íŠ¼").addEventListener("click", ê³µê²©í•˜ê¸°);

            db.ref("ë“œëë¡œê·¸").limitToLast(20).on("child_added", (snapshot) => {
                const ë¡œê·¸ = snapshot.val();

                db.ref("users").orderByChild("ì•„ì´ë””").equalTo(ë¡œê·¸.ì•„ì´ë””).once("value").then(userSnap => {
                    let í—ˆìš© = true;
                    userSnap.forEach(child => {
                        const ìœ ì € = child.val();
                        const ìƒì„±ì‹œê° = new Date(ìœ ì €?.ìƒì„±ì‹œê°).getTime();
                        if (ìƒì„±ì‹œê° < ê¸°ì¤€ì‹œê°) í—ˆìš© = false;
                    });

                    if (í—ˆìš©) ë“œëë¡œê·¸ì¶”ê°€(ë¡œê·¸.ì•„ì´ë””, ë¡œê·¸);
                });
            });
        });


        function ì£½ìŒë©”ì‹œì§€ë³´ì—¬ì£¼ê¸°(text) {
            const ëŒ€ìƒ = document.querySelector(".ëª¬ìŠ¤í„°í…Œë‘ë¦¬");
            if (!ëŒ€ìƒ) return;

            const rect = ëŒ€ìƒ.getBoundingClientRect();

            const el = document.createElement("div");
            el.innerText = text;
            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = "#b0b0b0";
            el.style.background = "rgba(0, 0, 0, 0.8)";
            el.style.padding = "10px 20px";
            el.style.border = "2px solid #2e2e2e";
            el.style.borderRadius = "12px";
            el.style.fontWeight = "bold";
            el.style.fontSize = "14px";
            el.style.pointerEvents = "none";
            el.style.zIndex = "9999";
            el.style.whiteSpace = "nowrap";
            el.style.animation = "fadeOut 2s ease-in-out forwards";
            el.style.boxShadow = "0 0 20px rgba(234, 0, 255, 0.6)";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        function ìë™ì‚¬ëƒ¥í† ê¸€() {
            const ë²„íŠ¼ = document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼");

            if (!ìë™ì‚¬ëƒ¥ì¤‘) {
                ìë™ì‚¬ëƒ¥ì¤‘ = true;
                ë²„íŠ¼.innerText = "ğŸ›‘ ìë™ì¤‘ì§€";
                ë²„íŠ¼.style.color = "red";

                ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = setInterval(() => {
                    if (!ìë™ì‚¬ëƒ¥ì¤‘ || ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ <= 0) return;

                    const ê¸°ë³¸ë”œë ˆì´ = 1000;
                    const í€µë‹ˆìŠ¤ê°ì†Œ = ì ìš©ëœí€µë‹ˆìŠ¤ë”œë ˆì´ê°ì†Œ(); // âœ… í™•ë¥  ê¸°ë°˜ ê°ì†Œ
                    const í˜„ì¬ë”œë ˆì´ = Math.max(100, ê¸°ë³¸ë”œë ˆì´ - í€µë‹ˆìŠ¤ê°ì†Œ);

                    clearInterval(ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸); // í˜„ì¬ ë”œë ˆì´ë¡œ ë‹¤ì‹œ ì„¤ì •
                    ê³µê²©í•˜ê¸°();

                    ìë™ì‚¬ëƒ¥íƒ€ì´ë¨¸ = setInterval(() => {
                        if (!ìë™ì‚¬ëƒ¥ì¤‘ || ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥ <= 0) return;
                        ê³µê²©í•˜ê¸°();
                    }, í˜„ì¬ë”œë ˆì´);
                }, 1000); // ì²« ì‹¤í–‰ì€ ì¦‰ì‹œ
            } else {
                ìë™ì‚¬ëƒ¥ì¤‘ì§€();
            }
        }

        document.getElementById("ìë™ì‚¬ëƒ¥ë²„íŠ¼").addEventListener("click", ìë™ì‚¬ëƒ¥í† ê¸€);

        document.getElementById("ì „ë‹¹").addEventListener("click", () => {
            ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        document.getElementById("ìŠ¤í‚¬").addEventListener("click", () => {
            ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });
        document.getElementById("ì¥ë¹„").addEventListener("click", () => {
            ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        document.getElementById("ì „íˆ¬").addEventListener("click", () => {
            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
        });

        document.addEventListener("click", (e) => {
            // ìë™ì‚¬ëƒ¥ ì¤‘ì¼ ë•Œë§Œ ë©ˆì¶¤
            if (ìë™ì‚¬ëƒ¥ì¤‘ && !e.target.closest("#ìë™ì‚¬ëƒ¥ë²„íŠ¼")) {
                ìë™ì‚¬ëƒ¥ì¤‘ì§€();
            }
        });


        function ìˆ™ë ¨ë„ì†Œëª¨ê³„ì‚°(íˆ¬ììˆœë²ˆ) {
            return Math.floor(10 * Math.pow(1.02, íˆ¬ììˆœë²ˆ));
        }




        // document.getElementById("ê³µê²©ë²„íŠ¼").style.display = "none";
        document.getElementById("ê³µê²©ë²„íŠ¼").style.visibility = "hidden";




        // ìŠ¤í¬ë¦½íŠ¸ì¶”ê°€





    </script>





</body>

</html>


<!-- ìŠ¤í‚¬ì¶”ê°€ë§¤ì»¤ë‹ˆì¦˜
ì´ë¦„ì„¤ì •
ëª©ë¡ì„¤ì •
íš¨ê³¼ì ìš©
ì•„ì´ì½˜ì„ ë³„
cssìƒ‰ìƒë“±ë¡
ìŠ¤í‚¬í™”ë©´ì•„ì´ì½˜ë“±ë¡ -->



<!-- ë²„ì „ì²´í¬
ë“œëë¡œê·¸í•¨ìˆ˜ìˆ˜ì •
ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°ìˆ˜ì • -->